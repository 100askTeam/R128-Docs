"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3926],{8202:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>_});var t=l(5893),d=l(1151);const i={},s="R128\u4f7f\u7528SPI LCD",c={id:"demo/part1/chapter9",title:"R128\u4f7f\u7528SPI LCD",description:"R128 \u5e73\u53f0\u63d0\u4f9b\u4e86 SPI DBI \u7684 SPI TFT \u63a5\u53e3\uff0c\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a",source:"@site/docs/demo/part1/chapter9.md",sourceDirName:"demo/part1",slug:"/demo/part1/chapter9",permalink:"/demo/part1/chapter9",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/R128-Docs/tree/main/docs/demo/part1/chapter9.md",tags:[],version:"current",frontMatter:{},sidebar:"classparttwoSidebar",previous:{title:"\u9a71\u52a8 OLED \u5c4f",permalink:"/demo/part1/chapter8"},next:{title:"\u7efc\u5408\u9879\u76ee\u5f00\u53d1\u6848\u4f8b",permalink:"/category/\u7efc\u5408\u9879\u76ee\u5f00\u53d1\u6848\u4f8b"}},r={},_=[{value:"\u63a5\u7ebf",id:"\u63a5\u7ebf",level:2},{value:"\u8986\u76d6spilcd\u76ee\u5f55",id:"\u8986\u76d6spilcd\u76ee\u5f55",level:2},{value:"\u914d\u7f6emenuconfig",id:"\u914d\u7f6emenuconfig",level:2},{value:"\u4fee\u6539\u8c03\u8bd5\u7b49\u7ea7",id:"\u4fee\u6539\u8c03\u8bd5\u7b49\u7ea7",level:2},{value:"\u4fee\u6539\u9ed8\u8ba4ALIGN_DMA_BUF_SIZE",id:"\u4fee\u6539\u9ed8\u8ba4align_dma_buf_size",level:2},{value:"\u6ce8\u91caSUPPORT_DBI_IF",id:"\u6ce8\u91casupport_dbi_if",level:2},{value:"sys_config.fex\u914d\u7f6e",id:"sys_configfex\u914d\u7f6e",level:2},{value:"lvgl\u914d\u7f6e",id:"lvgl\u914d\u7f6e",level:2},{value:"\u4fee\u6539lv_conf.h",id:"\u4fee\u6539lv_confh",level:3},{value:"\u4fee\u6539lv_main.c",id:"\u4fee\u6539lv_mainc",level:3},{value:"\u7ed3\u679c",id:"\u7ed3\u679c",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"r128\u4f7f\u7528spi-lcd",children:"R128\u4f7f\u7528SPI LCD"}),"\n",(0,t.jsx)(n.p,{children:"R128 \u5e73\u53f0\u63d0\u4f9b\u4e86 SPI DBI \u7684 SPI TFT \u63a5\u53e3\uff0c\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Supports DBI Type C 3 Line/4 Line Interface Mode"}),"\n",(0,t.jsx)(n.li,{children:"Supports 2 Data Lane Interface Mode"}),"\n",(0,t.jsx)(n.li,{children:"Supports data source from CPU or DMA"}),"\n",(0,t.jsx)(n.li,{children:"Supports RGB111/444/565/666/888 video format"}),"\n",(0,t.jsx)(n.li,{children:"Maximum resolution of RGB666 240 x 320@30Hz with single data lane"}),"\n",(0,t.jsx)(n.li,{children:"Maximum resolution of RGB888 240 x 320@60Hz or 320 x 480@30Hz with dual data lane"}),"\n",(0,t.jsx)(n.li,{children:"Supports tearing effect"}),"\n",(0,t.jsx)(n.li,{children:"Supports software flexible control video frame rate"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u540c\u65f6\uff0c\u63d0\u4f9b\u4e86SPILCD\u9a71\u52a8\u6846\u67b6\u4ee5\u4f9b SPI \u5c4f\u5e55\u4f7f\u7528\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u91cc\u7684\u793a\u4f8b\u4ee5\u767e\u95ee\u7f51\u7684SPI LCD\u4e3a\u4f8b\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5c4f\u5e55\u83b7\u53d6\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://item.taobao.com/item.htm?id=736154682975",children:"https://item.taobao.com/item.htm?id=736154682975"})}),"\n",(0,t.jsxs)(n.li,{children:["\u6216",(0,t.jsx)(n.a,{href:"https://item.taobao.com/item.htm?&id=707079371679",children:"https://item.taobao.com/item.htm?&id=707079371679"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u63a5\u7ebf",children:"\u63a5\u7ebf"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"LCD Pin"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"R128 Pin"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GND"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GND"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PWM"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA26"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"RESET"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA05"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"MOSI"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA18"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"SCK"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA13"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"RS"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA04"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"CS"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA12"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"MISO"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"PA21"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"3.3V"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"3.3V"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GND"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GND"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u8986\u76d6spilcd\u76ee\u5f55",children:"\u8986\u76d6spilcd\u76ee\u5f55"}),"\n",(0,t.jsxs)(n.p,{children:["\u5c06\u6b64\u76ee\u5f55\u4e0b\u7684\u540d\u4e3a",(0,t.jsx)(n.code,{children:"spilcd"}),"\u7684\u6587\u4ef6\u5939\uff0c\u590d\u5236\u8986\u76d6\u5230SDK\u4e2d\u4f4d\u4e8e",(0,t.jsx)(n.code,{children:"R128-FreeRTOS/lichee/rtos-hal/hal/source/spilcd"}),"\u7684\u76ee\u5f55\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6emenuconfig",children:"\u914d\u7f6emenuconfig"}),"\n",(0,t.jsx)(n.p,{children:"\u521d\u59cb\u5316\u73af\u5883\u53d8\u91cf\uff0c\u9009\u62e9\u65b9\u6848\uff0c\u8fdb\u5165\u5230menuconfig\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"100ask@100ask:~/R128-FreeRTOS/SDK$ source envsetup.sh \nSetup env done!\nRun lunch_rtos to select project\n100ask@100ask:~/R128-FreeRTOS/SDK$ lunch_rtos\nlast=r128s2_devkit_c906\n\nYou're building on Linux\n\nLunch menu... pick a combo:\n     1. r128s2_devkit_c906\n     2. r128s2_devkit_m33\n     3. r128s2_devkit_rgb_c906\n     4. r128s2_devkit_rgb_m33\n     5. r128s2_evt_c906\n     6. r128s2_evt_m33\n\nWhich would you like? [Default r128s2_devkit_c906]: 1\nselect=1...\nr128s2/devkit_c906\n'/home/100ask/R128-FreeRTOS/SDK/lichee/rtos/projects/r128s2/devkit_c906/defconfig' -> '/home/100ask/R128-FreeRTOS/SDK/lichee/rtos/.config'\n============================================\nRTOS_BUILD_TOP=/home/100ask/R128-FreeRTOS/SDK\nRTOS_TARGET_ARCH=riscv\nRTOS_TARGET_CHIP=sun20iw2p1\nRTOS_TARGET_DEVICE=r128s2\nRTOS_PROJECT_NAME=r128s2_devkit_c906\n============================================\nRun mrtos_menuconfig to config rtos\nRun m or mrtos to build rtos\n100ask@100ask:~/R128-FreeRTOS/SDK$\n100ask@100ask:~/R128-FreeRTOS/SDK$\n100ask@100ask:~/R128-FreeRTOS/SDK$ mrtos_menuconfig\n"})}),"\n",(0,t.jsx)(n.p,{children:"menuconfig\u5177\u4f53\u914d\u7f6e\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\n# 1.\u6253\u5f00SPI\u548cPWM\nDrivers Options  ---\x3e\n    soc related device drivers  ---\x3e\n        SPI Devices   ---\x3e\n            [*] enable spi driver\n            [*]   support sp transfer if crash\n            [ ]   enable spi hal APIs test command\n        PWM devices ---\x3e\n            [*] enable pwm driver\n            [ ]   enable pwm hal APIs test command\n\n# 2. \u6253\u5f00SPILCD\uff0c\u5e76\u6253\u5f00100ASK\u76f8\u5173\u7684\u914d\u7f6e\nDrivers Options  ---\x3e\n    soc related device drivers  ---\x3e\n        SPILCD Devices   ---\x3e\n            [*] DISP Driver Support(spi_lcd)\n            [*]   spilcd hal APIs test\n            LCD_FB panels select  ---\x3e\n                [ ] LCD support kld2844B panel\n                [ ] LCD support kld35512 panel\n                [ ] LCD support kld39501 panel\n                [ ] LCD support nv3029s panel\n                [ ] LCD support JLT35031C panel\n                100ASK LCD configure  ---\x3e\n                    [*] LCD support 100ask panel\n                    Select the model of the display (320X480)  ---\x3e\n                    (0) Set display rotation angle (90, 180, 270)\n            Board select  ---\x3e\n                [ ] board kld2844b support\n                [ ] board kld35512 support\n                [*] board lcd 100ask support\n\n# 3. \u6253\u5f00LVGL\u76f8\u5173\u914d\u7f6e\nSystem components  ---\x3e\n    thirdparty components  ---\x3e\n        [*] Littlevgl-8  ---\x3e\n            --- Littlevgl-8\n            [*]   lvgl examples\n            [ ]   lvgl g2d test\n            [*]   lvgl-8.1.0 use sunxifb double buffer\n            [*]   lvgl-8.1.0 use sunxifb cache\n            [ ]   lvgl-8.1.0 use sunxifb g2d\n            [ ]   lvgl-8.1.0 use sunxifb g2d rotate\n            [ ]   lvgl-8.1.0 use freetype\n            [ ]   lvgl-8.1.0 use direct mode\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4fee\u6539\u8c03\u8bd5\u7b49\u7ea7",children:"\u4fee\u6539\u8c03\u8bd5\u7b49\u7ea7"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"R128-FreeRTOS/lichee/rtos-hal/hal/source/spi/hal_spi.c"})]}),"\n",(0,t.jsx)(n.p,{children:"SPI \u9a71\u52a8\u4e2d\u9884\u7559\u4e86 3 \u4e2a\u8c03\u8bd5\u5b8f\u5f00\u5173\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u76f8\u5e94\u5f00\u542f\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"\t#define SPI_INFO_LEVEL    # \u5f00\u542f\u540e\u9a71\u52a8\u4f1a\u5c06\u4e00\u4e9b\u8c03\u8bd5\u4fe1\u606f\u6253\u5370\u5230\u4e32\u53e3\u7ec8\u7aef\u4e0a\u3002\n\t#define SPI_DATA_LEVEL    # \u5f00\u542f\u540e\u9a71\u52a8\u4f1a\u5c06 RX/TX buffer \u4e2d\u7684\u6570\u636e\u6253\u5370\u5230\u4e32\u53e3\u7ec8\u7aef\u4e0a\u65b9\u4fbf\u89c2\u5bdf\u3002\n\t#define SPI_DUMPREG_LEVEL # \u5f00\u542f\u540e\u9a71\u52a8\u4f1a\u5728 RX/TX \u65f6\u5206\u522b dump \u4e00\u6b21 SPI \u7684\u5bc4\u5b58\u5668\u4fe1\u606f\u5e76\u6253\u5370\u5230\u4e32\u53e3\u7ec8\u7aef\u4e0a\u65b9\u4fbf\u89c2\u5bdf\u3002\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4fee\u6539\u9ed8\u8ba4align_dma_buf_size",children:"\u4fee\u6539\u9ed8\u8ba4ALIGN_DMA_BUF_SIZE"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"R128-FreeRTOS/lichee/rtos-hal/include/hal/sunxi_hal_spi.h"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"#ifdef CONFIG_USE_100ASK_DISPLAY_SCREEN_240X240\n\t#define ALIGN_DMA_BUF_SIZE ((240*240*4) + 64)\n#elif CONFIG_USE_100ASK_DISPLAY_SCREEN_320X480\n\t#define ALIGN_DMA_BUF_SIZE ((320*480*4) + 64)\n#else\n\t#define ALIGN_DMA_BUF_SIZE (4096 + 64)\n#endif\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6ce8\u91casupport_dbi_if",children:"\u6ce8\u91caSUPPORT_DBI_IF"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"R128-FreeRTOS/lichee/rtos-hal/hal/source/spilcd/lcd_fb/lcd_fb_feature.h"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"#if defined (CONFIG_ARCH_SUN50IW11) || defined(CONFIG_ARCH_SUN8IW20) || defined(CONFIG_ARCH_SUN20IW1) \\\n        || defined(CONFIG_ARCH_SUN20IW2)\n//#define SUPPORT_DBI_IF\n#endif\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sys_configfex\u914d\u7f6e",children:"sys_config.fex\u914d\u7f6e"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"R128-FreeRTOS/board/r128s2/pro/configs/sys_config.fex"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'\n;----------------------------------------------------------------------------------\n;SPI controller configuration\n;----------------------------------------------------------------------------------\n;Please config spi in dts\n[spi1]\nspi1_used       = 1\nspi1_cs_number  = 1\nspi1_cs_bitmap  = 1\nspi1_cs0        = port:PA12<6><0><2><default>\nspi1_sclk       = port:PA13<6><0><2><default>\nspi1_mosi       = port:PA18<6><0><2><default>\nspi1_miso       = port:PA21<6><0><2><default>\nspi1_hold       = port:PA19<6><0><2><default>\nspi1_wp         = port:PA20<6><0><2><default>\n\n[pwm6]\npwm_used        = 1\npwm_positive    = port:PA26<4><0><2><default>\n\n;----------------------------------------------------------------------------------\n;lcd_fb0 configuration\n;----------------------------------------------------------------------------------\n\n[lcd_fb0]\nlcd_used            = 1\nlcd_model_name      = "spilcd"\nlcd_driver_name     = "lcd_100ask_spi"\nlcd_x               = 320\nlcd_y               = 480\nlcd_width           = 49\nlcd_height          = 73\nlcd_data_speed      = 65\nlcd_pwm_used        = 1\nlcd_pwm_ch          = 6\nlcd_pwm_freq        = 5000\nlcd_pwm_pol         = 0\nlcd_if              = 0\nlcd_pixel_fmt       = 11\nlcd_dbi_fmt         = 2\nlcd_dbi_clk_mode    = 1\nlcd_dbi_te          = 1\nfb_buffer_num       = 2\nlcd_dbi_if          = 4\nlcd_rgb_order       = 0\nlcd_fps             = 10\nlcd_spi_bus_num     = 1\nlcd_frm             = 2\nlcd_gamma_en        = 1\nlcd_backlight       = 100\n\nlcd_power_num       = 0\nlcd_gpio_regu_num   = 0\nlcd_bl_percent_num  = 0\n\n;;lcd_spi_dc_pin      = port:PA19<1><0><3><0>\nlcd_spi_dc_pin      = port:PA04<1><0><3><0>\n;lcd_gpio_0          = port:PA12<1><0><2><0>\n\n\n\n;----------------------------------------------------------------------------------\n;lcd0 configuration\n\n;lcd_if:               0:hv(sync+de); 1:8080; 2:ttl; 3:lvds; 4:dsi; 5:edp; 6:extend dsi\n;lcd_x:                lcd horizontal resolution\n;lcd_y:                lcd vertical resolution\n;lcd_width:            width of lcd in mm\n;lcd_height:           height of lcd in mm\n;lcd_dclk_freq:        in MHZ unit\n;lcd_pwm_freq:         in HZ unit\n;lcd_pwm_pol:          lcd backlight PWM polarity\n;lcd_pwm_max_limit     lcd backlight PWM max limit(<=255)\n;lcd_hbp:              hsync back porch\n;lcd_ht:               hsync total cycle\n;lcd_vbp:              vsync back porch\n;lcd_vt:               vysnc total cycle\n;lcd_hspw:             hsync plus width\n;lcd_vspw:             vysnc plus width\n;lcd_lvds_if:          0:single link;  1:dual link\n;lcd_lvds_colordepth:  0:8bit; 1:6bit\n;lcd_lvds_mode:        0:NS mode; 1:JEIDA mode\n;lcd_frm:              0:disable; 1:enable rgb666 dither; 2:enable rgb656 dither\n;lcd_io_phase:         0:noraml; 1:intert phase(0~3bit: vsync phase; 4~7bit:hsync phase;\n;                      8~11bit:dclk phase; 12~15bit:de phase)\n;lcd_gamma_en          lcd gamma correction enable\n;lcd_bright_curve_en   lcd bright curve correction enable\n;lcd_cmap_en           lcd color map function enable\n;deu_mode              0:smoll lcd screen; 1:large lcd screen(larger than 10inch)\n;lcdgamma4iep:         Smart Backlight parameter, lcd gamma vale * 10;\n;                      decrease it while lcd is not bright enough; increase while lcd is too bright\n;smart_color           90:normal lcd screen 65:retina lcd screen(9.7inch)\n;----------------------------------------------------------------------------------\n;[lcd0]\n;lcd_used            = 1\n;\n;lcd_driver_name     = "default_lcd"\n;lcd_backlight       = 150\n;lcd_if              = 0\n;lcd_x               = 800\n;lcd_y               = 480\n;lcd_width           = 150\n;lcd_height          = 94\n;lcd_rb_swap         = 0\n;lcd_dclk_freq       = 33\n;lcd_pwm_used        = 1\n;lcd_pwm_ch          = 6\n;lcd_pwm_freq        = 5000\n;lcd_pwm_pol         = 1\n;lcd_hbp             = 46\n;lcd_ht              = 1055\n;lcd_hspw            = 0\n;lcd_vbp             = 23\n;lcd_vt              = 525\n;lcd_vspw            = 0\n;lcd_lvds_if         = 0\n;lcd_lvds_colordepth = 1\n;lcd_lvds_mode       = 0\n;lcd_frm             = 0\n;lcd_io_phase        = 0x0000\n;lcd_gamma_en        = 0\n;lcd_bright_curve_en = 0\n;lcd_cmap_en         = 0\n;\n;deu_mode            = 0\n;lcdgamma4iep        = 22\n;smart_color         = 90\n;\n;;LCD_D2-LCD_D7\n;lcd_gpio_0               = port:PA00<8><0><3><0>\n;lcd_gpio_1               = port:PA01<8><0><3><0>\n;lcd_gpio_2               = port:PA02<8><0><3><0>\n;lcd_gpio_3               = port:PA03<8><0><3><0>\n;lcd_gpio_4               = port:PA04<8><0><3><0>\n;lcd_gpio_5               = port:PA05<8><0><3><0>\n;\n;;LCD_D10-LCD_D15\n;lcd_gpio_6               = port:PA11<8><0><3><0>\n;lcd_gpio_7               = port:PA10<8><0><3><0>\n;lcd_gpio_8               = port:PA08<8><0><3><0>\n;lcd_gpio_9               = port:PA07<8><0><3><0>\n;lcd_gpio_10              = port:PA06<8><0><3><0>\n;lcd_gpio_11              = port:PA09<8><0><3><0>\n;\n;;LCD_D18-LCD_D23\n;lcd_gpio_12              = port:PA12<8><0><3><0>\n;lcd_gpio_13              = port:PA13<8><0><3><0>\n;lcd_gpio_14              = port:PA14<8><0><3><0>\n;lcd_gpio_15              = port:PA15<8><0><3><0>\n;lcd_gpio_16              = port:PB03<8><0><3><0>\n;lcd_gpio_17              = port:PB02<8><0><3><0>\n;\n;;LCD_VSYNC, LCD_HSYNC, LCD_DCLK, LCD_DE\n;lcd_gpio_18              = port:PA18<8><0><3><0>\n;lcd_gpio_19              = port:PA19<8><0><3><0>\n;lcd_gpio_20              = port:PA20<8><0><3><0>\n;lcd_gpio_21              = port:PA21<8><0><3><0>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"lvgl\u914d\u7f6e",children:"lvgl\u914d\u7f6e"}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6539lv_confh",children:"\u4fee\u6539lv_conf.h"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"SDK/lichee/rtos-components/thirdparty/littlevgl-8/lv_examples/src/lv_conf.h"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"/*====================\n   COLOR SETTINGS\n *====================*/\n\n/*Color depth: 1 (1 byte per pixel), 8 (RGB332), 16 (RGB565), 32 (ARGB8888)*/\n#define LV_COLOR_DEPTH 16\n\n/*Swap the 2 bytes of RGB565 color. Useful if the display has an 8-bit interface (e.g. SPI)*/\n#define LV_COLOR_16_SWAP 1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6539lv_mainc",children:"\u4fee\u6539lv_main.c"}),"\n",(0,t.jsxs)(n.p,{children:["\u4fee\u6539\u6587\u4ef6\uff1a",(0,t.jsx)(n.code,{children:"SDK/lichee/rtos-components/thirdparty/littlevgl-8/lv_examples/src/lv_main.c"})]}),"\n",(0,t.jsx)(n.p,{children:"\u6dfb\u52a0\u5c4f\u5e55\u65cb\u8f6c\u5904\u7406\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:'    printf("sunxifb_get_sizes width:%d, height:%d, width * height * sizeof(lv_color_t):%d\\n", width, height, width * height * sizeof(lv_color_t));\n\n    /*Initialize and register a display driver*/\n    static lv_disp_drv_t disp_drv;\n    lv_disp_drv_init(&disp_drv);\n    disp_drv.draw_buf   = &disp_buf;\n    disp_drv.flush_cb   = sunxifb_flush;\n#if ((CONFIG_DISPLAY_SCREEN_100ASK_ROTATION == 0) || (CONFIG_DISPLAY_SCREEN_100ASK_ROTATION == 180))\n    disp_drv.hor_res    = width;\n    disp_drv.ver_res    = height;\n#elif ((CONFIG_DISPLAY_SCREEN_100ASK_ROTATION == 90) || (CONFIG_DISPLAY_SCREEN_100ASK_ROTATION == 270))\n    disp_drv.hor_res    = height;\n    disp_drv.ver_res    = width;\n#else\n    disp_drv.hor_res    = width;\n    disp_drv.ver_res    = height;\n#endif\n\n    disp_drv.rotated    = rotated;\n#ifndef USE_SUNXIFB_G2D_ROTATE\n    if (rotated != LV_DISP_ROT_NONE)\n        disp_drv.sw_rotate = 1;\n#endif\n    lv_disp_drv_register(&disp_drv);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u7ed3\u679c",children:"\u7ed3\u679c"}),"\n",(0,t.jsx)(n.p,{children:"\u4ee5\u4e0a\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u7f16\u8bd1\u6253\u5305\u70e7\u5f55\uff0c\u4e0a\u7535\u540e\u5c4f\u5e55\u80cc\u5149\u4eae\u8d77\uff0c\u5c4f\u5e55\u4e3a\u9ed1\u8272\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter9/image12.png",alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["\u5e76\u4e14\u53ef\u4ee5\u5728 LOG \u4e2d\u770b\u5230 ",(0,t.jsx)(n.code,{children:"[LCD_FB] lcd_fb_probe,line:103:"})," \u548c ",(0,t.jsx)(n.code,{children:"spi_clk_init()1609 [spi1] clk rate auto adjust to 48000000"})," SPI \u521d\u59cb\u5316\u7684 LOG\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter9/image13.png",alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["\u7136\u540e\u53ef\u4ee5\u7528 ",(0,t.jsx)(n.code,{children:"test_spilcd"})," \u6d4b\u8bd5\u5c4f\u5e55\uff0c\u65e5\u5fd7\u5982\u4e0b"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter9/image14.png",alt:""})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u547d\u4ee4\u4e4b\u540e\u5c4f\u5e55\u4f1a\u53d8\u4e3a\u9ec4\u8272\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["SPI \u5c4f\u5e55\u989c\u8272\u8bf4\u660e\uff1aSPI LCD \u663e\u793a\u9a71\u52a8 - SPI LCD \u989c\u8272\u76f8\u5173\u95ee\u9898\uff1a",(0,t.jsx)(n.a,{href:"https://aw-r128.100ask.net/zh/rtos/developer-guide/part1/chapter5.html#faq",children:"https://aw-r128.100ask.net/zh/rtos/developer-guide/part1/chapter5.html#faq"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter9/image15.png",alt:""})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"test_spilcd"})," \u4ee3\u7801\u4f4d\u4e8e\uff1a ",(0,t.jsx)(n.code,{children:"SDK/lichee/rtos-hal/hal/test/spilcd/test_spilcd.c"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6267\u884c ",(0,t.jsx)(n.strong,{children:"lv_examples"})," \u547d\u4ee4\u8fd0\u884cLVGL\u6d4b\u8bd5demo\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"lv_examples"})," \u4ee3\u7801\u4f4d\u4e8e\uff1a ",(0,t.jsx)(n.code,{children:"SDK/lichee/rtos-components/thirdparty/littlevgl-8/lv_examples/src/lv_main.c"})]})]})}function p(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},1151:(e,n,l)=>{l.d(n,{Z:()=>c,a:()=>s});var t=l(7294);const d={},i=t.createContext(d);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);