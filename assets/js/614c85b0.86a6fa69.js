"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1471],{8135:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>_,default:()=>s,frontMatter:()=>r,metadata:()=>u,toc:()=>c});var a=t(5893),p=t(1151);const r={sidebar_position:1},_="PMU \u7535\u6e90\u7ba1\u7406",u={id:"quick-start/part5/chapter1",title:"PMU \u7535\u6e90\u7ba1\u7406",description:"PMU \u529f\u80fd\u7b80\u4ecb",source:"@site/docs/quick-start/part5/chapter1.md",sourceDirName:"quick-start/part5",slug:"/quick-start/part5/chapter1",permalink:"/quick-start/part5/chapter1",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/R128-Docs/tree/main/docs/quick-start/part5/chapter1.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"boardquickstartSidebar",previous:{title:"\u5916\u8bbe\u6a21\u5757\u914d\u7f6e",permalink:"/category/\u5916\u8bbe\u6a21\u5757\u914d\u7f6e"},next:{title:"USB \u5916\u8bbe\u529f\u80fd\u914d\u7f6e",permalink:"/quick-start/part5/chapter2"}},i={},c=[{value:"PMU \u529f\u80fd\u7b80\u4ecb",id:"pmu-\u529f\u80fd\u7b80\u4ecb",level:2},{value:"PMU \u914d\u7f6e\u4ecb\u7ecd",id:"pmu-\u914d\u7f6e\u4ecb\u7ecd",level:2},{value:"<code>sys_config.fex</code> \u914d\u7f6e\u8bf4\u660e",id:"sys_configfex-\u914d\u7f6e\u8bf4\u660e",level:3},{value:"rtos menuconfig \u914d\u7f6e\u8bf4\u660e",id:"rtos-menuconfig-\u914d\u7f6e\u8bf4\u660e",level:3},{value:"PMU \u6e90\u7801\u7ed3\u6784",id:"pmu-\u6e90\u7801\u7ed3\u6784",level:3},{value:"PMU \u5e38\u7528\u529f\u80fd",id:"pmu-\u5e38\u7528\u529f\u80fd",level:2},{value:"\u9a71\u52a8\u521d\u59cb\u5316",id:"\u9a71\u52a8\u521d\u59cb\u5316",level:3},{value:"AXP \u63a5\u53e3\u4f7f\u7528",id:"axp-\u63a5\u53e3\u4f7f\u7528",level:3},{value:"\u7535\u6e90\u7ba1\u7406\u5e94\u7528healthd",id:"\u7535\u6e90\u7ba1\u7406\u5e94\u7528healthd",level:3},{value:"healthd \u7528\u6cd5",id:"healthd-\u7528\u6cd5",level:4},{value:"\u5f00\u542f\u5e94\u7528",id:"\u5f00\u542f\u5e94\u7528",level:5},{value:"\u83b7\u53d6\u7535\u6c60\u7535\u91cf",id:"\u83b7\u53d6\u7535\u6c60\u7535\u91cf",level:5},{value:"\u8bbe\u7f6e\u5145\u7535\u7535\u6d41",id:"\u8bbe\u7f6e\u5145\u7535\u7535\u6d41",level:5}];function m(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,p.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{id:"pmu-\u7535\u6e90\u7ba1\u7406",children:"PMU \u7535\u6e90\u7ba1\u7406"}),"\n",(0,a.jsx)(e.h2,{id:"pmu-\u529f\u80fd\u7b80\u4ecb",children:"PMU \u529f\u80fd\u7b80\u4ecb"}),"\n",(0,a.jsx)(e.p,{children:"\u76ee\u524d\u5df2\u652f\u6301\u7684PMU \u4e3a\uff1aAXP2585\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u8be5PMU \u4e3b\u8981\u7528\u4e8e\u7535\u6c60\u7ba1\u7406\u4ee5\u53ca\u5145\u7535\u7ba1\u7406\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u8bfb\u53d6\u7535\u6c60\u7535\u91cf\u3001\u7535\u6c60\u6e29\u5ea6\u3002"}),"\n",(0,a.jsx)(e.li,{children:"\u8bbe\u7f6e\u5145\u7535\u65f6\u7684\u5145\u7535\u7535\u6d41\uff0c\u622a\u6b62\u5145\u7535\u7535\u538b\u3001\u5145\u7535\u8d85\u65f6\u7b49\u3002"}),"\n",(0,a.jsx)(e.li,{children:"\u81ea\u52a8\u6839\u636e\u8fde\u63a5PC \u6216\u8005\u9002\u914d\u5668\u8bbe\u7f6eUSB \u8f93\u5165\u7684\u6700\u5927\u9650\u6d41\u3002"}),"\n",(0,a.jsx)(e.li,{children:"\u7535\u6c60\u6e29\u5ea6\u8fc7\u9ad8\u65f6\u81ea\u52a8\u89e6\u53d1\u505c\u5145\u3002"}),"\n",(0,a.jsx)(e.li,{children:"\u68c0\u6d4bUSB \u7ebf\u7684\u63a5\u5165\u548c\u62d4\u51fa\u3002"}),"\n",(0,a.jsx)(e.li,{children:"PMU \u82af\u7247\u8fc7\u6e29\u4fdd\u62a4\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"pmu-\u914d\u7f6e\u4ecb\u7ecd",children:"PMU \u914d\u7f6e\u4ecb\u7ecd"}),"\n",(0,a.jsxs)(e.h3,{id:"sys_configfex-\u914d\u7f6e\u8bf4\u660e",children:[(0,a.jsx)(e.code,{children:"sys_config.fex"})," \u914d\u7f6e\u8bf4\u660e"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ini",children:"[pmu]\npmu_irq_pin      = port:PA14<14><0><default><default>\npmu_irq_wakeup   = 2\npmu_hot_shutdown = 1\npmu_bat_unused = 0\npmu_usbad_vol = 4600\npmu_usbad_cur = 1500\npmu_usbpc_vol = 4600\npmu_usbpc_cur = 500\npmu_chg_ic_temp = 0\npmu_battery_rdc = 100\npmu_battery_cap = 3568\npmu_runtime_chgcur = 900\npmu_suspend_chgcur = 1200\npmu_shutdown_chgcur = 1200\npmu_init_chgvol = 4200\npmu_init_chg_pretime = 50\npmu_init_chg_csttime = 1200\npmu_chgled_type = 0\npmu_init_bc_en = 1\npmu_bat_temp_enable = 0\npmu_bat_charge_ltf = 2261\npmu_bat_charge_htf = 388\npmu_bat_shutdown_ltf = 3200\npmu_bat_shutdown_htf = 237\npmu_bat_para[0] = 0\npmu_bat_para[1] = 0\npmu_bat_para[2] = 0\npmu_bat_para[3] = 0\npmu_bat_para[4] = 0\npmu_bat_para[5] = 0\npmu_bat_para[6] = 1\npmu_bat_para[7] = 1\npmu_bat_para[8] = 2\npmu_bat_para[9] = 4\npmu_bat_para[10] = 5\npmu_bat_para[11] = 12\npmu_bat_para[12] = 19\npmu_bat_para[13] = 32\npmu_bat_para[14] = 41\npmu_bat_para[15] = 45\npmu_bat_para[16] = 48\npmu_bat_para[17] = 51\npmu_bat_para[18] = 54\npmu_bat_para[19] = 59\npmu_bat_para[20] = 63\npmu_bat_para[21] = 68\npmu_bat_para[22] = 71\npmu_bat_para[23] = 74\npmu_bat_para[24] = 78\npmu_bat_para[25] = 81\npmu_bat_para[26] = 82\npmu_bat_para[27] = 84\npmu_bat_para[28] = 88\npmu_bat_para[29] = 92\npmu_bat_para[30] = 96\npmu_bat_para[31] = 100\npmu_bat_temp_para[0] = 7466\npmu_bat_temp_para[1] = 4480\npmu_bat_temp_para[2] = 3518\npmu_bat_temp_para[3] = 2786\npmu_bat_temp_para[4] = 2223\npmu_bat_temp_para[5] = 1788\npmu_bat_temp_para[6] = 1448\npmu_bat_temp_para[7] = 969\npmu_bat_temp_para[8] = 664\npmu_bat_temp_para[9] = 466\npmu_bat_temp_para[10] = 393\npmu_bat_temp_para[11] = 333\npmu_bat_temp_para[12] = 283\npmu_bat_temp_para[13] = 242\npmu_bat_temp_para[14] = 179\npmu_bat_temp_para[15] = 134\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u914d\u7f6e\u542b\u4e49\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-c",children:"pmu_irq_pin\n\tAXP\u82af\u7247IRQ\u5f15\u811a\u8fde\u63a5\u7684IO\uff0c\u7528\u4e8e\u89e6\u53d1\u4e2d\u65ad\n\npmu_irq_wakeup\n\tPress irq wakeup or not when sleep or power down.\n    0: not wakeup\n    1: wakeup\n    \npmu_hot_shutdown\n    when PMU over temperature protect or not.\n    0: disable\n    1: enable\n\npmu_bat_unused\n    unused bat\n    0: disable\n    1: enable\n\npmu_usbpc_vol <u32>\n\tusb pc\u8f93\u5165\u7535\u538b\u9650\u5236\u503c\uff0c\u5355\u4f4d\u4e3amV\n\t\npmu_usbpc_cur <u32>\n\tusb pc\u8f93\u5165\u7535\u6d41\u9650\u5236\u503c\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_usbad_vol <u32>\n\tusb adaptor\u8f93\u5165\u7535\u538b\u9650\u5236\u503c(vimdpm)\uff0c\u5355\u4f4d\u4e3amV\n\t\npmu_usbad_cur <u32>\n\tusb adaptor\u8f93\u5165\u7535\u6d41\u9650\u5236\u503c\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_chg_ic_temp <u32>\n    1: TS current source always on\n    0: TS current source off\n    \npmu_battery_rdc <u32>\n\t\u7535\u6c60\u5185\u963b\uff0c\u5355\u4f4d\u4e3am\u03a9\n\t\npmu_battery_cap <u32>\n\t\u7535\u6c60\u5bb9\u91cf\uff0c\u5355\u4f4d\u4e3amAh\n\t\npmu_runtime_chgcur <u32>\n\t\u8fd0\u884c\u65f6constant\u5145\u7535\u7535\u6d41\u9650\u5236\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_suspend_chgcur <u32>\n\t\u4f11\u7720\u65f6constant\u5145\u7535\u7535\u6d41\u9650\u5236\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_shutdown_chgcur <u32>\n\t\u5173\u673a\u65f6constant\u5145\u7535\u7535\u6d41\u9650\u5236\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_terminal_chgcur <u32>\n\t\u622a\u6b62\u7535\u6d41\uff0c\u505c\u6b62\u5145\u7535\u7684\u6807\u5fd7\u4f4d\u4e4b\u4e00\uff0c\u5355\u4f4d\u4e3amA\n\t\npmu_init_chgvol <u32>\n\t\u7535\u6c60\u6ee1\u5145\u7535\u538b\uff0c\u5355\u4f4d\u4e3amV\n\t\npmu_init_chg_pretime <u32>\n\t\u5f53\u7535\u6c60\u7535\u538b\u4f4e\u4e8eREG 0x8C[1]\u65f6\uff0c\u5c5e\u4e8epre charge\u9636\u6bb5\u3002\n\t\u5982\u679c\u6b64\u9636\u6bb5\u65f6\u95f4\u8d85\u8fc7pmu_init_chg_pretime\uff0c\u89c6\u4e3a\u8d85\u65f6\uff0c\u505c\u6b62\u5145\u7535\u3002\n\t\npmu_init_chg_csttime <u32>\n\t\u5f53\u7535\u6c60\u7535\u538b\u9ad8\u4e8eREG 0x8C[1]\u4e14\u4f4e\u4e8e\u622a\u6b62\u7535\u538b(REG 0X8C[7:2])\u65f6\uff0c\u5c5e\u4e8e\u6052\u6d41\u5145\u7535\u9636\u6bb5\u3002\n\t\u5982\u679c\u6b64\u9636\u6bb5\u65f6\u95f4\u8d85\u8fc7pmu_init_chg_csttime\uff0c\u89c6\u4e3a\u8d85\u65f6\uff0c\u505c\u6b62\u5145\u7535\u3002\n\t\npmu_chgled_type <bool>\n    0: Enable CHGLED pin funciton\n    1: Disable CHGLED pin funciton\n    \npmu_init_bc_en <bool>\n    0: Enable BC1.2\n    1: Disable BC1.2\n        \npmu_bat_temp_enable <u32>\n\t\u8bbe\u7f6e\u7535\u6c60\u6e29\u5ea6\u68c0\u6d4b\u3001ntc\u662f\u5426\u4f7f\u80fd\n        \npmu_bat_charge_ltf <u32>\n    \u89e6\u53d1\u7535\u6c60\u4f4e\u6e29\u505c\u5145\u7684TS pin\u7535\u538b\u9608\u503c\uff0c\u5355\u4f4d\uff1amV\n    \u9ed8\u8ba4\uff1a1105mV\n    \u8303\u56f4\uff1a0\u20118160mV\n        \npmu_bat_charge_htf <u32>\n    \u89e6\u53d1\u7535\u6c60\u9ad8\u6e29\u505c\u5145\u7684TS pin\u7535\u538b\u9608\u503c\uff0c\u5355\u4f4d\uff1amV\n    \u9ed8\u8ba4\uff1a121mV\n    \u8303\u56f4\uff1a0\u2011510mV\n        \npmu_bat_shutdown_ltf <u32>\n\t\u975e\u5145\u7535\u6a21\u5f0f\u4e0b\uff0c\u89e6\u53d1\u7535\u6c60\u4f4e\u6e29\u4e2d\u65ad\u7684TS pin\u7535\u538b\u9608\u503c\uff0c\u5355\u4f4d\uff1amV\n\t\u9ed8\u8ba4\uff1a1381mV\n        \npmu_bat_shutdown_htf <u32>\n\t\u9ed8\u8ba4\uff1a89mV\n\t\u8303\u56f4\uff1a0\u2011510mV\n        \npmu_bat_para1 <u32>\npmu_bat_para2 <u32>\n...\npmu_bat_para32 <u32>\n\t\u7535\u6c60\u66f2\u7ebf\u53c2\u6570\n\t\u7535\u6c60\u53c2\u6570\u6839\u636e\u4f7f\u7528\u7684\u7535\u6c60\u4e0d\u540c\uff0c\u901a\u8fc7\u4eea\u5668\u6d4b\u91cf\u51fa\u6765\n        \npmu_bat_temp_para1 <u32>\n\t\u7535\u6c60\u5305\u201125\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para2 <u32>\n\t\u7535\u6c60\u5305\u201115\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para3 <u32>\n\t\u7535\u6c60\u5305\u201110\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para4 <u32>\n\t\u7535\u6c60\u5305\u20115\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para5 <u32>\n\t\u7535\u6c60\u53050\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para6 <u32>\n\t\u7535\u6c60\u53055\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para7 <u32>\n\t\u7535\u6c60\u530510\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para8 <u32>\n\t\u7535\u6c60\u530520\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para9 <u32>\n\t\u7535\u6c60\u530530\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para10 <u32>\n\t\u7535\u6c60\u530540\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para11 <u32>\n\t\u7535\u6c60\u530545\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para12 <u32>\n\t\u7535\u6c60\u530550\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para13 <u32>\n\t\u7535\u6c60\u530555\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para14 <u32>\n\t\u7535\u6c60\u530560\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para15 <u32>\n\t\u7535\u6c60\u530570\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n        \npmu_bat_temp_para16 <u32>\n\t\u7535\u6c60\u530580\u5ea6\u5bf9\u5e94\u7684TS pin\u7535\u538b\uff0c\u5355\u4f4d\uff1amV\n\n\u4e0d\u540c\u7535\u6c60\u5305\u7684\u6e29\u654f\u7535\u963b\u7279\u6027\u4e0d\u4e00\u6837\uff0c\u6839\u636e\u7535\u6c60\u5305\u7684TS\u6e29\u654f\u7535\u963b\u624b\u518c\uff0c\u627e\u5230pmu_bat_temp_para[1\u201116]\u5bf9\u5e94\u6e29\u5ea6\u70b9\u7684\u7535\u963b\u963b\u503c\uff0c\u5c06\u963b\u503c\u9664\u4ee520\u5f97\u5230\u7684\u7535\u538b\u6570\u503c\uff08\u5355\u4f4d\uff1amV\uff09\uff0c\u5c06\u7535\u538b\u6570\u503c\u586b\u8fdbpmu_bat_temp_para[1\u201116]\u7684\u8282\u70b9\u4e2d\u5373\u53ef\n"})}),"\n",(0,a.jsx)(e.h3,{id:"rtos-menuconfig-\u914d\u7f6e\u8bf4\u660e",children:"rtos menuconfig \u914d\u7f6e\u8bf4\u660e"}),"\n",(0,a.jsx)(e.p,{children:"AXP \u662f\u4f9d\u8d56\u4e8eI2C \u8fdb\u884c\u901a\u8fc7\u7684\uff0c\u6240\u4ee5\u9996\u5148\u5c31\u9700\u8981\u786e\u8ba4I2C \u9a71\u52a8\u662f\u5df2\u7ecf\u88ab\u9009\u4e0a\u7684\u3002"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u4f7f\u80fdI2C \u9a71\u52a8"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u2011> Drivers Options\n    \u2011> soc related device drivers\n        \u2011> TWI Devices\n            [*] enable twi driver\n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u4f7f\u80fdPMU \u9a71\u52a8"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u2011> Drivers Options\n\t\u2011> soc related device drivers\n\t\t[*] POWER Devices\n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"\u9009\u62e9AXP2585"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u2011> Drivers Options\n\t\u2011> soc related device drivers\n\t\t\u2011> POWER Devices\n\t\t\t[*] enable power driver\n"})}),"\n",(0,a.jsx)(e.h3,{id:"pmu-\u6e90\u7801\u7ed3\u6784",children:"PMU \u6e90\u7801\u7ed3\u6784"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"lichee/rtos\u2011hal/hal/source/power/\n\u251c\u2500\u2500 axp2585.c\n\u251c\u2500\u2500 axp2585.h\n\u251c\u2500\u2500 axp.c\n\u251c\u2500\u2500 axp_twi.c\n\u251c\u2500\u2500 ffs.h\n\u251c\u2500\u2500 Kconfig\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 sun20iw2p1\n\u2502 \u251c\u2500\u2500 core.c\n\u2514\u2500\u2500 type.h\n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"axp2585.c: AXP2585 \u9a71\u52a8\u3002"}),"\n",(0,a.jsx)(e.li,{children:"axp.c: AXP \u6846\u67b6API \u63a5\u53e3\u3002"}),"\n",(0,a.jsx)(e.li,{children:"axp_twi.c: \u521d\u59cb\u5316\u4ee5\u53caI2C \u63a5\u53e3\u3002"}),"\n",(0,a.jsx)(e.li,{children:"sun20iw2p1: R128 \u914d\u7f6e\u4ee5\u53ca\u603b\u521d\u59cb\u5316\u63a5\u53e3\u3002"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"pmu-\u5e38\u7528\u529f\u80fd",children:"PMU \u5e38\u7528\u529f\u80fd"}),"\n",(0,a.jsx)(e.h3,{id:"\u9a71\u52a8\u521d\u59cb\u5316",children:"\u9a71\u52a8\u521d\u59cb\u5316"}),"\n",(0,a.jsxs)(e.p,{children:["\u82e5 ",(0,a.jsx)(e.code,{children:"mrtos_menuconfig"})," \u4e2d\u5df2\u7ecf\u9009\u4e0a\u4e86\u8be5\u8bbe\u5907\uff0c\u5e76\u4e14 ",(0,a.jsx)(e.code,{children:"sys_config.fex"}),"  \u4e2d\u4e5f\u914d\u7f6e\u5b8c\u6210\uff0c\u90a3\u4e48\u7cfb\u7edf\u52a0\u8f7d\u65f6\u5c31\u5df2\u7ecf\u81ea\u52a8\u5c06 PMU \u9a71\u52a8\u52a0\u8f7d\u5b8c\u6210\uff0c\u65e0\u9700\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u518d\u8fdb\u884c\u521d\u59cb\u5316\u3002"]}),"\n",(0,a.jsx)(e.p,{children:"\u521d\u59cb\u5316\u6210\u529f\u7684 log \u53ef\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"axp2585 chip version C !\naxp2585 chip id detect 0x49 !\ncurrent limit not set: usb adapter type\naxp2585 init finished !\n"})}),"\n",(0,a.jsxs)(e.p,{children:["\u82e5\u662f\u6ca1\u6709\u6253\u5370\u4e0a\u8ff0\u7684\u6253\u5370 log \u4fe1\u606f\uff0c\u53ef\u80fd\u662f PMU \u9a71\u52a8\u52a0\u8f7d\u5931\u8d25\u4e86\uff0c\u53ef\u4ee5\u4ece ",(0,a.jsx)(e.code,{children:"sys_config.fex"})," \u914d\u7f6e\u4e2d\u786e\u8ba4\u662f\u5426\u6709\u914d\u7f6e\u6f0f\u914d\u7f6e\u4e86\uff0c\u6216\u8005\u662f\u4ece I2C \u65b9\u5411\u53bb\u6392\u67e5\uff0c\u786e\u8ba4I2C \u901a\u4fe1\u662f\u6b63\u5e38\u7684\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"axp-\u63a5\u53e3\u4f7f\u7528",children:"AXP \u63a5\u53e3\u4f7f\u7528"}),"\n",(0,a.jsxs)(e.p,{children:["PMU \u9a71\u52a8\u6709\u4e00\u4e2a\u7edf\u4e00\u7684\u9a71\u52a8\u5165\u53e3\uff0c\u521d\u59cb\u5316\u548c\u4e00\u4e9b\u529f\u80fd\u63a5\u53e3\uff0c\u90fd\u662f\u7531AXP \u9a71\u52a8\u7edf\u4e00\u7ba1\u7406\u7684\u3002\u5177\u4f53\u8bf7\u53c2\u7167 ",(0,a.jsx)(e.a,{href:"/sdk_module/pmu",children:"PMU"}),"\u7ae0\u8282\u7684\u8bf4\u660e\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"\u7535\u6e90\u7ba1\u7406\u5e94\u7528healthd",children:"\u7535\u6e90\u7ba1\u7406\u5e94\u7528healthd"}),"\n",(0,a.jsx)(e.p,{children:"healthd \u662f\u4e00\u4e2a\u7535\u6e90\u7ba1\u7406\u7684\u5e94\u7528\uff0c\u4e3b\u8981\u529f\u80fd\u4e3a\uff1a\u68c0\u6d4b\u7535\u6c60\u7535\u91cf\u3001\u8bbe\u7f6e\u5145\u7535\u7535\u6d41\u3001\u7535\u91cf\u53d8\u4f4e\u8b66\u62a5\u3001\u7535\u538b\u8fc7\u4f4e\u5173\u673a\u3001\u7535\u6c60\u6e29\u5ea6\u8fc7\u9ad8\u8fc7\u5ea6\u4fdd\u62a4\u7b49\u7b49\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u5e94\u7528\u914d\u7f6e\u65b9\u6cd5\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u2011> System components\n\t\u2011> aw components\n\t\t[*] healthd for axp\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5e94\u7528\u6e90\u7801\u8def\u5f84\u4e3a\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"lichee/rtos/components/aw/healthd/healthd.c\n"})}),"\n",(0,a.jsx)(e.h4,{id:"healthd-\u7528\u6cd5",children:"healthd \u7528\u6cd5"}),"\n",(0,a.jsx)(e.h5,{id:"\u5f00\u542f\u5e94\u7528",children:"\u5f00\u542f\u5e94\u7528"}),"\n",(0,a.jsx)(e.p,{children:"\u5e94\u7528\u5728\u9ed8\u8ba4SDK \u4e2d\u5e76\u4e0d\u4f1a\u542f\u52a8\uff0c\u5728\u7cfb\u7edf\u542f\u52a8\u4e4b\u540e\uff0c\u9700\u8981\u624b\u52a8\u8f93\u5165\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"healthd\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u7136\u540e\u5c31\u5f00\u542f\u4e86\u7535\u6c60\u7ba1\u7406\u5e94\u7528\u4e86\u3002\u5f00\u542f\u4e86\u4e4b\u540e\uff0c\u5c31\u4f1a\u542f\u52a8\u4e86\u7535\u91cf\u53d8\u4f4e\u8b66\u62a5\u3001\u7535\u538b\u8fc7\u4f4e\u5173\u673a\u3001\u7535\u6c60\u6e29\u5ea6\u8fc7\u9ad8\u8fc7\u5ea6\u4fdd\u62a4\u7684\u529f\u80fd\u3002"}),"\n",(0,a.jsx)(e.h5,{id:"\u83b7\u53d6\u7535\u6c60\u7535\u91cf",children:"\u83b7\u53d6\u7535\u6c60\u7535\u91cf"}),"\n",(0,a.jsx)(e.p,{children:"\u8fd0\u884c\u547d\u4ee4\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"healthd_get_capacity\n"})}),"\n",(0,a.jsx)(e.h5,{id:"\u8bbe\u7f6e\u5145\u7535\u7535\u6d41",children:"\u8bbe\u7f6e\u5145\u7535\u7535\u6d41"}),"\n",(0,a.jsx)(e.p,{children:"\u8fd0\u884c\u547d\u4ee4\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"healthd_set_chgcur 1500\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u547d\u4ee4\u7684\u540e\u7f00\u4e3a\u5145\u7535\u7535\u6d41\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3amA\uff0c\u8303\u56f4\u4e3a0~3072mA\u3002"})]})}function s(n={}){const{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(m,{...n})}):m(n)}},1151:(n,e,t)=>{t.d(e,{Z:()=>u,a:()=>_});var a=t(7294);const p={},r=a.createContext(p);function _(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function u(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(p):n.components||p:_(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);