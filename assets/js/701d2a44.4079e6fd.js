"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[630],{6363:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>o,frontMatter:()=>s,metadata:()=>r,toc:()=>t});var l=i(5893),d=i(1151);const s={},c="\u97f3\u9891\u6846\u67b6",r={id:"developer-guide/part1/chapter3",title:"\u97f3\u9891\u6846\u67b6",description:"\u7b80\u4ecb",source:"@site/docs/developer-guide/part1/chapter3.md",sourceDirName:"developer-guide/part1",slug:"/developer-guide/part1/chapter3",permalink:"/developer-guide/part1/chapter3",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/R128-Docs/tree/main/docs/developer-guide/part1/chapter3.md",tags:[],version:"current",frontMatter:{},sidebar:"classpartoneSidebar",previous:{title:"RTOS \u591a\u5a92\u4f53\u7f16\u7801",permalink:"/developer-guide/part1/chapter2"},next:{title:"\u663e\u793a\u4e0e\u5c4f\u5e55\u9a71\u52a8",permalink:"/developer-guide/part1/chapter4"}},a={},t=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u6a21\u5757\u4ecb\u7ecd",id:"\u6a21\u5757\u4ecb\u7ecd",level:2},{value:"\u9a71\u52a8\u6846\u67b6",id:"\u9a71\u52a8\u6846\u67b6",level:3},{value:"\u97f3\u9891\u65f6\u949f\u6811",id:"\u97f3\u9891\u65f6\u949f\u6811",level:3},{value:"AudioCodec",id:"audiocodec",level:2},{value:"\u9a71\u52a8\u7279\u6027",id:"\u9a71\u52a8\u7279\u6027",level:3},{value:"\u97f3\u9891\u901a\u8def",id:"\u97f3\u9891\u901a\u8def",level:3},{value:"\u9a71\u52a8\u914d\u7f6e",id:"\u9a71\u52a8\u914d\u7f6e",level:3},{value:"\u58f0\u5361\u63a7\u4ef6",id:"\u58f0\u5361\u63a7\u4ef6",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:3},{value:"\u5f55\u97f3",id:"\u5f55\u97f3",level:4},{value:"\u64ad\u653e",id:"\u64ad\u653e",level:4},{value:"I2S/PCM",id:"i2spcm",level:2},{value:"\u9a71\u52a8\u7279\u6027",id:"\u9a71\u52a8\u7279\u6027-1",level:3},{value:"\u97f3\u9891\u901a\u8def",id:"\u97f3\u9891\u901a\u8def-1",level:3},{value:"\u5f15\u811a\u6a21\u5f0f\u914d\u7f6e",id:"\u5f15\u811a\u6a21\u5f0f\u914d\u7f6e",level:3},{value:"\u9a71\u52a8\u914d\u7f6e",id:"\u9a71\u52a8\u914d\u7f6e-1",level:3},{value:"\u58f0\u5361\u63a7\u4ef6",id:"\u58f0\u5361\u63a7\u4ef6-1",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5-1",level:3},{value:"\u5f55\u97f3",id:"\u5f55\u97f3-1",level:4},{value:"\u64ad\u653e",id:"\u64ad\u653e-1",level:4},{value:"snddaudio0 \u58f0\u5361\u5185\u90e8\u56de\u73af\uff0c\u64ad\u5f55\u97f3\u9891\u683c\u5f0f\u9700\u4fdd\u6301\u4e00\u81f4",id:"snddaudio0-\u58f0\u5361\u5185\u90e8\u56de\u73af\u64ad\u5f55\u97f3\u9891\u683c\u5f0f\u9700\u4fdd\u6301\u4e00\u81f4",level:4},{value:"S/PDIF",id:"spdif",level:2},{value:"\u9a71\u52a8\u7279\u6027",id:"\u9a71\u52a8\u7279\u6027-2",level:3},{value:"\u97f3\u9891\u901a\u8def",id:"\u97f3\u9891\u901a\u8def-2",level:3},{value:"\u9a71\u52a8\u914d\u7f6e",id:"\u9a71\u52a8\u914d\u7f6e-2",level:3},{value:"\u58f0\u5361\u63a7\u4ef6",id:"\u58f0\u5361\u63a7\u4ef6-2",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5-2",level:3},{value:"\u64ad\u653e",id:"\u64ad\u653e-2",level:4},{value:"DMIC",id:"dmic",level:2},{value:"\u9a71\u52a8\u7279\u6027",id:"\u9a71\u52a8\u7279\u6027-3",level:3},{value:"\u97f3\u9891\u901a\u8def",id:"\u97f3\u9891\u901a\u8def-3",level:3},{value:"\u9a71\u52a8\u914d\u7f6e",id:"\u9a71\u52a8\u914d\u7f6e-3",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5-3",level:3},{value:"MAD",id:"mad",level:2},{value:"\u9a71\u52a8\u7279\u6027",id:"\u9a71\u52a8\u7279\u6027-4",level:3},{value:"\u97f3\u9891\u901a\u8def",id:"\u97f3\u9891\u901a\u8def-4",level:2},{value:"\u9a71\u52a8\u914d\u7f6e",id:"\u9a71\u52a8\u914d\u7f6e-4",level:3},{value:"\u58f0\u5361\u63a7\u4ef6",id:"\u58f0\u5361\u63a7\u4ef6-3",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5-4",level:3},{value:"\u8bed\u97f3\u5524\u9192",id:"\u8bed\u97f3\u5524\u9192",level:4},{value:"\u8bed\u97f3\u5524\u9192\u80fd\u91cf\u5524\u9192\u9608\u503c\u53c2\u6570",id:"\u8bed\u97f3\u5524\u9192\u80fd\u91cf\u5524\u9192\u9608\u503c\u53c2\u6570",level:4},{value:"\u6a21\u5757\u63a5\u53e3\u8bf4\u660e",id:"\u6a21\u5757\u63a5\u53e3\u8bf4\u660e",level:2},{value:"\u6e90\u6587\u4ef6\u5217\u8868",id:"\u6e90\u6587\u4ef6\u5217\u8868",level:3},{value:"\u8f6f\u4ef6\u6846\u56fe",id:"\u8f6f\u4ef6\u6846\u56fe",level:2},{value:"\u5173\u952e\u6570\u636e\u7ed3\u6784",id:"\u5173\u952e\u6570\u636e\u7ed3\u6784",level:3},{value:"pcm \u6570\u636e\u7c7b\u7ed3\u6784\u4f53",id:"pcm-\u6570\u636e\u7c7b\u7ed3\u6784\u4f53",level:4},{value:"codec \u7c7b\u7ed3\u6784\u4f53",id:"codec-\u7c7b\u7ed3\u6784\u4f53",level:3},{value:"AudioCodec",id:"audiocodec-1",level:4},{value:"\u8f6f\u4ef6\u91cd\u8981\u63a5\u53e3",id:"\u8f6f\u4ef6\u91cd\u8981\u63a5\u53e3",level:2},{value:"pcm \u76f8\u5173\u63a5\u53e3",id:"pcm-\u76f8\u5173\u63a5\u53e3",level:3},{value:"\u521b\u5efa pcm \u8bbe\u5907",id:"\u521b\u5efa-pcm-\u8bbe\u5907",level:4},{value:"\u91ca\u653e pcm \u8bbe\u5907",id:"\u91ca\u653e-pcm-\u8bbe\u5907",level:4},{value:"\u5f00\u542f pcm \u8bbe\u5907",id:"\u5f00\u542f-pcm-\u8bbe\u5907",level:4},{value:"\u8bbe\u7f6e pcm \u8bbe\u5907\u53c2\u6570",id:"\u8bbe\u7f6e-pcm-\u8bbe\u5907\u53c2\u6570",level:4},{value:"\u89e6\u53d1 pcm \u8bbe\u5907\u8fd0\u884c",id:"\u89e6\u53d1-pcm-\u8bbe\u5907\u8fd0\u884c",level:4},{value:"\u83b7\u53d6 pcm \u8bbe\u5907\u5e27\u70b9",id:"\u83b7\u53d6-pcm-\u8bbe\u5907\u5e27\u70b9",level:4},{value:"Platform \u5c42\u63a5\u53e3",id:"platform-\u5c42\u63a5\u53e3",level:3},{value:"AudioCodec\u63a5\u53e3",id:"audiocodec\u63a5\u53e3",level:4},{value:"\u521d\u59cb\u5316 DMA \u53c2\u6570",id:"\u521d\u59cb\u5316-dma-\u53c2\u6570",level:5},{value:"\u66f4\u65b0\u8bbe\u7f6e DMA \u53c2\u6570",id:"\u66f4\u65b0\u8bbe\u7f6e-dma-\u53c2\u6570",level:5},{value:"I2S/PCM\u63a5\u53e3",id:"i2spcm\u63a5\u53e3",level:4},{value:"I2S/PCM \u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09",id:"i2spcm-\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f",level:5},{value:"I2S/PCM \u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u521d\u59cb\u5316\u6a21\u5757\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09",id:"i2spcm-\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u521d\u59cb\u5316\u6a21\u5757\u6062\u590d\u5bc4\u5b58\u5668",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757BCLK \u5206\u9891\u7cfb\u6570",id:"\u8bbe\u7f6e\u6a21\u5757bclk-\u5206\u9891\u7cfb\u6570",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f",id:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757I2S \u683c\u5f0f",id:"\u8bbe\u7f6e\u6a21\u5757i2s-\u683c\u5f0f",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)",id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",level:5},{value:"\u6e05\u9664\u6a21\u5757FIFO",id:"\u6e05\u9664\u6a21\u5757fifo",level:5},{value:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5173\u95ed\u5de5\u4f5c\u8d44\u6e90(\u7ec4\u4ef6\u529f\u80fd\u7b49)",id:"\u8bbe\u7f6e\u6a21\u5757\u5173\u95ed\u5de5\u4f5c\u8d44\u6e90\u7ec4\u4ef6\u529f\u80fd\u7b49",level:5},{value:"SPDIF",id:"spdif-1",level:4},{value:"\u521d\u59cb\u5316CPU DAI (DMA\u3001\u6a21\u5757\u5bc4\u5b58\u5668)",id:"\u521d\u59cb\u5316cpu-dai-dma\u6a21\u5757\u5bc4\u5b58\u5668",level:5},{value:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09",id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f",level:5},{value:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u521d\u59cb\u5316\u6a21\u5757\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09",id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u521d\u59cb\u5316\u6a21\u5757\u6062\u590d\u5bc4\u5b58\u5668",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5206\u9891\u7cfb\u6570",id:"\u8bbe\u7f6e\u6a21\u5757\u5206\u9891\u7cfb\u6570",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f",id:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f-1",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)",id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49-1",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-1",level:5},{value:"\u6e05\u9664\u6a21\u5757FIFO\uff0c\u6e05\u9664\u4e2d\u65ad",id:"\u6e05\u9664\u6a21\u5757fifo\u6e05\u9664\u4e2d\u65ad",level:5},{value:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-1",level:5},{value:"DMIC",id:"dmic-1",level:4},{value:"\u521d\u59cb\u5316CPU DAI (DMA\u3001\u6a21\u5757\u5bc4\u5b58\u5668)",id:"\u521d\u59cb\u5316cpu-dai-dma\u6a21\u5757\u5bc4\u5b58\u5668-1",level:5},{value:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09",id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f-1",level:5},{value:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09",id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u6062\u590d\u5bc4\u5b58\u5668",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757 PLL CLK",id:"\u8bbe\u7f6e\u6a21\u5757-pll-clk",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)",id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49-2",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-2",level:5},{value:"\u6e05\u9664\u6a21\u5757 FIFO\uff0c\u6e05\u9664\u4e2d\u65ad",id:"\u6e05\u9664\u6a21\u5757-fifo\u6e05\u9664\u4e2d\u65ad",level:5},{value:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-2",level:5},{value:"Codec \u5c42",id:"codec-\u5c42",level:3},{value:"AudioCodec(ADC/DAC)",id:"audiocodecadcdac",level:4},{value:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09",id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f-2",level:5},{value:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09",id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u6062\u590d\u5bc4\u5b58\u5668-1",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u65f6\u949f",id:"\u8bbe\u7f6e\u6a21\u5757\u65f6\u949f",level:5},{value:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-3",level:5},{value:"\u6e05\u9664\u6a21\u5757FIFO\uff0c\u6e05\u9664\u4e2d\u65ad",id:"\u6e05\u9664\u6a21\u5757fifo\u6e05\u9664\u4e2d\u65ad-1",level:5},{value:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-3",level:5},{value:"\u8f6f\u4ef6\u8c03\u8bd5\u63a5\u53e3",id:"\u8f6f\u4ef6\u8c03\u8bd5\u63a5\u53e3",level:3},{value:"\u6a21\u5757\u4f7f\u7528",id:"\u6a21\u5757\u4f7f\u7528",level:2},{value:"menuconfig \u914d\u7f6e",id:"menuconfig-\u914d\u7f6e",level:3},{value:"\u58f0\u5361\u8bbe\u5907\u67e5\u770b",id:"\u58f0\u5361\u8bbe\u5907\u67e5\u770b",level:3},{value:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e",id:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e",level:3},{value:"\u58f0\u5361\u63a7\u4ef6",id:"\u58f0\u5361\u63a7\u4ef6-4",level:3},{value:"alsa-utils \u5de5\u5177",id:"alsa-utils-\u5de5\u5177",level:4},{value:"APLAY",id:"aplay",level:5},{value:"ARECORD",id:"arecord",level:5},{value:"AMIXER",id:"amixer",level:5},{value:"aw\u2011alsa\u2011lib \u63d2\u4ef6\u914d\u7f6e",id:"awalsalib-\u63d2\u4ef6\u914d\u7f6e",level:3},{value:"hw \u63d2\u4ef6",id:"hw-\u63d2\u4ef6",level:4},{value:"dmix \u63d2\u4ef6",id:"dmix-\u63d2\u4ef6",level:4},{value:"dsnoop \u63d2\u4ef6",id:"dsnoop-\u63d2\u4ef6",level:4},{value:"softvol \u63d2\u4ef6",id:"softvol-\u63d2\u4ef6",level:4},{value:"asym \u63d2\u4ef6",id:"asym-\u63d2\u4ef6",level:4},{value:"route \u63d2\u4ef6",id:"route-\u63d2\u4ef6",level:4},{value:"rate \u63d2\u4ef6",id:"rate-\u63d2\u4ef6",level:4},{value:"file \u63d2\u4ef6",id:"file-\u63d2\u4ef6",level:4},{value:"multi \u63d2\u4ef6",id:"multi-\u63d2\u4ef6",level:4},{value:"plug \u63d2\u4ef6",id:"plug-\u63d2\u4ef6",level:4},{value:"I2S \u5916\u6302CODEC",id:"i2s-\u5916\u6302codec",level:3},{value:"\u786c\u4ef6\u8fde\u63a5",id:"\u786c\u4ef6\u8fde\u63a5",level:4},{value:"\u83b7\u53d6\u5916\u90e8 CODEC I2S \u534f\u8bae\u683c\u5f0f",id:"\u83b7\u53d6\u5916\u90e8-codec-i2s-\u534f\u8bae\u683c\u5f0f",level:4},{value:"AudioSystem",id:"audiosystem",level:2},{value:"AudioSystem \u8f6f\u4ef6\u6846\u67b6",id:"audiosystem-\u8f6f\u4ef6\u6846\u67b6",level:3},{value:"\u8f6f\u4ef6\u914d\u7f6e",id:"\u8f6f\u4ef6\u914d\u7f6e",level:3},{value:"\u53c2\u6570\u914d\u7f6e",id:"\u53c2\u6570\u914d\u7f6e",level:3},{value:"\u97f3\u9891\u63a5\u53e3",id:"\u97f3\u9891\u63a5\u53e3",level:3},{value:"AudioTrack \u63a5\u53e3",id:"audiotrack-\u63a5\u53e3",level:4},{value:"\u521b\u5efa AUDIOTRACK",id:"\u521b\u5efa-audiotrack",level:5},{value:"\u521b\u5efa\u6307\u5b9a\u97f3\u9891\u6d41\u7c7b\u578b\u7684 AUDIOTRACK",id:"\u521b\u5efa\u6307\u5b9a\u97f3\u9891\u6d41\u7c7b\u578b\u7684-audiotrack",level:5},{value:"\u8bbe\u7f6e AUDIOTRACK \u76f8\u5173\u97f3\u9891\u53c2\u6570",id:"\u8bbe\u7f6e-audiotrack-\u76f8\u5173\u97f3\u9891\u53c2\u6570",level:5},{value:"\u5199\u5165 PCM \u6570\u636e",id:"\u5199\u5165-pcm-\u6570\u636e",level:5},{value:"\u5f00\u542f AUDIOTRACK",id:"\u5f00\u542f-audiotrack",level:5},{value:"\u505c\u6b62 AUDIOTRACK",id:"\u505c\u6b62-audiotrack",level:5},{value:"\u83b7\u53d6\u5f53\u524d AUDIOTRACK \u4ecd\u6709\u591a\u5c11\u6570\u636e\u672a\u9001\u5165\u58f0\u5361",id:"\u83b7\u53d6\u5f53\u524d-audiotrack-\u4ecd\u6709\u591a\u5c11\u6570\u636e\u672a\u9001\u5165\u58f0\u5361",level:5},{value:"\u9500\u6bc1 AUDIOTRACK",id:"\u9500\u6bc1-audiotrack",level:5},{value:"AudioRecord \u63a5\u53e3",id:"audiorecord-\u63a5\u53e3",level:4},{value:"\u521b\u5efa AUDIORECORD",id:"\u521b\u5efa-audiorecord",level:5},{value:"\u8bbe\u7f6e AUDIORECORD \u76f8\u5173\u97f3\u9891\u53c2\u6570",id:"\u8bbe\u7f6e-audiorecord-\u76f8\u5173\u97f3\u9891\u53c2\u6570",level:5},{value:"\u83b7\u53d6 PCM \u6570\u636e",id:"\u83b7\u53d6-pcm-\u6570\u636e",level:5},{value:"\u5f00\u542f AUDIORECORD",id:"\u5f00\u542f-audiorecord",level:5},{value:"\u505c\u6b62 AUDIORECORD",id:"\u505c\u6b62-audiorecord",level:5},{value:"\u9500\u6bc1 AUDIORECORD",id:"\u9500\u6bc1-audiorecord",level:5},{value:"AudioSystem \u5176\u4ed6\u63a5\u53e3",id:"audiosystem-\u5176\u4ed6\u63a5\u53e3",level:4},{value:"AUDIOSYSTEM \u521d\u59cb\u5316",id:"audiosystem-\u521d\u59cb\u5316",level:5},{value:"\u8f6f\u4ef6\u97f3\u91cf\u63a7\u5236\u63a5\u53e3",id:"\u8f6f\u4ef6\u97f3\u91cf\u63a7\u5236\u63a5\u53e3",level:5},{value:"AudioSystem \u63a5\u53e3\u793a\u4f8b",id:"audiosystem-\u63a5\u53e3\u793a\u4f8b",level:4},{value:"AudioSystem \u6d4b\u8bd5\u5de5\u5177",id:"audiosystem-\u6d4b\u8bd5\u5de5\u5177",level:3},{value:"ahw_list \u547d\u4ee4",id:"ahw_list-\u547d\u4ee4",level:4},{value:"as_test \u547d\u4ee4",id:"as_test-\u547d\u4ee4",level:4},{value:"as_volume \u547d\u4ee4",id:"as_volume-\u547d\u4ee4",level:4},{value:"as_debug \u547d\u4ee4",id:"as_debug-\u547d\u4ee4",level:4},{value:"AW \u97f3\u6548",id:"aw-\u97f3\u6548",level:2},{value:"\u7f16\u8bd1 AudioSystem \u7684 AW EQ",id:"\u7f16\u8bd1-audiosystem-\u7684-aw-eq",level:3},{value:"\u4f7f\u7528\u8f6f\u4ef6 AW EQ",id:"\u4f7f\u7528\u8f6f\u4ef6-aw-eq",level:3},{value:"\u4f7f\u7528 AudioSystem \u7684\u786c\u4ef6 HW EQ \u529f\u80fd",id:"\u4f7f\u7528-audiosystem-\u7684\u786c\u4ef6-hw-eq-\u529f\u80fd",level:3},{value:"\u7f16\u8bd1 AudioSystem \u7684 HW EQ",id:"\u7f16\u8bd1-audiosystem-\u7684-hw-eq",level:4},{value:"\u4f7f\u7528\u79bb\u7ebf HW EQ",id:"\u4f7f\u7528\u79bb\u7ebf-hw-eq",level:4},{value:"\u5e38\u7528\u8c03\u8bd5\u65b9\u6cd5",id:"\u5e38\u7528\u8c03\u8bd5\u65b9\u6cd5",level:2},{value:"dump \u5bc4\u5b58\u5668",id:"dump-\u5bc4\u5b58\u5668",level:3},{value:"\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",id:"\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",level:3},{value:"PC \u7aef\u901a\u8fc7\u811a\u672c\uff0c\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",id:"pc-\u7aef\u901a\u8fc7\u811a\u672c\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",level:4},{value:"\u5c0f\u673a\u7aef\u4f7f\u7528\u65b9\u6cd5",id:"\u5c0f\u673a\u7aef\u4f7f\u7528\u65b9\u6cd5",level:4},{value:"\u4f7f\u7528 ALSA \u63d2\u4ef6\u5f55\u97f3",id:"\u4f7f\u7528-alsa-\u63d2\u4ef6\u5f55\u97f3",level:5},{value:"\u76f8\u5173\u64cd\u4f5c",id:"\u76f8\u5173\u64cd\u4f5c",level:2},{value:"\u58f0\u5361\u9a71\u52a8\u7684\u52a0\u8f7d",id:"\u58f0\u5361\u9a71\u52a8\u7684\u52a0\u8f7d",level:3},{value:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e",id:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e-1",level:3},{value:"\u97f3\u91cf\u8bbe\u7f6e",id:"\u97f3\u91cf\u8bbe\u7f6e",level:3},{value:"\u786c\u4ef6\u97f3\u91cf\u8c03\u6574",id:"\u786c\u4ef6\u97f3\u91cf\u8c03\u6574",level:4},{value:"\u8f6f\u4ef6\u97f3\u91cf\u8c03\u6574",id:"\u8f6f\u4ef6\u97f3\u91cf\u8c03\u6574",level:4},{value:"FAQ",id:"faq",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u5f55\u97f3\u6216\u64ad\u653e\u53d8\u901f",id:"\u5f55\u97f3\u6216\u64ad\u653e\u53d8\u901f",level:4},{value:"AudioCodec \u8f93\u5165\u8f93\u51fa\u65e0\u58f0\u97f3",id:"audiocodec-\u8f93\u5165\u8f93\u51fa\u65e0\u58f0\u97f3",level:4},{value:"DMIC \u5f55\u97f3\u5f02\u5e38\uff08\u9759\u97f3/\u901a\u9053\u79fb\u4f4d\uff09",id:"dmic-\u5f55\u97f3\u5f02\u5e38\u9759\u97f3\u901a\u9053\u79fb\u4f4d",level:4},{value:"\u5916\u653e\u65e0\u58f0",id:"\u5916\u653e\u65e0\u58f0",level:4},{value:"AudioSystem \u63a5\u53e3\u521b\u5efa\u5b9e\u4f8b\u5931\u8d25",id:"audiosystem-\u63a5\u53e3\u521b\u5efa\u5b9e\u4f8b\u5931\u8d25",level:4},{value:"AudioSystem \u63a5\u53e3\u64ad\u653e\u5931\u8d25",id:"audiosystem-\u63a5\u53e3\u64ad\u653e\u5931\u8d25",level:4},{value:"AudioSystem \u63a5\u53e3\u5f55\u97f3\u5931\u8d25",id:"audiosystem-\u63a5\u53e3\u5f55\u97f3\u5931\u8d25",level:4},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",level:2},{value:"GPIO \u529f\u80fd\u590d\u7528\u914d\u7f6e",id:"gpio-\u529f\u80fd\u590d\u7528\u914d\u7f6e",level:3}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"\u97f3\u9891\u6846\u67b6",children:"\u97f3\u9891\u6846\u67b6"}),"\n",(0,l.jsx)(e.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u6863\u57fa\u4e8e RTOS \u5e73\u53f0\u57fa\u7840\u97f3\u9891\u6846\u67b6\u4ecb\u7ecd\uff0c\u80fd\u591f\u8ba9\u4f7f\u7528\u8005\u5728 RTOS \u5e73\u53f0\u5f00\u53d1\u4f7f\u7528\u97f3\u9891\u9a71\u52a8\uff0c\u5185\u5bb9\u5206\u56db\u5927\u90e8\u5206\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u97f3\u9891\u65f6\u949f\u6811-> \u9a71\u52a8\u7279\u6027-> \u97f3\u9891\u6d41\u901a\u8def->sys_config \u914d\u7f6e-> \u7f16\u8bd1\u914d\u7f6e-> \u58f0\u5361\u63a7\u4ef6\u4ecb\u7ecd->\u5e38\u89c1\u4f7f\u7528\u65b9\u6cd5 \u7b49\u90e8\u5206\uff0c\u4ecb\u7ecd\u97f3\u9891\u9a71\u52a8\u7684\u6d4b\u8bd5\u9a8c\u8bc1\u548c\u4f7f\u7528\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u6e90\u7801\u7ed3\u6784-> \u9a71\u52a8\u6846\u67b6-> \u5173\u952e\u6570\u636e\u7ed3\u6784-> \u63a5\u53e3\u8bf4\u660e \u7b49\u90e8\u5206\uff0c\u4ecb\u7ecd\u97f3\u9891\u9a71\u52a8\u7684\u4e8c\u6b21\u5f00\u53d1\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u58f0\u5361\u67e5\u770b-> \u58f0\u5361\u6d4b\u8bd5\u5de5\u5177-> \u5916\u6302 CODEC \u7b49\u90e8\u5206\uff0c\u4ecb\u7ecd\u58f0\u5361\u6a21\u5757\u7684\u6d4b\u8bd5\u9a8c\u8bc1\u548c\u4f7f\u7528\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"FAQ\u201d\u7ae0\u8282\uff1a\u8c03\u8bd5\u65b9\u6cd5\u53ca\u5e38\u89c1\u95ee\u9898\u6c47\u603b\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6a21\u5757\u4ecb\u7ecd",children:"\u6a21\u5757\u4ecb\u7ecd"}),"\n",(0,l.jsx)(e.p,{children:"\u5728 sunxi \u5e73\u53f0\u4e2d\uff0c\u4ece\u8f6f\u4ef6\u4e0a\u901a\u5e38\u5b58\u57285 \u7c7b\u97f3\u9891\u8bbe\u5907\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"AudioCodec"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM"}),"\n",(0,l.jsx)(e.li,{children:"AHUB"}),"\n",(0,l.jsx)(e.li,{children:"DMIC"}),"\n",(0,l.jsx)(e.li,{children:"S/PDIF"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u4e0a\u6bcf\u4e00\u7c7b\u97f3\u9891\u8bbe\u5907\u5747\u9002\u914dASoC \u67b6\u6784\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e R128 \u5e73\u53f0\uff0c\u5177\u6709\u4ee5\u4e0b\u97f3\u9891\u63a5\u53e3\u8d44\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"AudioCodec x1"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM x1"}),"\n",(0,l.jsx)(e.li,{children:"S/PDIF x1"}),"\n",(0,l.jsx)(e.li,{children:"DMIC x1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u53e6\u5916\u8fd8\u5177\u6709 MAD \u6a21\u5757\uff0c\u7528\u4e8e\u8bed\u97f3\u80fd\u91cf\u68c0\u6d4b\uff0c\u975e\u63a5\u53e3\u7c7b\u578b\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u6846\u67b6",children:"\u9a71\u52a8\u6846\u67b6"}),"\n",(0,l.jsx)(e.p,{children:"RTOS \u4e0a\u9762\u7684\u97f3\u9891\u9a71\u52a8\u6846\u67b6\u4e0e Linux \u4e0a ASoC \u6846\u67b6\u7684\u601d\u60f3\u6bd4\u8f83\u7c7b\u4f3c\uff0c\u5206\u4e3a codec,platform \u6a21\u578b\uff0ccore \u6838\u5fc3\u5c42\u5b9e\u73b0\u5177\u4f53\u7684 codec \u9a71\u52a8\u52a0\u8f7d\u3001platform \u9a71\u52a8\u7684\u9009\u62e9\u3001\u6570\u636e\u7684\u642c\u8fd0\u3001dma \u6307\u9488\u7684\u66f4\u65b0\u7b49\uff0c\u80fd\u591f\u5c06 codec \u9a71\u52a8\u4e0e SoC CPU \u89e3\u8026\u5408, \u65b9\u4fbf\u6dfb\u52a0\u5916\u6302 codec\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u97f3\u9891\u9a71\u52a8\u7684\u5927\u81f4\u6846\u67b6\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/developer-guide/part1/chapter3/image1.png",alt:""})}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u65f6\u949f\u6811",children:"\u97f3\u9891\u65f6\u949f\u6811"}),"\n",(0,l.jsx)(e.p,{children:"R128 \u97f3\u9891\u6a21\u5757\u65f6\u949f\u6e90\u67094 \u4e2a\u7cfb\u5217\uff0c\u5206\u522b\u4e3a24.576MHz\u300122.5792MHz\u30018.192MHz \u4ee5\u53ca\u9ad8\u9891\u65f6\u949f\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"24.576MHz\u300122.5792MHz \u7528\u4e8e Audiocodec\u3001I2S/PCM \u7684\u64ad\u653e\u548c\u5f55\u97f3\uff0cS/PDIF \u7684\u64ad\u653e\uff0cDMIC \u7684\u5f55\u97f3\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"8.192MHz \u7528\u4e8e\u7cfb\u7edf\u4f11\u7720\u65f6\u4f9b Audiocodec\u3001DMIC \u5f55\u97f3\uff0c\u4ee5\u53ca mad \u6a21\u5757\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u9ad8\u9891\u65f6\u949f\u7528\u4e8e S/PDIF \u7684\u5f55\u97f3\uff0c\u4ee5\u53ca I2S/PCM \u7684 ASRC \u6a21\u5757\uff1b"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u65f6\u949f\u6811\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/developer-guide/part1/chapter3/image2.png",alt:""})}),"\n",(0,l.jsx)(e.h2,{id:"audiocodec",children:"AudioCodec"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u7279\u6027",children:"\u9a71\u52a8\u7279\u6027"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u91c7\u6837\u7387\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a8~384kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a8~96kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u901a\u9053\u64ad\u653e\u548c\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a1~2"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a1~3"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u630116/24/32bit \u6570\u636e\u7cbe\u5ea6\uff08\u786c\u4ef6\u652f\u630116/24bit\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u786c\u4ef6HPF\u3001DRC\u3001EQ \u7b97\u6cd5"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u7684\u7269\u7406\u63a5\u53e3"}),"\n",(0,l.jsx)(e.li,{children:"INPUT : MIC"}),"\n",(0,l.jsx)(e.li,{children:"OUTPUT: LINEOUT"}),"\n",(0,l.jsx)(e.li,{children:"MIC, LINEOUT \u652f\u6301\u5dee\u5206\u548c\u5355\u7aef\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u540c\u65f6playback \u548ccapture (\u5168\u53cc\u5de5\u6a21\u5f0f)"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u901a\u8def",children:"\u97f3\u9891\u901a\u8def"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    Playback--\x3eDACL;\n    Playback--\x3eDACR;\n    DACL--\x3eLINEOUTL-Output-Select;\n    LINEOUTL-Output-Select--\x3eLINEOUTL;\n    DACR--\x3eLINEOUTR-Output-Select;\n    LINEOUTR-Output-Select--\x3eLINEOUTR;\n    LINEOUTL--\x3eLINEOUT;\n    LINEOUTR--\x3eLINEOUT;\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    MIC1--\x3eMIC1-Input-Select--\x3eADC1--\x3eCapture;\n    MIC2--\x3eMIC2-Input-Select--\x3eADC2--\x3eCapture;\n    MIC3--\x3eMIC3-Input-Select--\x3eADC3--\x3eCapture;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u914d\u7f6e",children:"\u9a71\u52a8\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u914d\u7f6e\u5728 menuconfig \u4e2d\u5728\u4e0b\u5217\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Drivers Options ---\x3e\n    soc related device drivers ---\x3e\n        SOUND Devices ---\x3e\n            [*] Sound card support\n                AllWinner CODEC drivers ---\x3e\n                    [*] Allwinner AudioCodec support\n                        Allwinner AudioCodec Choose ---\x3e\n                        [*] Allwinner AudioCodec DAC Support \n                        [*] Allwinner AudioCodec ADC Support\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5176\u4e2d ",(0,l.jsx)(e.code,{children:"Allwinner AudioCodec DAC Support"})," \u662f DAC \u6a21\u5757\uff0c",(0,l.jsx)(e.code,{children:"Allwinner AudioCodec ADC Support"})," \u662f ADC \u6a21\u5757\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"[audiocodec]\ndacl_vol = 129 //dac\u5de6\u58f0\u9053\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\ndacr_vol = 129 //dac\u53f3\u58f0\u9053\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\nlineout_vol = 5 //lineout\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\nlineoutl_en = 1 //lineout\u5de6\u58f0\u9053\u4f7f\u80fd\nlineoutr_en = 0 //lineout\u53f3\u58f0\u9053\u7981\u7528\nadc1_vol = 129 //adc1\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\nadc2_vol = 129 //adc2\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\nadc3_vol = 129 //adc3\u786c\u4ef6\u6570\u5b57\u97f3\u91cf\nmic1_gain = 19 //mic1\u786c\u4ef6\u589e\u76ca\nmic2_gain = 19 //mic2\u786c\u4ef6\u589e\u76ca\nmic3_gain = 0 //mic3\u786c\u4ef6\u589e\u76ca\nmic1_en = 1 //mic1\u4f7f\u80fd\nmic2_en = 1 //mic2\u4f7f\u80fd\nmic3_en = 1 //mic3\u4f7f\u80fd\nmad_bind_en = 0 //mad\u7981\u7528\npa_pin_msleep = 10 //pa\u5f00\u542f\u5ef6\u65f6\npa_pin = port:PB3<1><default><1><1> //pa\u5f15\u811a\u914d\u7f6e\ncapture_cma = 30720 //\u5f55\u97f3\u6700\u5927\u7f13\u5b58\u914d\u7f6e\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u63a7\u4ef6",children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsxs)(e.p,{children:["\u58f0\u5361\u63a7\u4ef6\u53ef\u4ee5\u901a\u8fc7 ",(0,l.jsx)(e.code,{children:"AudioCodec-DAC"})," \u547d\u4ee4\u67e5\u770b\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# AudioCodec-DAC\n    Card Name:audiocodecdac.\n    numid=0, name='DACL dig volume'\n    value=129, min=0, max=255\n    numid=1, name='DACR dig volume'\n    value=129, min=0, max=255\n    numid=2, name='LINEOUTL switch'\n    value=on, enum=off on\n    numid=3, name='LINEOUTR switch'\n    value=on, enum=off on\n    # AudioCodec-ADC\n    Card Name:audiocodecadc.\n    numid=0, name='bind mad function'\n    value=unbound, enum=unbound mad_bind\n    numid=1, name='lpsd channel sel function'\n    value=0th_chan, enum=0th_chan 1st_chan 2nd_chan 3rd_chan 4th_chan 5th_chan 6 th_chan 7th_chan\n    numid=2, name='mad standby channel sel function'\n    value=Zero_Chan, enum=Zero_Chan Two_Chan Three_Chan Four_Chan\n    numid=3, name='mad standby control'\n    value=RESUME, enum=RESUME SUSPEND\n    numid=4, name='MIC1 volume'\n    value=31, min=0, max=31\n    numid=5, name='MIC2 volume'\n    value=31, min=0, max=31\n    numid=6, name='MIC3 volume'\n    value=31, min=0, max=31\n    numid=7, name='MIC1 switch'\n    value=on, enum=off on\n    numid=8, name='MIC2 switch'\n    value=on, enum=off on\n    numid=9, name='MIC3 switch'\n    value=on, enum=off on\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u63a7\u4ef6\u540d\u79f0\u4e0e\u529f\u80fd\u5982\u4e0b\u8868\u6240\u793a\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a7\u4ef6\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u6570\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DACL dig volume"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DACL \u6570\u5b57\u97f3\u91cf\u8c03\u8282"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0->255 (-64->63dB)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DACR dig volume"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DACR \u6570\u5b57\u97f3\u91cf\u8c03\u8282"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0->255 (-64->63dB)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC1 volume"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC1 \u589e\u76ca\u8c03\u8282"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0->31 (0,6,6,6,9->36dB)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC2 volume"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC2 \u589e\u76ca\u8c03\u8282"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0->31 (0,6,6,6,9->36dB)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC3 volume"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC3 \u589e\u76ca\u8c03\u8282"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0->31 (0,6,6,6,9->36dB)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LINEOUTL switch"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LINEOUTL \u8f93\u51fa\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"off;on"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LINEOUTR switch"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LINEOUTR \u8f93\u51fa\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"off;on"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC1 switch"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC1 \u8f93\u5165\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"off;on"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC2 switch"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC2 \u8f93\u5165\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"off;on"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC3 switch"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MIC3 \u8f93\u5165\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"off;on"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u5047\u8bbe AudioCodec-DAC \u58f0\u5361\u5e8f\u53f7\u4e3a 0\uff0cAudioCodec-ADC \u58f0\u5361\u5e8f\u53f7\u4e3a 1\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u5f55\u97f3",children:"\u5f55\u97f3"}),"\n",(0,l.jsx)(e.p,{children:"\u7528 MIC1 \u5f55\u97f3\uff0c\u5e76\u5c06\u6570\u636e\u4fdd\u5b58\u5728 /data/test.wav \u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u6253\u5f00 MIC1 switch\n~# amixer -c 1 set 7 1\nCard Name:  audiocodecadc. numid=7,\n            name='MIC1 switch'\n            value=on, enum=off on\n\n# \u6267\u884c\u5f55\u97f3\u64cd\u4f5c\n~# arecord /data/test.wav -D hw:audiocodecadc -c 2 -r 16000 -d 5 -p 320 -b 1280\n\ncard:        hw:audiocodecadc\nperiod_size: 320\nbuffer_size: 1280\n\nmalloc rest=320000\nplease wait...writing data(320000 bytes) into /data/test.wav\nwrite finish...\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   2\nrate:       16000\nbits:       16\nalign:      4\ndata size:  320000\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u64ad\u653e",children:"\u64ad\u653e"}),"\n",(0,l.jsx)(e.p,{children:"\u64ad\u653e /data/test.wav \u97f3\u9891\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u6253\u5f00LINEOUTL/R switch\n~# amixer -c 0 set 2 1\nCard Name:  audiocodecdac. numid=2,\n            name='LINEOUTL switch'\n            value=on, enum=off on\n\n~# amixer -c 0 set 3 1\nCard Name:  audiocodecdac.\n            numid=3, name='LINEOUTR switch'\n            value=on, enum=off on\n\n# \u6267\u884c\u64ad\u653e\u64cd\u4f5c\n~# aplay /data/test.wav -D hw:audiocodecdac -p 320 -b 1280\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   2\nrate:       16000\nbits:       16\nalign:      4\ndata size:  320000\n"})}),"\n",(0,l.jsx)(e.h2,{id:"i2spcm",children:"I2S/PCM"}),"\n",(0,l.jsx)(e.p,{children:"\u6570\u5b57\u97f3\u9891\u4fe1\u53f7\u4f20\u8f93\u6807\u51c6 I2S/PCM"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u7279\u6027-1",children:"\u9a71\u52a8\u7279\u6027"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u91c7\u6837\u7387\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a8~384kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a8~384kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u901a\u9053\u64ad\u653e\u548c\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a1~16"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a1~16"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u630116/20/24/32bit \u6570\u636e\u7cbe\u5ea6\uff08\u786c\u4ef6\u652f\u63018/12/16/20/24/28/32bit\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 5 \u79cdTDM \u6a21\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"I2S standard mode"}),"\n",(0,l.jsx)(e.li,{children:"Left-justified mode"}),"\n",(0,l.jsx)(e.li,{children:"Right-justified mode"}),"\n",(0,l.jsx)(e.li,{children:"DSP-A mode (short frame PCM mode)"}),"\n",(0,l.jsx)(e.li,{children:"DSP-B mode (long frame PCM mode)"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301loopback \u56de\u73af\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u540c\u65f6playback \u548ccapture (\u5168\u53cc\u5de5\u6a21\u5f0f)"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u786c\u4ef6\u91cd\u91c7\u6837"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u58f0\u5361\u540c\u6e90\u64ad\u653e"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u58f0\u5361\u540c\u6b65\u5f55\u97f3"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u901a\u8def-1",children:"\u97f3\u9891\u901a\u8def"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    Playback--\x3eI2S-DOUT\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    I2S-DIN--\x3eCapture\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u56de\u73af\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:" graph TD;    \n    Playback--\x3eCapture\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5f15\u811a\u6a21\u5f0f\u914d\u7f6e",children:"\u5f15\u811a\u6a21\u5f0f\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"[daudio0]\npin_mclk = port:PA23<2><0><1><default>\npin_bclk = port:PA20<2><0><1><default>\npin_lrck = port:PA19<2><0><1><default>\npin_dout0 = port:PA22<2><0><1><default>\npin_din0 = port:PA21<2><0><1><default>\ntdm_num = 0\ndaudio_master = 4\naudio_format = 1\nsignal_inversion = 1\npcm_lrck_period = 64\nslot_width_select = 32\nmsb_lsb_first = 0\nframetype = 0\ntx_data_mode = 0\nrx_data_mode = 0\ntdm_config = 1\nmclk_div = 2\nrx_sync_en = 0\nrx_sync_ctl = 0\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u9879\u8bf4\u660e\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u914d\u7f6e\u9879\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u914d\u7f6e\u9879\u8bf4\u660e"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pin_mclk"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MCLK \u5f15\u811a\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pin_bclk"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"BCLK \u5f15\u811a\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pin_lrck"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LRCK \u5f15\u811a\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pin_dout0"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DOUT0 \u5f15\u811a\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pin_din0"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DIN0 \u5f15\u811a\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"tdm_num"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"I2S \u4f7f\u7528\u6570\u91cf\u7684\u8bbe\u7f6e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"daudio_master"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u5907\u4e3b\u4ece\u6a21\u5f0f\u7684\u8bbe\u7f6e 1\uff1aBCLK\u3001LRCK \u7531\u5916\u90e8 CODEC \u63d0\u4f9b\uff1b 2\uff1aBCLK \u7531 SoC \u63d0\u4f9b\uff0cLRCK \u7531\u5916\u90e8 CODEC \u63d0\u4f9b\uff1b 3\uff1aBCLK \u7531\u5916\u90e8 CODEC \u63d0\u4f9b\uff0cLRCK \u7531 SoC \u63d0\u4f9b\uff1b 4\uff1aBCLK\u3001LRCK \u7531 SoC \u63d0\u4f9b"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"audio_format"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"5 \u79cd TDM \u6a21\u5f0f\u7684\u8bbe\u7f6e\uff0c\u6807\u51c6\u6a21\u5f0f\u4e3a 1\u3001\u5de6\u5bf9\u9f50\u6a21\u5f0f\u4e3a 2\u3001\u53f3\u5bf9\u9f50\u6a21\u5f0f\u4e3a 3\u3001\u957f\u5e27\u6a21\u5f0f\u4e3a 4\u3001\u77ed\u5e27\u6a21\u5f0f\u4e3a 5"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"signal_inversion"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"BCLK \u548c MCLK \u4fe1\u53f7\u7684\u7ffb\u8f6c\u9009\u62e9\uff0c\u9ed8\u8ba4\u90fd\u4e0d\u7ffb\u8f6c\uff0c\u4e3a 1\uff0cMCLK \u7ffb\u8f6c\u4e3a 2\uff0cBCLK \u4e3a 3\uff0c\u90fd\u7ffb\u8f6c\u5219\u4e3a 4"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"pcm_lrck_period"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"LRCK \u7684\u5bbd\u5ea6\uff0c\u53ef\u9009\u9879: 16/32/64/128/256"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"slot_width_select"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"slot \u7684\u5bbd\u5ea6\uff0c\u53ef\u9009\u9879: 8/16/32"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"msb_lsb_first"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5927\u5c0f\u7aef\u7684\u8bbe\u7f6e\uff0c0 \u4e3a\u5927\u7aef\uff0c1 \u4e3a\u5c0f\u7aef"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"frametype"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u957f\u5e27\u6a21\u5f0f\u548c\u77ed\u5e27\u6a21\u5f0f\u7684\u9009\u62e9\uff0c0 \u4e3a\u77ed\u5e27\uff0c1 \u4e3a\u957f\u5e27"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"tx_data_mode"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u53d1\u9001\u7aef\u6570\u636e\u683c\u5f0f\u7684\u9009\u62e9\uff0c0 \u4e3a 16 \u4f4d\u7ebf\u6027 pcm \u6570\u636e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"rx_data_mode"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u63a5\u6536\u7aef\u6570\u636e\u683c\u5f0f\u7684\u9009\u62e9\uff0c0 \u4e3a 16 \u4f4d\u7ebf\u6027 pcm \u6570\u636e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"tdm_config"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e TDM \u6a21\u5f0f\uff0c0 \u4e3a DSP \u7684\u4e24\u4e2a\u6a21\u5f0f\uff0c1 \u4e3a I2S \u7684\u4e09\u79cd\u6a21\u5f0f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"mclk_div"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"MCLK \u5206\u9891\u7cfb\u6570\uff0c\u4e3a 0 \u65f6\u65e0\u8f93\u51fa\uff0c\u53ef\u9009\u9879: 1/2/4/6/8/12/16/24/32/48/64/96/128/176/192"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"rx_sync_en"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u540c\u6b65\u5f55\u97f3\u529f\u80fd\u7684\u4f7f\u80fd"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"rx_sync_ctl"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u540c\u6b65\u5f55\u97f3\u529f\u80fd\u662f\u5426\u900f\u51fa\u63a7\u4ef6\u5f00\u5173"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u914d\u7f6e-1",children:"\u9a71\u52a8\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u914d\u7f6e\u5728 menuconfig \u4e2d\u5728\u4e0b\u5217\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Drivers Options ---\x3e\n    soc related device drivers ---\x3e\n        SOUND Devices ---\x3e\n            [*] Sound card support\n                Platform(Audio Interface) drivers ---\x3e\n                    [*] Allwinner Digital Audio Support\n                        Allwinner Digital Audio Choose ---\x3e\n                            [*] Allwinner Daudio0 Support \n                            [*] Allwinner Daudio1 Support \n                            [*] Allwinner Daudio2 Support \n                            [*] Allwinner Daudio3 Support\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u9879\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Allwinner Daudio0 Support"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM0 \u6a21\u5757"}),"\n",(0,l.jsx)(e.li,{children:"Allwinner Daudio1 Support"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM1 \u6a21\u5757"}),"\n",(0,l.jsx)(e.li,{children:"Allwinner Daudio2 Support"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM2 \u6a21\u5757"}),"\n",(0,l.jsx)(e.li,{children:"Allwinner Daudio3 Support"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM3 \u6a21\u5757"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u63a7\u4ef6-1",children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"\u63a7\u4ef6\u5217\u8868\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Card Name:snddaudio0.\n    numid=0, name='tx hub mode'\n        value=Off, enum=Off On\n    numid=1, name='rx sync mode'\n        value=Off, enum=Off On\n    numid=2, name='loopback debug'\n        value=Off, enum=Off On\n    numid=3, name='sunxi daudio asrc function'\n        value=Off, enum=Off On\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u63a7\u4ef6\u540d\u79f0\u4e0e\u529f\u80fd\u5982\u4e0b\u8868\u6240\u793a\uff1a"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a7\u4ef6\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u6570\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"tx hub mode"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u540c\u6e90\u64ad\u653e\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Off;On"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"rx sync mode"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u540c\u6b65\u91c7\u6837\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Off;On"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"loopback debug"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5185\u90e8\u56de\u5f55\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Off;On"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"sunxi daudio asrc function"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u91cd\u91c7\u6837\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Off;On"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u65b9\u6cd5-1",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u5047\u8bbe snddaudio0 \u58f0\u5361\u5e8f\u53f7\u4e3a 2"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u5f55\u97f3-1",children:"\u5f55\u97f3"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# arecord /data/test.wav -D hw:snddaudio0\n\ncard:          hw:snddaudio0\nperiod_size:   1024\nbuffer_size:   4096\nplease set capture duration..\nplease wait...writing data(0 bytes) into /data/test.wav \nwrite finish...\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   3\nrate:       16000\nbits:       16\nalign:      6\ndata size:  0\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u64ad\u653e-1",children:"\u64ad\u653e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# aplay /data/test.wav -D hw:snddaudio0\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   3\nrate:       16000\nbits:       16\nalign:      6\ndata size:  0\n"})}),"\n",(0,l.jsx)(e.h4,{id:"snddaudio0-\u58f0\u5361\u5185\u90e8\u56de\u73af\u64ad\u5f55\u97f3\u9891\u683c\u5f0f\u9700\u4fdd\u6301\u4e00\u81f4",children:"snddaudio0 \u58f0\u5361\u5185\u90e8\u56de\u73af\uff0c\u64ad\u5f55\u97f3\u9891\u683c\u5f0f\u9700\u4fdd\u6301\u4e00\u81f4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# 1.\u6253\u5f00 loopback \u5f00\u5173\n~# amixer -c 2 set 2 1\n\nCard Name:snddaudio0.\n    numid=2, name='loopback debug'\n            value=On, enum=Off On\n\n# 2.\u540e\u53f0\u64ad\u653e\u97f3\u9891\n~# fork aplay /data/test.wav -D hw:snddaudio0\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   3\nrate:       16000\nbits:       16\nalign:      6\ndata size:  0\n\n# 3.\u6267\u884c\u5f55\u97f3\u64cd\u4f5c\n~# arecord /data/test.wav -D hw:snddaudio0\n\ncard:          hw:snddaudio0\nperiod_size:   1024\nbuffer_size:   4096\nplease set capture duration..\nplease wait...writing data(0 bytes) into /data/test.wav \nwrite finish...\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   3\nrate:       16000\nbits:       16\nalign:      6\ndata size:  0\n"})}),"\n",(0,l.jsx)(e.h2,{id:"spdif",children:"S/PDIF"}),"\n",(0,l.jsx)(e.p,{children:"S/PDIF \u6570\u5b57\u97f3\u9891\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u7279\u6027-2",children:"\u9a71\u52a8\u7279\u6027"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u91c7\u6837\u7387\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a22.05~192kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a22.05~192kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u901a\u9053\u64ad\u653e\u548c\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\uff1a1~2"}),"\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\uff1a1~2"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 16/20/24/32bit \u6570\u636e\u7cbe\u5ea6\uff08\u786c\u4ef6\u652f\u6301 16/20/24bit\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 loopback \u56de\u73af\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u540c\u65f6 playback \u548c capture (\u5168\u53cc\u5de5\u6a21\u5f0f)"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 IEC-60958 \u534f\u8bae"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 IEC-61937 \u534f\u8bae"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u58f0\u5361\u540c\u6e90\u64ad\u653e"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u900f\u4f20\u64ad\u653e"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u901a\u8def-2",children:"\u97f3\u9891\u901a\u8def"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u64ad\u653e\u901a\u8def"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    Playback--\x3eSPDIF-DOUT\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\u901a\u8def"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    SPDIF-DIN--\x3eCapture\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u914d\u7f6e-2",children:"\u9a71\u52a8\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u914d\u7f6e\u5728 menuconfig \u4e2d\u5728\u4e0b\u5217\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Drivers Options ---\x3e\n    soc related device drivers ---\x3e\n        SOUND Devices ---\x3e\n            [*] Sound card support\n                Platform(Audio Interface) drivers ---\x3e\n                    [*] Allwinner SPDIF Support\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u9879\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Allwinner SPDIF Support"}),"\n",(0,l.jsx)(e.li,{children:"SPDIF \u6a21\u5757"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u63a7\u4ef6-2",children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"\u63a7\u4ef6\u5217\u8868\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Card Name:sndspdif.\nnumid=0, name='spdif audio format function'\n    value=PCM, enum=PCM DTS\nnumid=1, name='spdif rx data type'\n    value=IEC-60958, enum=IEC-60958 IEC-61937 numid=2, name='spdif audio hub mode'\n    value=Disabled, enum=Disabled Enabled\nnumid=3, name='sunxi spdif loopback debug'\n    value=0, min=0, max=1\n"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a7\u4ef6\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u6570\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"spdif audio format function"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u97f3\u9891\u6570\u636e\u683c\u5f0f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"PCM DTS"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"spdif rx data type"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u7f6e\u4f20\u8f93\u534f\u8bae"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"IEC-60958 IEC-61937"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"spdif audio hub mode"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u540c\u6e90\u8f93\u51fa\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Disabled : Enabled"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"sunxi spdif loopback debug"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5185\u90e8\u56de\u5f55\u5f00\u5173"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0\uff1a\u5173\u95ed 1\uff1a\u6253\u5f00"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u65b9\u6cd5-2",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h4,{id:"\u64ad\u653e-2",children:"\u64ad\u653e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u64ad\u653e\u97f3\u9891\n~# aplay /data/test.wav -D hw:sndspdif\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   2\nrate:       16000\nbits:       16\nalign:      4\ndata size:  320000\n"})}),"\n",(0,l.jsx)(e.h2,{id:"dmic",children:"DMIC"}),"\n",(0,l.jsx)(e.p,{children:"\u53cc/\u7acb\u4f53\u58f0\u6570\u5b57\u9ea6\u514b\u98ce\u63a5\u53e3\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u7279\u6027-3",children:"\u9a71\u52a8\u7279\u6027"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u91c7\u6837\u7387\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"8~48kHz"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u901a\u9053\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"channels\uff1a1~8"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u630116/24bit \u6570\u636e\u7cbe\u5ea6"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u786c\u4ef6HPF \u7b97\u6cd5"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u591a\u58f0\u5361\u540c\u6b65\u5f55\u97f3"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u901a\u8def-3",children:"\u97f3\u9891\u901a\u8def"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\u6d41"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\n    DMIC-DIN--\x3eCapture\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u914d\u7f6e-3",children:"\u9a71\u52a8\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u914d\u7f6e\u5728 menuconfig \u4e2d\u5728\u4e0b\u5217\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Drivers Options ---\x3e\n    soc related device drivers ---\x3e\n        SOUND Devices ---\x3e\n            [*] Sound card support\n                Platform(Audio Interface) drivers ---\x3e\n                    [*] Allwinner DMIC Support\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u9879\u8bf4\u660e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Allwinner DMIC Support"}),"\n",(0,l.jsx)(e.li,{children:"DMIC \u6a21\u5757"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u65b9\u6cd5-3",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u5f55\u97f3\n~# arecord /data/test.wav -D hw:snddmic -c 2 -r 16000 -d 5 -p 320 -b 1280\n\ncard:          hw:snddmic\nperiod_size:   320\nbuffer_size:   1280\nmalloc rest=   320000\nplease set capture duration..\nplease wait...writing data(0 bytes) into /data/test.wav \nwrite finish...\n\nriffType:   RIFF\nwaveType:   WAVE\nchannels:   2\nrate:       16000\nbits:       16\nalign:      4\ndata size:  320000\n"})}),"\n",(0,l.jsx)(e.h2,{id:"mad",children:"MAD"}),"\n",(0,l.jsx)(e.p,{children:"\u9ea6\u514b\u98ce\u6fc0\u6d3b\u68c0\u6d4b(Microphone Activity Detection\uff0cMAD)\uff0c\u7528\u4e8e\u8bed\u97f3\u5524\u9192\u65b9\u6848"}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u7279\u6027-4",children:"\u9a71\u52a8\u7279\u6027"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301AudioCodec\u3001DMIC \u97f3\u9891\u4f20\u8f93\u63a5\u53e3\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u630116kHz, 48kHz \u91c7\u6837\u7387\uff0c\u56fa\u5b9a16bit\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u4e00\u575764KB \u7684SRAM\uff0c\u53ef\u7528\u4e8e\u4fdd\u5b58\u97f3\u9891\u6570\u636e\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u57fa\u4e8e\u80fd\u91cf\u8bc6\u522b\u7684\u8bed\u97f3\u68c0\u6d4b\u6a21\u5757LPSD\uff08\u53ea\u652f\u6301\u5355\u901a\u9053\uff0c16bit \u6570\u636e\uff0c16kHz \u91c7\u6837\u7387\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u97f3\u9891\u901a\u8def-4",children:"\u97f3\u9891\u901a\u8def"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5524\u9192\u72b6\u6001\uff0c\u6b63\u5e38\u5f55\u97f3"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\nADC --\x3e rx_fifo --\x3e DMA --\x3e MEM\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fdb\u5165\u4f11\u7720\uff0c\u8bed\u8a00\u80fd\u91cf\u68c0\u6d4b"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\nADC --\x3e rx_fifo --\x3e mad_sram\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u89e6\u53d1\u5524\u9192\uff0c\u7ee7\u7eed\u5f55\u97f3"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-mermaid",children:"graph TD;\nADC --\x3e rx_fifo --\x3e DMA --\x3e MEM\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u9a71\u52a8\u914d\u7f6e-4",children:"\u9a71\u52a8\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u914d\u7f6e\u5728 menuconfig \u4e2d\u5728\u4e0b\u5217\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Drivers Options ---\x3e\n    soc related device drivers ---\x3e\n        SOUND Devices ---\x3e\n            [*] Sound card support\n                Platform(Audio Interface) drivers ---\x3e\n                    [*] Allwinner MAD Support\n"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u9700\u8981\u540c\u65f6\u4f7f\u80fd\u5f55\u97f3\u6e90\u6a21\u5757\u9a71\u52a8\u624d\u53ef\u6b63\u5e38\u5de5\u4f5c\uff0c\u5982\u5f55\u97f3\u6e90\u4e3aAudioCodec\uff0c\u5219\u9700\u4f7f\u80fdAudioCodec \u9a71\u52a8\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u63a7\u4ef6-3",children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"?> \u4ee5mad \u7ed1\u5b9aAudioCodec \u58f0\u5361\u4e3a\u4f8b\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u63a7\u4ef6\u5217\u8868\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Card Name:audiocodecadc.\n    numid=0, name='bind mad function'\n        value=unbound, enum=unbound mad_bind\n    numid=1, name='lpsd channel sel function'\n        value=0th_chan, enum=0th_chan 1st_chan 2nd_chan 3rd_chan 4th_chan 5th_chan 6th_chan 7th_chan\n    numid=2, name='mad standby channel sel function'\n        value=Zero_Chan, enum=Zero_Chan Two_Chan Three_Chan Four_Chan\n    numid=3, name='mad standby control'\n        value=RESUME, enum=RESUME SUSPEND\n    numid=4, name='MIC1 volume'\n        value=31, min=0, max=31\n    numid=5, name='MIC2 volume'\n        value=31, min=0, max=31\n    numid=6, name='MIC3 volume'\n        value=31, min=0, max=31\n    numid=7, name='MIC1 switch'\n        value=on, enum=off on\n    numid=8, name='MIC2 switch'\n        value=on, enum=off on\n    numid=9, name='MIC3 switch'\n        value=on, enum=off on\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u4e0a\uff0c\u63a7\u4ef60-3 \u4e3amad \u6a21\u5757\u63a7\u4ef6\uff0c\u63a7\u4ef64-9 \u4e3aAudioCodec \u6a21\u5757\u63a7\u4ef6\u3002"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a7\u4ef6\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u6570\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"bind mad function"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u662f\u5426\u7ed1\u5b9a MAD \u529f\u80fd"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0: \u4e0d\u7ed1\u5b9a; 1: \u7ed1\u5b9a"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"lpsd channel sel Function"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u9009\u62e9\u4f5c\u4e3a\u80fd\u91cf\u5524\u9192\u7684\u901a\u9053"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0: \u901a\u9053 0; 1: \u901a\u9053 1;"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"mad_standby channel sel Function"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bbe\u5b9a\u4f11\u7720\u65f6 mad \u5f55\u97f3\u901a\u9053\u6570"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Zero_Chan: \u5b9e\u9645\u5f55\u97f3\u901a\u9053"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"mad standby control"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u4f11\u7720\u6d4b\u8bd5\u4f7f\u7528"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"Two_Chan: \u53ea\u5f55\u5236\u4e24\u901a\u9053Off;On"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u65b9\u6cd5-4",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h4,{id:"\u8bed\u97f3\u5524\u9192",children:"\u8bed\u97f3\u5524\u9192"}),"\n",(0,l.jsx)(e.p,{children:"\u5b89\u9759\u73af\u5883\u4e0b\uff0c\u5f00\u542f\u5f55\u97f3\u540e\u8fdb\u5165\u4f11\u7720\u6682\u505c\u5f55\u97f3\uff0c\u6b64\u65f6\u5916\u754c\u5236\u9020\u97f3\u91cf\u8f83\u5927\u7684\u58f0\u97f3\uff0cmad \u6a21\u5757\u89e6\u53d1\u5524\u9192 cpu\uff0c\u5e76\u81ea\u52a8\u7ee7\u7eed\u5f55\u97f3\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f55\u97f3\u524d\u63a7\u4ef6\u8bbe\u7f6e"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5047\u8bbe\u4f7f\u7528AudioCodec \u6a21\u5757MIC1 \u5355\u901a\u9053\u4f5c\u4e3a\u80fd\u91cf\u80fd\u91cf\u5524\u9192\u901a\u9053\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'~# amixer -c 0 set "bind mad function" 1\n~# amixer -c 0 set "lpsd channel sel function" 0\n~# amixer -c 0 set "mad standby channel sel function" 0\n~# amixer -c 0 set "MIC2 switch" 0\n~# amixer -c 0 set "MIC3 switch" 0\n'})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f00\u542f\u5f55\u97f3"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u5f55\u97f3\u53c2\u6570\u4e3a\u5355\u901a\u9053\u300116kHz\u91c7\u6837\u7387\u300116bit\u3002\n~# fork arecord -D hw:audiocodecadc -c 1 -r 16000 -d 20 -p 320 -b 1280 /data/test.wav\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fdb\u5165\u4f11\u7720"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u5982\u4f7f\u7528\u4f11\u7720\u6d4b\u8bd5\u547d\u4ee4\u8fdb\u5165\u4f11\u7720\uff0c\u6b64\u65f6arecord \u5f55\u97f3\u5c06\u88ab\u6682\u505c\n~# rpccli arm standby\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5916\u754c\u58f0\u97f3\u5524\u9192"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5236\u9020\u8f83\u5927\u97f3\u91cf\u7684\u5916\u754c\u58f0\u97f3\uff0c\u7cfb\u7edf\u5524\u9192\uff0c\u5e76\u81ea\u52a8\u6062\u590darecord \u5f55\u97f3\uff0c\u67e5\u770b\u5f55\u97f3\u6587\u4ef6\u53ef\u5f55\u5230\u5916\u754c\u5524\u9192\u58f0\u97f3\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8bed\u97f3\u5524\u9192\u80fd\u91cf\u5524\u9192\u9608\u503c\u53c2\u6570",children:"\u8bed\u97f3\u5524\u9192\u80fd\u91cf\u5524\u9192\u9608\u503c\u53c2\u6570"}),"\n",(0,l.jsxs)(e.p,{children:["\u8bed\u97f3\u5524\u9192\u80fd\u91cf\u5524\u9192\u9608\u503c\u53c2\u6570\u80fd\u91cf\u5524\u9192\u6a21\u5757lpsd\uff0c\u8bc6\u522b\u80fd\u91cf\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u5411\uff0c\u77ac\u65f6\u80fd\u91cf\u548c\u7d2f\u8ba1\u80fd\u91cf\uff08\u524d\u8005\u6bd4\u5982\u662f\u5173\u95e8\u58f0\uff0c\u540e\u8005\u6bd4\u5982\u662f\u4e0d\u65ad\u8bf4\u8bdd\uff09\u80fd\u91cf\u68c0\u6d4b\u53c2\u6570\u914d\u7f6e\u5728 ",(0,l.jsx)(e.code,{children:"lichee/rtos-hal/hal/source/sound/platform/sunximad.c"})," \u4fee\u6539\u3002"]}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u53c2\u6570\u540d\u79f0"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u53ef\u8bbe\u8303\u56f4"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a8\u8350\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"lpsd_th"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u7d2f\u79ef\u8bed\u97f3\u80fd\u91cf\u68c0\u6d4b\u9608\u503c"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0x0 - 0xFFFF"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"1200"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"lpsd_rrun"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bed\u97f3\u80fd\u91cf\u68c0\u6d4b\u5f00\u59cb\u65f6\u95f4"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0x0 - 0xFF"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"145"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"lpsd_rstop"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8bed\u97f3\u80fd\u91cf\u68c0\u6d4b\u7ed3\u675f\u65f6\u95f4"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"0x0 - 0xFF"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"170"})]})]})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u77ac\u65f6\u80fd\u91cf\u68c0\u6d4b\u53c2\u6570\uff0c\u4e3b\u8981\u662f lpsd_rrun \u548c lpsd_rstop\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u4e00\u822c\u53ea\u5bf9 stop \u503c\u8fdb\u884c\u4fee\u6539;"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u5f55\u97f3\u6570\u636e\u7ecf\u5e38\u7f3a\u5c11\u5524\u9192\u8bcd\u7684\u7b2c\u4e00\u4e2a\u5b57\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u964d\u4f4e stop \u503c\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u9ad8\u5524\u9192\u8bcd\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002\u4f46\u540c\u65f6\u4f1a\u63d0\u9ad8\u8bef\u5524\u9192\u7387\uff0c\u73af\u5883\u566a\u97f3\u4e5f\u4f1a\u5f88\u5bb9\u6613\u89e6\u53d1\u80fd\u91cf\u68c0\u6d4b\uff0c\u5524\u9192\u7cfb\u7edf;"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u60f3\u8981\u964d\u4f4e\u8bef\u5524\u9192\u7387 (\u73af\u5883\u566a\u97f3\u9020\u6210\u5524\u9192)\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u63d0\u9ad8 stop \u503c\u3002\u540c\u6837\u7684\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u5524\u9192\u8bcd\u5f55\u97f3\u6570\u636e\u4e0d\u5b8c\u6574\uff0c\u4f8b\u5982\u4e00\u4e9b\u97f3\u91cf\u8f83\u4f4e\uff0c\u97f3\u8c03\u8f83\u4f4e\u7684\u8bed\u6599;"}),"\n",(0,l.jsx)(e.li,{children:"\u5524\u9192\u8bcd\u8bc6\u522b\u7387\u4ee5\u53ca\u8bef\u5524\u9192\u7387\u65e0\u6cd5\u540c\u65f6\u517c\u5f97\uff0c\u5ba2\u6237\u9700\u8981\u6839\u636e\u5b9e\u9645\u9700\u6c42\u3001\u573a\u666f\uff0c\u6743\u8861\u914d\u7f6e\u53c2\u6570;"}),"\n",(0,l.jsx)(e.li,{children:"\u7d2f\u79ef\u80fd\u91cf\u68c0\u6d4b\u53c2\u6570\uff0c\u4e3b\u8981\u662f lpsd_th\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u503c 1200\uff0c\u5efa\u8bae\u4fee\u6539\u8303\u56f4 50~1200\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6a21\u5757\u63a5\u53e3\u8bf4\u660e",children:"\u6a21\u5757\u63a5\u53e3\u8bf4\u660e"}),"\n",(0,l.jsx)(e.h3,{id:"\u6e90\u6587\u4ef6\u5217\u8868",children:"\u6e90\u6587\u4ef6\u5217\u8868"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"platform"})," \u5c42"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"lichee/rtos-hal/hal/source/sound/platform .\n\u251c\u2500\u2500 Kconfig\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 objects.mk\n\u251c\u2500\u2500 sun8iw19-daudio.c\n\u251c\u2500\u2500 sunxi-daudio.c           # platform \u5c42 \u2013> I2S/PCM\uff0c\u8d1f\u8d23 I2S/PCM \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u3001DMA \u76f8\u5173\u914d\u7f6e\u3002\n\u251c\u2500\u2500 sunxi-daudio.h           # platform \u5c42 \u2013> I2S/PCM\uff0c\u8d1f\u8d23 I2S/PCM \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u3001DMA \u76f8\u5173\u914d\u7f6e\u3002\n\u251c\u2500\u2500 sunxi-dmic.c\n\u251c\u2500\u2500 sunxi-dmic.h\n\u251c\u2500\u2500 sunxi-dummy-cpudai.c     # platform \u5c42 \u2013> AudioCodec\uff0c\u8d1f\u8d23 AudioCodec \u6a21\u5757 DMA \u76f8\u5173\u914d\u7f6e\u3002\n\u251c\u2500\u2500 sunxi-mad.c\n\u251c\u2500\u2500 sunxi-mad.h\n\u251c\u2500\u2500 sunxi-pcm.c              # platform \u5c42 \u2013> \u516c\u5171\u90e8\u5206\uff0c\u8d1f\u8d23\u97f3\u9891\u6d41\u4f20\u8f93\uff0c\u4f7f\u7528 DMA \u65b9\u5f0f\uff0c\u63d0\u4f9b\u6ce8\u518c platform \u8bbe\u5907\u7684\u516c\u5171\u51fd\u6570\u3002\n\u251c\u2500\u2500 sunxi-pcm.h              # platform \u5c42 \u2013> \u516c\u5171\u90e8\u5206\uff0c\u8d1f\u8d23\u97f3\u9891\u6d41\u4f20\u8f93\uff0c\u4f7f\u7528 DMA \u65b9\u5f0f\uff0c\u63d0\u4f9b\u6ce8\u518c platform \u8bbe\u5907\u7684\u516c\u5171\u51fd\u6570\u3002\n\u251c\u2500\u2500 sunxi-spdif.c            # platform \u5c42 \u2013> SPDIF\uff0c\u8d1f\u8d23 SPDIF \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u3001DMA \u76f8\u5173\u914d\u7f6e\u3002\n\u251c\u2500\u2500 sunxi-spdif.h            # platform \u5c42 \u2013> SPDIF\uff0c\u8d1f\u8d23 SPDIF \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u3001DMA \u76f8\u5173\u914d\u7f6e\u3002\n\u251c\u2500\u2500 platforms\n    \u251c\u2500\u2500 daudio-sun20iw2.h    # platform \u5c42 \u2013> DMIC\u3001SPDIF\u3001DAUDIO \u65f6\u949f\u6846\u67b6\u4ee3\u7801\n    \u251c\u2500\u2500 dmic-sun20iw2.h      # platform \u5c42 \u2013> DMIC\u3001SPDIF\u3001DAUDIO \u65f6\u949f\u6846\u67b6\u4ee3\u7801\n    \u251c\u2500\u2500 mad-sun20iw2.c       # platform \u5c42 \u2013> DMIC\u3001SPDIF\u3001DAUDIO \u65f6\u949f\u6846\u67b6\u4ee3\u7801\n    \u251c\u2500\u2500 mad-sun20iw2.h       # platform \u5c42 \u2013> DMIC\u3001SPDIF\u3001DAUDIO \u65f6\u949f\u6846\u67b6\u4ee3\u7801\n    \u251c\u2500\u2500 spdif-sun20iw2.h     # platform \u5c42 \u2013> DMIC\u3001SPDIF\u3001DAUDIO \u65f6\u949f\u6846\u67b6\u4ee3\u7801\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"codec"})," \u5c42"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"lichee/rtos-hal/hal/source/sound/codecs .\n\u251c\u2500\u2500 ac101s.c               # codec \u5c42 \u2013> AC101s codec\n\u251c\u2500\u2500 ac101s.h               # codec \u5c42 \u2013> AC101s codec\n\u251c\u2500\u2500 dummy_codec.c          \n\u251c\u2500\u2500 sun20iw2-codec-adc.c   # codec \u5c42 \u2013> AudioCodec\uff0c\u8d1f\u8d23 AudioCodec \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u914d\u7f6e\n\u251c\u2500\u2500 sun20iw2-codec.c       # codec \u5c42 \u2013> AudioCodec\uff0c\u8d1f\u8d23 AudioCodec \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u914d\u7f6e\n\u251c\u2500\u2500 sun20iw2-codec-dac.c   # codec \u5c42 \u2013> AudioCodec\uff0c\u8d1f\u8d23 AudioCodec \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u914d\u7f6e\n\u251c\u2500\u2500 sun20iw2-codec.h       # codec \u5c42 \u2013> AudioCodec\uff0c\u8d1f\u8d23 AudioCodec \u6a21\u5757\u786c\u4ef6\u53c2\u6570\u914d\u7f6e\n\u251c\u2500\u2500 sunxi-codec.h          # codec \u5c42 \u2013> \u516c\u5171\u90e8\u5206\n\u251c\u2500\u2500 sunxi_rw_func.c\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"machine"})," \u5c42"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"lichee/rtos/projects/xxx/src .\n\u251c\u2500\u2500 card_default.c         # \u8d1f\u8d23 platform \u5c42\u548c codec \u5c42\u7ed1\u5b9a\u3002\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u8f6f\u4ef6\u6846\u56fe",children:"\u8f6f\u4ef6\u6846\u56fe"}),"\n",(0,l.jsx)(e.h3,{id:"\u5173\u952e\u6570\u636e\u7ed3\u6784",children:"\u5173\u952e\u6570\u636e\u7ed3\u6784"}),"\n",(0,l.jsx)(e.h4,{id:"pcm-\u6570\u636e\u7c7b\u7ed3\u6784\u4f53",children:"pcm \u6570\u636e\u7c7b\u7ed3\u6784\u4f53"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"sunxi_dma_params"})}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5b9a\u4e49audio DAI DMA \u76f8\u5173\u53c2\u6570\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"struct sunxi_dma_params {\n    char *name;\n    dma_addr_t dma_addr;\n    uint32_t src_maxburst;\n    uint32_t dst_maxburst;\n    uint8_t dma_drq_type_num;\n};\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"platform \u7c7b\u7ed3\u6784\u4f53"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"DAUDIO"})}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"I2S/PCM \u6a21\u5757\u603b\u7ed3\u6784\u4f53\uff0c\u5305\u542b\u57fa\u7840\u5e73\u53f0\u8d44\u6e90\u3001\u7279\u5b9a\u529f\u80fd\u79c1\u6709\u53c2\u6570"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"struct sunxi_daudio_info {\n    struct snd_platform *platform;\n    struct sunxi_daudio_clk clk;\n    struct daudio_pinctrl *pinctrl;\n    uint8_t pinctrl_num;\n    struct pa_config *pa_cfg;\n    uint8_t pa_cfg_num;\n\n    struct sunxi_daudio_param param;\n    struct sunxi_dma_params playback_dma_param;\n    struct sunxi_dma_params capture_dma_param;\n\n    uint8_t global_enable;\n    unsigned int hub_mode;\n    bool playback_en;\n    bool capture_en;\n    int asrc_en;\n};\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"SPDIF"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"/* \u7528\u4e8e\u63cf\u8ff0\u5f15\u811a*/\ntypedef struct {\n    gpio_pin_t gpio;\n    unsigned int mux;\n} spdif_gpio;\n\n/* \u7528\u4e8e\u63cf\u8ff0SPDIF \u5f15\u811a*/\ntypedef struct {\n    spdif_gpio out;\n    spdif_gpio in;\n} spdif_gpio_t;\n\n/* \u5305\u542b\u4e86DMA \u76f8\u5173\u53c2\u6570\u4ee5\u53ca\u65f6\u949f\u7ed3\u6784\u4f53*/\nstruct sunxi_spdif {\n    struct sunxi_dma_params playback_dma_param;\n    struct sunxi_dma_params capture_dma_param;\n    struct sunxi_spdif_clk clk;\n};\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"DMIC"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"/* \u7528\u4e8e\u63cf\u8ff0\u5f15\u811a*/\ntypedef struct {\n    gpio_pin_t gpio;\n    int mux;\n} dmic_gpio;\n\n/* \u7528\u4e8e\u63cf\u8ff0DMIC \u5f15\u811a*/\ntypedef struct {\n    dmic_gpio clk;\n    dmic_gpio din0;\n    dmic_gpio din1;\n    dmic_gpio din2;\n    dmic_gpio din3;\n} dmic_gpio_t;\n\n/* \u7528\u4e8e\u63cf\u8ff0DMIC \u91c7\u6837\u7387*/\nstruct dmic_rate {\n    unsigned int samplerate;\n    unsigned int rate_bit;\n};\n\n/* \u5305\u542b\u4e86DMA \u76f8\u5173\u53c2\u6570\uff0c\u901a\u9053\u6570\u4ee5\u53ca\u65f6\u949f\u7ed3\u6784\u4f53*/\nstruct sunxi_dmic {\n    struct sunxi_dma_params capture_dma_param;\n    u32 chanmap;\n    struct sunxi_dmic_clk clk;\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"codec-\u7c7b\u7ed3\u6784\u4f53",children:"codec \u7c7b\u7ed3\u6784\u4f53"}),"\n",(0,l.jsx)(e.h4,{id:"audiocodec-1",children:"AudioCodec"}),"\n",(0,l.jsx)(e.p,{children:"AudioCodec \u6a21\u5757\u603b\u7ed3\u6784\u4f53\uff0c\u5305\u542b\u57fa\u7840\u5e73\u53f0\u8d44\u6e90\u3001\u7279\u5b9a\u529f\u80fd\u79c1\u6709\u53c2\u6570"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"struct sunxi_codec_info {\n    struct snd_codec *codec;\n\n    void *codec_base_addr;\n    struct sunxi_codec_clk clk;\n    struct sunxi_codec_param param;\n\n#ifdef CONFIG_SND_PLATFORM_SUNXI_MAD\n    int capturing;\n    struct sunxi_mad_priv mad_priv;\n#endif\n};\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u8f6f\u4ef6\u91cd\u8981\u63a5\u53e3",children:"\u8f6f\u4ef6\u91cd\u8981\u63a5\u53e3"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u4ec5\u8bf4\u660e\u81ea\u5b9a\u4e49\u8f6f\u4ef6\u63a5\u53e3\uff0calsa \u6846\u67b6\u5185\u90e8\u63a5\u53e3\u4e0d\u505a\u8bf4\u660e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"pcm-\u76f8\u5173\u63a5\u53e3",children:"pcm \u76f8\u5173\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h4,{id:"\u521b\u5efa-pcm-\u8bbe\u5907",children:"\u521b\u5efa pcm \u8bbe\u5907"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_pcm_new(struct snd_pcm *pcm)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u91ca\u653e-pcm-\u8bbe\u5907",children:"\u91ca\u653e pcm \u8bbe\u5907"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"void sunxi_pcm_free_dma_buffer(struct snd_pcm *pcm, int stream)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"stream: pcm \u6d41\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c: \u65e0"}),"\n",(0,l.jsx)(e.h4,{id:"\u5f00\u542f-pcm-\u8bbe\u5907",children:"\u5f00\u542f pcm \u8bbe\u5907"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_pcm_open(struct snd_pcm_substream *substream)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u8bbe\u7f6e-pcm-\u8bbe\u5907\u53c2\u6570",children:"\u8bbe\u7f6e pcm \u8bbe\u5907\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_pcm_hw_params(struct snd_pcm_substream *substream, struct snd_pcm_hw_params *params)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"params: pcm \u786c\u4ef6\u53c2\u6570"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u89e6\u53d1-pcm-\u8bbe\u5907\u8fd0\u884c",children:"\u89e6\u53d1 pcm \u8bbe\u5907\u8fd0\u884c"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_pcm_trigger(struct snd_pcm_substream *substream, int cmd)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"cmd: \u89e6\u53d1\u547d\u4ee4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u83b7\u53d6-pcm-\u8bbe\u5907\u5e27\u70b9",children:"\u83b7\u53d6 pcm \u8bbe\u5907\u5e27\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"snd_pcm_uframes_t snd_dmaengine_pcm_pointer(struct snd_pcm_substream *substream)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"snd_pcm_uframes_t\uff1a\u5f53\u524dDMA \u7f13\u51b2\u6307\u9488"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"platform-\u5c42\u63a5\u53e3",children:"Platform \u5c42\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h4,{id:"audiocodec\u63a5\u53e3",children:"AudioCodec\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h5,{id:"\u521d\u59cb\u5316-dma-\u53c2\u6570",children:"\u521d\u59cb\u5316 DMA \u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_cpudai_platform_probe(struct snd_platform *platform)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"platform: platform \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u66f4\u65b0\u8bbe\u7f6e-dma-\u53c2\u6570",children:"\u66f4\u65b0\u8bbe\u7f6e DMA \u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_cpudai_startup(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"i2spcm\u63a5\u53e3",children:"I2S/PCM\u63a5\u53e3"}),"\n",(0,l.jsx)(e.h5,{id:"i2spcm-\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f",children:"I2S/PCM \u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_suspend(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"i2spcm-\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u521d\u59cb\u5316\u6a21\u5757\u6062\u590d\u5bc4\u5b58\u5668",children:"I2S/PCM \u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u521d\u59cb\u5316\u6a21\u5757\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_resume(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757bclk-\u5206\u9891\u7cfb\u6570",children:"\u8bbe\u7f6e\u6a21\u5757BCLK \u5206\u9891\u7cfb\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_set_clkdiv(struct snd_dai *dai, int clk_id, int clk_div)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_div: clk \u5206\u9891\u7cfb\u6570"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f",children:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_set_sysclk(struct snd_dai *dai, int clk_id, unsigned int freq, int dir)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"freq: \u65f6\u949f\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"dir: \u65f6\u949f\u8f93\u51fa\u65b9\u5411"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757i2s-\u683c\u5f0f",children:"\u8bbe\u7f6e\u6a21\u5757I2S \u683c\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_set_fmt(struct snd_dai *dai, unsigned int fmt)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"fmt: I2S \u683c\u5f0f\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49",children:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_startup(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570",children:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_hw_params(struct snd_pcm_substream *substream, struct snd_pcm_hw_params *params, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"params: \u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6e05\u9664\u6a21\u5757fifo",children:"\u6e05\u9664\u6a21\u5757FIFO"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_prepare(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c",children:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_daudio_trigger(struct snd_pcm_substream *substream, int cmd, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"cmd: \u89e6\u53d1\u547d\u4ee4"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5173\u95ed\u5de5\u4f5c\u8d44\u6e90\u7ec4\u4ef6\u529f\u80fd\u7b49",children:"\u8bbe\u7f6e\u6a21\u5757\u5173\u95ed\u5de5\u4f5c\u8d44\u6e90(\u7ec4\u4ef6\u529f\u80fd\u7b49)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"void sunxi_daudio_shutdown(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"spdif-1",children:"SPDIF"}),"\n",(0,l.jsx)(e.h5,{id:"\u521d\u59cb\u5316cpu-dai-dma\u6a21\u5757\u5bc4\u5b58\u5668",children:"\u521d\u59cb\u5316CPU DAI (DMA\u3001\u6a21\u5757\u5bc4\u5b58\u5668)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_dai_probe(struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f",children:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_suspend(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u521d\u59cb\u5316\u6a21\u5757\u6062\u590d\u5bc4\u5b58\u5668",children:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u521d\u59cb\u5316\u6a21\u5757\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_resume(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5206\u9891\u7cfb\u6570",children:"\u8bbe\u7f6e\u6a21\u5757\u5206\u9891\u7cfb\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_set_clkdiv(struct snd_dai *dai, int clk_id, int clk_div)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_div: clk \u5206\u9891\u7cfb\u6570"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f-1",children:"\u8bbe\u7f6e\u6a21\u5757\u5de5\u4f5c\u65f6\u949f"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_set_sysclk(struct snd_dai *dai, int clk_id, unsigned int freq, int dir)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"freq: \u65f6\u949f\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"dir: \u65f6\u949f\u8f93\u51fa\u65b9\u5411"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49-1",children:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_startup(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-1",children:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_hw_params(struct snd_pcm_substream *substream, struct snd_pcm_hw_params *params, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"params: \u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6e05\u9664\u6a21\u5757fifo\u6e05\u9664\u4e2d\u65ad",children:"\u6e05\u9664\u6a21\u5757FIFO\uff0c\u6e05\u9664\u4e2d\u65ad"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_prepare(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-1",children:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_spdif_trigger(struct snd_pcm_substream *substream, int cmd, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"cmd: \u89e6\u53d1\u547d\u4ee4"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"dmic-1",children:"DMIC"}),"\n",(0,l.jsx)(e.h5,{id:"\u521d\u59cb\u5316cpu-dai-dma\u6a21\u5757\u5bc4\u5b58\u5668-1",children:"\u521d\u59cb\u5316CPU DAI (DMA\u3001\u6a21\u5757\u5bc4\u5b58\u5668)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_dai_probe(struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f-1",children:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_suspend(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u6062\u590d\u5bc4\u5b58\u5668",children:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_resume(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757-pll-clk",children:"\u8bbe\u7f6e\u6a21\u5757 PLL CLK"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_set_sysclk(struct snd_dai *dai, int clk_id, unsigned int freq, int dir)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"freq: \u65f6\u949f\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"dir: \u65f6\u949f\u8f93\u51fa\u65b9\u5411"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90dma-\u53c2\u6570\u7ec4\u4ef6\u529f\u80fd\u7b49-2",children:"\u8bbe\u7f6e\u6a21\u5757\u5f00\u542f\u5de5\u4f5c\u8d44\u6e90(DMA \u53c2\u6570\u3001\u7ec4\u4ef6\u529f\u80fd\u7b49)"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_startup(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-2",children:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_hw_params(struct snd_pcm_substream *substream, struct snd_pcm_hw_params *params, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"params: \u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6e05\u9664\u6a21\u5757-fifo\u6e05\u9664\u4e2d\u65ad",children:"\u6e05\u9664\u6a21\u5757 FIFO\uff0c\u6e05\u9664\u4e2d\u65ad"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_prepare(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-2",children:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_dmic_trigger(struct snd_pcm_substream *substream, int cmd, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"cmd: \u89e6\u53d1\u547d\u4ee4"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"codec-\u5c42",children:"Codec \u5c42"}),"\n",(0,l.jsx)(e.h4,{id:"audiocodecadcdac",children:"AudioCodec(ADC/DAC)"}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u4f11\u7720\u4fdd\u5b58\u5bc4\u5b58\u5668\u5173\u95ed\u65f6\u949f-2",children:"\u6a21\u5757\u4f11\u7720\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u3001\u5173\u95ed\u65f6\u949f\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_suspend(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6a21\u5757\u5524\u9192\u5f00\u542f\u65f6\u949f\u6062\u590d\u5bc4\u5b58\u5668-1",children:"\u6a21\u5757\u5524\u9192\uff08\u5f00\u542f\u65f6\u949f\u3001\u6062\u590d\u5bc4\u5b58\u5668\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_resume(struct pm_device *dev, suspend_mode_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dev: \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u4f11\u7720\u6a21\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u65f6\u949f",children:"\u8bbe\u7f6e\u6a21\u5757\u65f6\u949f"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_set_sysclk(struct snd_dai *dai, int clk_id, unsigned int freq, int dir)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"clk_id: clk \u8f85\u52a9\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"freq: \u65f6\u949f\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"dir: \u65f6\u949f\u8f93\u51fa\u65b9\u5411"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570-3",children:"\u8bbe\u7f6e\u6a21\u5757\u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_hw_params(struct snd_pcm_substream *substream, struct snd_pcm_hw_params *params, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"params: \u786c\u4ef6\u53c2\u6570"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u6e05\u9664\u6a21\u5757fifo\u6e05\u9664\u4e2d\u65ad-1",children:"\u6e05\u9664\u6a21\u5757FIFO\uff0c\u6e05\u9664\u4e2d\u65ad"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_prepare(struct snd_pcm_substream *substream, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"substream: pcm \u5b50\u6d41\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"dai: cpu dai \u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c-3",children:"\u89e6\u53d1\u6a21\u5757\u5de5\u4f5c"}),"\n",(0,l.jsx)(e.p,{children:"\u51fd\u6570\u539f\u578b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int sunxi_codec_trigger(struct snd_pcm_substream *substream, int cmd, struct snd_dai *dai)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u58f0\u5361\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"codec: codec \u8bbe\u5907\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"platform_type: platform \u5c42\u8bbe\u5907\u7c7b\u578b"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0: \u6210\u529f"}),"\n",(0,l.jsx)(e.li,{children:"\u5176\u4ed6:\u5931\u8d25"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u8f6f\u4ef6\u8c03\u8bd5\u63a5\u53e3",children:"\u8f6f\u4ef6\u8c03\u8bd5\u63a5\u53e3"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u6a21\u5757"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u63a5\u53e3"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u547d\u4ee4"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DMIC"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_dmic_dump"})}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_dmic_dump"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"SPDIF"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_spdif_dump"})}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_spdif_dump"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"DAUDIO"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_daudio_dump"})}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:(0,l.jsx)(e.code,{children:"cmd_daudio_dump"})})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u6a21\u5757\u4f7f\u7528",children:"\u6a21\u5757\u4f7f\u7528"}),"\n",(0,l.jsx)(e.p,{children:"\u4e00\u4e2a\u58f0\u5361\u7684\u7b80\u5355\u6d4b\u8bd5\uff0c\u5305\u542b\u4e24\u90e8\u5206\uff0c\u5206\u522b\u4e3a\u58f0\u5361\u7684\u63a7\u4ef6\u8bbe\u7f6e\u53ca\u97f3\u9891\u6d4b\u8bd5\u5de5\u5177\u7684\u4f7f\u7528\u3002\u672c\u7ae0\u8282\u5c06\u4ece\u4ee5\u4e0b 4 \u4e2a\u901a\u7528\u5c0f\u8282\u548c 1 \u4e2a\u5916\u6302 codec \u5c0f\u8282\u4ecb\u7ecd\u58f0\u5361\u5982\u4f55\u4f7f\u7528\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"menuconfig \u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"\u58f0\u5361\u8bbe\u5907\u67e5\u770b"}),"\n",(0,l.jsx)(e.li,{children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsx)(e.li,{children:"\u58f0\u5361\u6d4b\u8bd5\u5de5\u5177\u4f7f\u7528"}),"\n",(0,l.jsx)(e.li,{children:"I2S \u5916\u6302 CODEC"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"menuconfig-\u914d\u7f6e",children:"menuconfig \u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u8fdb\u5165menuconfig \u754c\u9762\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u8fdb\u5165RTOS \u76ee\u5f55\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\nmrtos_menuconfig\nDrivers Options \u2011\u2011\u2011>\n    soc related device drivers \u2011\u2011\u2011>\n        SOUND Devices \u2011\u2011\u2011>\n            [*] Sound card support\n                AW Sound Compenents \u2011\u2011\u2011>\n                    Allwinner alsa library (tiny alsa library) \u2011\u2011\u2011>\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd8\u63d0\u4f9b aw\u2011tiny\u2011alsa\u2011lib, \u5305\u542b\u4e86 alsa\u2011lib \u4e3b\u8981\u7684\u63a5\u53e3\uff0c\u6ca1\u6709\u4efb\u4f55\u63d2\u4ef6\uff0c\u4f5c\u7528\u7c7b\u4f3c\u4e8e tinyalsa\u3002aw\u2011tiny\u2011alsa\u2011lib \u914d\u7f6e\u65b9\u6cd5\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Drivers Options \u2011\u2011\u2011>\n    soc related device drivers \u2011\u2011\u2011>\n        SOUND Devices \u2011\u2011\u2011>\n            [*] Sound card support\n                AW Sound Compenents \u2011\u2011\u2011>\n                    Allwinner alsa library (tiny alsa library) \u2011\u2011\u2011>\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u97f3\u9891\u5de5\u5177 aw\u2011alsa\u2011utils \u76f8\u5173\u914d\u7f6e\u9879\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"Drivers Options \u2011\u2011\u2011>\n    soc related device drivers \u2011\u2011\u2011>\n        SOUND Devices \u2011\u2011\u2011>\n            [*] Sound card support\n                AW Sound Compenents \u2011\u2011\u2011>\n                    [*] alsa library utils select\n                    [*] alsa library utils amixer\n                    [*] alsa library utils aplay\n                    [*] alsa library utils arecord\n                    [ ] alsa library utils aloop\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u8bbe\u5907\u67e5\u770b",children:"\u58f0\u5361\u8bbe\u5907\u67e5\u770b"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u7cfb\u7edf\u6302\u8f7d\u4e0a\u7684\u58f0\u5361"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# amixer -l\n============= Sound Card list =============\ncard_num card_name\n    0   audiocodecdac\n    1   audiocodecadc\n    2   snddaudio0\n    3   snddmic\n    4   sndspdif\n"})}),"\n",(0,l.jsxs)(e.p,{children:["?> \u53ef\u901a\u8fc7\u5728 ",(0,l.jsx)(e.code,{children:"card_default.c"})," \u4fee\u6539 \u201ccard_name\u201d \u53d8\u91cf\uff0c\u8bbe\u5b9a\u58f0\u5361\u540d\u79f0\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e",children:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u58f0\u5361\u914d\u7f6e\u4f4d\u4e8e\u4ee3\u7801\u4e2d, \u8def\u5f84\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u6bcf\u4e2a\u65b9\u6848\u76ee\u5f55\u4e0b\u9762\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"projects/\u65b9\u6848/src/card_default.c\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"snd_card_register"})," \u51fd\u6570\u8fdb\u884c\u58f0\u5361\u7684\u6ce8\u518c"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int snd_card_register(const char *name, struct snd_codec *codec, int platform_type)\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u8868\u793a\u58f0\u5361\u7684\u540d\u5b57\uff0caw\u2011alsa\u2011lib\u4e2d\u90fd\u9700\u8981\u901a\u8fc7\u8be5\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684\u58f0\u5361"}),"\n",(0,l.jsx)(e.li,{children:"codec: codec\u7ed3\u6784\u4f53\uff0c\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u7684codec\u8fdb\u884c\u914d\u7f6e\uff0c\u5982R128\u7684audiocodec,\u4f7f\u7528sun20iw2_codec;\u5982ac108,\u4f7f\u7528 ac108_codec"}),"\n",(0,l.jsx)(e.li,{children:"platform_type: \u4e0elinux\u4e2dASOC\u6846\u67b6\u7c7b\u4f3c\uff0c\u4e5f\u9700\u8981\u6307\u5b9a\u4f7f\u7528\u54ea\u79cd\u7c7b\u578b\u7684platform,\u5982CPUDAI, DAUDIO\u7b49"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4f8b\u5982\u6ce8\u518c AC108 \u58f0\u5361"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'snd_card_register("ac108", &ac108_codec, SND_PLATFORM_TYPE_DAUDIO1);\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u63a7\u4ef6-4",children:"\u58f0\u5361\u63a7\u4ef6"}),"\n",(0,l.jsx)(e.h4,{id:"alsa-utils-\u5de5\u5177",children:"alsa-utils \u5de5\u5177"}),"\n",(0,l.jsx)(e.p,{children:"alsa-utils \u4e3b\u8981\u63d0\u4f9b\u4e09\u4e2a\u5de5\u5177\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"aplay: \u7528\u4e8e\u5b8c\u6210\u4e0e\u64ad\u653e\u76f8\u5173\u7684\u64cd\u4f5c\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"arecord: \u7528\u4e8e\u5b8c\u6210\u4e0e\u5f55\u97f3\u76f8\u5173\u7684\u64cd\u4f5c\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"amixer: \u7528\u4e8e\u8bbe\u7f6e\u76f8\u5173\u53c2\u6570\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"aplay",children:"APLAY"}),"\n",(0,l.jsx)(e.p,{children:"\u8f93\u5165aplay \u6216aplay -h \u53ef\u6253\u5370\u51fa\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# aplay\n\nUsage: aplay [OPTION]... [FILE]...\n\n-h, --help help\n    --version print current version\n-l, --list-devices list all soundcards and digital audio devices\n-L, --list-pcms list device names\n-D, --device=NAME select PCM by name\n-q, --quiet quiet mode\n-t, --file-type TYPE file type (voc, wav, raw or au)\n-c, --channels=# channels\n-f, --format=FORMAT sample format (case insensitive)\n-r, --rate=# sample rate\n-d, --duration=# interrupt after # seconds\n...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u67e5\u770b\u53ef\u4ee5\u7528\u4e8e\u64ad\u653e\u7684\u58f0\u5361"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# aplay -l\n**** List of PLAYBACK Hardware Devices ****\ncard 0: audiocodec [audiocodec], device 0: soc@03000000:codec_plat-sunxi-snd-codec sunxisnd-codec-0 []\n    Subdevices: 1/1\n    Subdevice #0: subdevice #0\ncard 2: snddaudio0 [snddaudio0], device 0: 2032000.daudio0_plat-snd-soc-dummy-dai snd-socdummy-dai-0 []\n    Subdevices: 1/1\n    Subdevice #0: subdevice #0\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7528\u58f0\u53610 \u8bbe\u59070 \u64ad\u653etest.wav(\u7528 ctrl c \u9000\u51fa)"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# aplay -D hw:0,0 test.wav\nPlaying WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 8000 Hz, Mono\n\n^C Aborted by signal Interrupt...\n"})}),"\n",(0,l.jsx)(e.h5,{id:"arecord",children:"ARECORD"}),"\n",(0,l.jsx)(e.p,{children:"\u8f93\u5165arecord \u6216arecord -h \u53ef\u6253\u5370\u51fa\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# arecord\n\nUsage: arecord [OPTION]... [FILE]...\n\n-h, --help help\n    --version print current version\n-l, --list-devices list all soundcards and digital audio devices\n-L, --list-pcms list device names\n-D, --device=NAME select PCM by name\n-q, --quiet quiet mode\n-t, --file-type TYPE file type (voc, wav, raw or au)\n-c, --channels=# channels\n-f, --format=FORMAT sample format (case insensitive)\n-r, --rate=# sample rate\n-d, --duration=# interrupt after # seconds\n-M, --mmap mmap stream\n-N, --nonblock nonblocking mode\n-F, --period-time=# distance between interrupts is # microseconds\n-B, --buffer-time=# buffer duration is # microseconds\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u67e5\u770b\u53ef\u4ee5\u7528\u4e8e\u5f55\u97f3\u7684\u58f0\u5361"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# arecord -l\n\n**** List of CAPTURE Hardware Devices ****\ncard 0: audiocodec [audiocodec], device 0: soc@03000000:codec_plat-sunxi-snd-codec sunxisnd-codec-0 []\n    Subdevices: 1/1\n    Subdevice #0: subdevice #0\ncard 1: snddmic [snddmic], device 0: 2031000.dmic_plat-snd-soc-dummy-dai snd-soc-dummy-dai-0 []\n    Subdevices: 1/1\n    Subdevice #0: subdevice #0\ncard 2: snddaudio0 [snddaudio0], device 0: 2032000.daudio0_plat-snd-soc-dummy-dai snd-socdummy-dai-0 []\n    Subdevices: 1/1\n    Subdevice #0: subdevice #0\n...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7528\u58f0\u53611 \u7684\u8bbe\u59070 \u8fdb\u884c\u91c7\u6837\u4f4d\u6570\u4e3a16 \u7684\u5f55\u97f3\uff0c\u5e76\u628a\u6570\u636e\u4fdd\u5b58\u5728test.wav(\u7528ctrl c \u9000\u51fa)"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# arecord -D hw:1,0 -f S16_LE test.wav\n\nRecording WAVE 'test.wav' : Signed 16 bit Little Endian, Rate 8000 Hz, Mono\n\n^C Aborted by signal Interrupt...\n"})}),"\n",(0,l.jsx)(e.h5,{id:"amixer",children:"AMIXER"}),"\n",(0,l.jsx)(e.p,{children:"\u8f93\u5165amixer \u6216amixer -h \u53ef\u6253\u5370\u51fa\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# amixer -h\n\nUsage: amixer <options> [command]\n\nAvailable options:\n-h,--help this help\n-c,--card N select the card\n-D,--device N select the device, default 'default'\n-d,--debug debug mode\n-n,--nocheck do not perform range checking\n-v,--version print version of this program\n-q,--quiet be quiet\n-i,--inactive show also inactive controls\n-a,--abstract L select abstraction level (none or basic)\n-s,--stdin Read and execute commands from stdin sequentially\n-R,--raw-volume Use the raw value (default)\n-M,--mapped-volume Use the mapped volume\n\nAvailable commands:\nscontrols show all mixer simple controls\nscontents show contents of all mixer simple controls (default command)\nsset sID P set contents for one mixer simple control\nsget sID get contents for one mixer simple control\ncontrols show all controls for given card\ncontents show contents of all controls for given card\ncset cID P set control contents for one control\ncget cID get control contents for one control\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u67e5\u770b\u58f0\u5361 1 \u7684\u63a7\u4ef6"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# amixer -c 1 scontrols\n\nSimple mixer control 'L0 volume',0\nSimple mixer control 'L1 volume',0\nSimple mixer control 'L2 volume',0\nSimple mixer control 'L3 volume',0\nSimple mixer control 'R0 volume',0\nSimple mixer control 'R1 volume',0\nSimple mixer control 'R2 volume',0\nSimple mixer control 'R3 volume',0\nSimple mixer control 'rx sync mode',0\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u67e5\u770b\u58f0\u5361 1 \u7684\u63a7\u4ef6\u7684\u5177\u4f53\u914d\u7f6e"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"~# amixer -c 1 scontents\nSimple mixer control 'L0 volume',0\n    Capabilities: volume volume-joined\n    Playback channels: Mono\n    Capture channels: Mono\n    Limits: 0 - 255\n    Mono: 176 [69%]\nSimple mixer control 'L1 volume',0\n    Capabilities: volume volume-joined\n    Playback channels: Mono\n    Capture channels: Mono\n    Limits: 0 - 255\n    Mono: 176 [69%]\nSimple mixer control 'L2 volume',0\n    Capabilities: volume volume-joined\n    Playback channels: Mono\n    Capture channels: Mono\n    Limits: 0 - 255\n    Mono: 176 [69%]\n...\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8bbe\u7f6e\u58f0\u5361 1 \u7b2c\u4e00\u4e2a\u63a7\u4ef6\u7684\u503c"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# \u62ff\u5230\u58f0\u53611\u6240\u6709\u63a7\u4ef6\n~# amixer -c 1 controls\nnumid=2,iface=MIXER,name='L0 volume'\nnumid=4,iface=MIXER,name='L1 volume'\nnumid=6,iface=MIXER,name='L2 volume'\nnumid=8,iface=MIXER,name='L3 volume'\nnumid=3,iface=MIXER,name='R0 volume'\nnumid=5,iface=MIXER,name='R1 volume'\nnumid=7,iface=MIXER,name='R2 volume'\nnumid=9,iface=MIXER,name='R3 volume'\nnumid=1,iface=MIXER,name='rx sync mode'\n\n# \u62ff\u5230\u63a7\u4ef6\u5185\u5bb9\n~# amixer cget numid=2,iface=MIXER,name='L0 volume'\nnumid=2,iface=MIXER,name='rx sync mode'\n    ; type=ENUMERATED,access=rw------,values=1,items=2\n    ; Item #0 'Off'\n    ; Item #1 'On'\n    : values=0\n\n# \u8bbe\u7f6e\u63a7\u4ef6\u503c\n~# amixer cset numid=2,iface=MIXER,name='L0 volume' 1\nnumid=2,iface=MIXER,name='rx sync mode'\n    ; type=ENUMERATED,access=rw------,values=1,items=2\n    ; Item #0 'Off'\n    ; Item #1 'On'\n    : values=1\n"})}),"\n",(0,l.jsx)(e.h3,{id:"awalsalib-\u63d2\u4ef6\u914d\u7f6e",children:"aw\u2011alsa\u2011lib \u63d2\u4ef6\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"aw\u2011alsa\u2011lib \u4e0e linux \u4e0a alsa\u2011lib \u4e00\u6837\u652f\u6301\u591a\u79cd\u63d2\u4ef6, \u63d2\u4ef6\u7684\u9009\u62e9\u3001\u4f7f\u7528, \u9700\u8981\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u914d\u7f6e, \u8def\u5f84\u5982\u4e0b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"\u5728\u6bcf\u4e2a\u65b9\u6848\u76ee\u5f55\u4e0b\u9762\uff1a\nprojects/\u65b9\u6848/src/alsa_config.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u6839\u636e\u63d2\u4ef6\u7c7b\u578b\u8fdb\u884c\u7b80\u5355\u8bf4\u660e"}),"\n",(0,l.jsx)(e.h4,{id:"hw-\u63d2\u4ef6",children:"hw \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_hw_config_t snd_pcm_hw_config = {\n    .card_name = "audiocodec",\n    .device_num = 0,\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"card_name: \u58f0\u5361\u540d\u79f0,\u9700\u8981\u4e0ecard_default.c\u4e2d\u6ce8\u518c\u58f0\u5361\u65f6\u6307\u5b9a\u7684\u540d\u79f0\u4e00\u81f4"}),"\n",(0,l.jsx)(e.li,{children:"device_num: pcm\u8bbe\u5907\u5e8f\u53f7\uff0c\u76ee\u524d\u4ec5\u652f\u6301\u4e00\u4e2apcm\u8bbe\u5907\uff0c\u6240\u4ee5\u53ea\u80fd\u4e3a0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"dmix-\u63d2\u4ef6",children:"dmix \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_dmix_config_t snd_pcm_dmix_config = {\n    .type = "dmix",\n    .ipc_key = 2222,\n    .slave = {\n        .pcm = "hw:audiocodec",\n        .format = SND_PCM_FORMAT_S16_LE,\n        .rate = 48000,\n        .channels = 1,\n        .period_size = 1024,\n        .periods = 4,\n    },\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bdmix"}),"\n",(0,l.jsx)(e.li,{children:"ipc_key: \u9700\u8981\u8fdb\u884c\u6df7\u97f3\u7684\u5747\u8981\u6307\u5b9a\u540c\u4e00ipc_key"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0,\u5fc5\u987b\u4e3ahw\u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"format: \u91c7\u6837\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"rate: \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"period_size: period_size\u5927\u5c0f,\u51b3\u5b9a\u4e2d\u65ad\u89e6\u53d1\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"periods: periods\u5927\u5c0f,\u51b3\u5b9abuffer size\u5927\u5c0f"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"dsnoop-\u63d2\u4ef6",children:"dsnoop \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_dsnoop_config_t snd_pcm_dsnoop_ref_config = {\n    .type = "dsnoop",\n    .ipc_key = 1114,\n    .slave = {\n        .pcm = "hw:ac107",\n        .format = SND_PCM_FORMAT_S16_LE,\n        .rate = 16000,\n        .channels = 1,\n        .period_size = 1024,\n        .periods = 4,\n    },\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578b dsnoop"}),"\n",(0,l.jsx)(e.li,{children:"ipc_key: \u9700\u8981\u8fdb\u884c\u6df7\u97f3\u7684\u5747\u8981\u6307\u5b9a\u540c\u4e00ipc_key"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0,\u5fc5\u987b\u4e3ahw\u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"format: \u91c7\u6837\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"rate: \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"period_size: period_size\u5927\u5c0f,\u51b3\u5b9a\u4e2d\u65ad\u89e6\u53d1\u9891\u7387"}),"\n",(0,l.jsx)(e.li,{children:"periods: periods\u5927\u5c0f,\u51b3\u5b9abuffer size\u5927\u5c0f"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"softvol-\u63d2\u4ef6",children:"softvol \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_softvol_config_t snd_pcm_softvol_config = {\n    .type = "softvol",\n    .slave = {\n        .pcm = "PlaybackPlug",\n    },\n    .control = {\n        .control_name = "Soft Volume Master",\n        .card_name = "audiocodec",\n    },\n    .min_dB = \u201151.0,\n    .max_dB = 0.0,\n    .resolution = 256,\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bsoftvol"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0,\u5fc5\u987b\u4e3ahw\u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"control: \u63a7\u4ef6\u4fe1"}),"\n",(0,l.jsx)(e.li,{children:"control_name: \u63a7\u4ef6\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"card_name: \u58f0\u5361\u540d\u79f0\uff0c\u6307\u5b9a\u63a7\u4ef6\u4f4d\u4e8e\u54ea\u4e2a\u58f0\u5361\u4e2d"}),"\n",(0,l.jsx)(e.li,{children:"min_dB: \u6700\u5c0f\u8870\u51cf"}),"\n",(0,l.jsx)(e.li,{children:"max_dB: \u6700\u5927\u8870\u51cf"}),"\n",(0,l.jsx)(e.li,{children:"resolution: \u7cbe\u5ea6"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6ce8\u610f, \u5728\u7b2c\u4e00\u6b21\u4f7f\u7528 softvol \u63d2\u4ef6\u8fdb\u884c\u64ad\u653e\u65f6\u624d\u4f1a\u751f\u6210\u8be5\u63a7\u4ef6; \u5982\u679c\u60f3\u8981\u5728\u58f0\u5361\u9a71\u52a8\u52a0\u8f7d\u7684\u65f6\u5019\u5c31\u6dfb\u52a0\u8be5\u63a7\u4ef6\uff0c\u8bf7\u4fee\u6539\u5bf9\u5e94\u7684 codec \u6587\u4ef6\uff0c\u4f8b\u5982 ",(0,l.jsx)(e.code,{children:'SND_CTL_KCONTROL_USER("Soft Volume Master", 255, 0, 255)'})]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"asym-\u63d2\u4ef6",children:"asym \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_asym_config_t snd_pcm_asym_config = {\n    .type = "asym",\n    .playback_pcm = "PlaybackSoftVol",\n    .capture_pcm = "CaptureDsnoop",\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bsoftvol"}),"\n",(0,l.jsx)(e.li,{children:"playback_pcm: \u6307\u5b9a\u64ad\u653e\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"capture_pcm: \u6307\u5b9a\u5f55\u97f3\u8bbe\u5907\u7684\u540d\u79f0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"route-\u63d2\u4ef6",children:"route \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_route_config_t snd_pcm_route_config = {\n    .type = "route",\n    .slave = {\n        .pcm = "PlaybackRate",\n        .channels = 1,\n    },\n    .ttable = {\n        {0, 0, 0.5},\n        {1, 0, 0.5},\n        TTABLE_CONFIG_END\n    },\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578broute"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"ttable: \u5404\u901a\u9053\u914d\u7f6e,\u4e0a\u9762\u7684\u914d\u7f6e\u8868\u793a\u5c06\u8f93\u5165\u7684\u4e24\u58f0\u9053\u6570\u636e\u5206\u522b\u4f5c0.5\u500d\u8870\u51cf\uff0c\u7136\u540e\u5408\u6210\u5355\u58f0\u9053\u6570\u636e"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e00\u4e2a\u503c\u8868\u793a\u8f93\u5165\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e8c\u4e2a\u503c\u8868\u793a\u8f93\u51fa\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e09\u4e2a\u503c\u8868\u793a\u8870\u51cf\u503c"}),"\n",(0,l.jsx)(e.li,{children:"ttable\u914d\u7f6e\u6700\u540e\u8bf7\u52a1\u5fc5\u6dfb\u52a0TTABLE_CONFIG_END,\u8868\u793a\u914d\u7f6e\u7ed3\u675f"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"rate-\u63d2\u4ef6",children:"rate \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_rate_config_t snd_pcm_rate_config = {\n    .type = "rate",\n    .slave = {\n        .pcm = "PlaybackDmix",\n        .format = SND_PCM_FORMAT_S16_LE,\n        .rate = 48000,\n    },\n    .converter = "speexrate",\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578brate"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"format \u91c7\u6837\u7cbe\u5ea6"}),"\n",(0,l.jsx)(e.li,{children:"rate \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"converter \u6307\u5b9a\u4f7f\u7528\u7684\u91cd\u91c7\u6837\u7b97\u6cd5,\u5efa\u8bae\u4f7f\u7528speexrate"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"file-\u63d2\u4ef6",children:"file \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_file_config_t snd_pcm_file_cap_config = {\n    .type = "file",\n    .slave = {\n        .pcm = "CaptureDsnoop",\n    },\n    .format = "raw",\n    .mode = "adb",\n    .port = 20191,\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bfile"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"format: \u97f3\u9891\u683c\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301raw"}),"\n",(0,l.jsx)(e.li,{children:"mode: file\u63d2\u4ef6\u4fdd\u5b58\u6570\u636e\u7684\u6a21\u5f0f\uff0c\u76ee\u524d\u4ec5\u652f\u6301adb"}),"\n",(0,l.jsx)(e.li,{children:"port: \u7aef\u53e3\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"server: \u670d\u52a1\u5668\u7aefip\uff0c\u5f53mode\u4e3anetwork\u65f6\u624d\u6709\u6548"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"multi-\u63d2\u4ef6",children:"multi \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_multi_config_t snd_pcm_3mic_1ref_config = {\n    .type = "multi",\n    .slaves = {\n        { "a", "CaptureDsnoop3Mic", 3 },\n        { "b", "CaptureDsnoopRef", 1 },\n        { NULL, NULL, \u20111 },\n    },\n    .bindings = {\n        { 0, "a", 0 },\n        { 1, "a", 1 },\n        { 2, "a", 2 },\n        { 3, "b", 0 },\n        { \u20111, NULL, \u20111 },\n    },\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bmulti"}),"\n",(0,l.jsx)(e.li,{children:"slaves: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f,\u4e0a\u8ff0\u914d\u7f6e\u8868\u793a\u540c\u65f6\u5bf9a,b\u4e24\u4e2apcm\u8bbe\u5907\u8fdb\u884c\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793apcm\u8bbe\u5907\u7684\u522b\u540d,\u65b9\u4fbf\u540e\u7eedbingdings\u57df\u6307\u5b9a\u4e0d\u540c\u7684pcm\u8bbe\u5907"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793apcm\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u901a\u9053\u603b\u6570"}),"\n",(0,l.jsxs)(e.li,{children:["\u6ce8\u610f\u8bf7\u5728\u914d\u7f6e\u6700\u540e\u6dfb\u52a0",(0,l.jsx)(e.code,{children:"{ NULL, NULL, -1 }"}),",\u8868\u793a\u7ed3\u675f"]}),"\n",(0,l.jsx)(e.li,{children:"bindings: \u6307\u5b9a\u591a\u4e2a\u58f0\u5361\u7684\u901a\u9053\u6570\u6392\u5217,\u4e0a\u8ff0\u914d\u7f6e\u8868\u793aa\u58f0\u5361\u76843\u901a\u9053\u5206\u522b\u4f5c\u4e3a\u901a\u90530,1,2\u8f93\u51fa,b\u58f0\u5361\u7684\u901a\u90530\u4f5c\u4e3a\u901a\u90533\u8f93\u51fa"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u5f55\u97f3\u8f93\u51fa\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u6307\u5b9a\u58f0\u5361\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsxs)(e.li,{children:["\u6ce8\u610f\u8bf7\u5728\u914d\u7f6e\u6700\u540e\u6dfb\u52a0",(0,l.jsx)(e.code,{children:"{ -1, NULL, -1 }"}),",\u8868\u793a\u7ed3\u675f"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"plug-\u63d2\u4ef6",children:"plug \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static const snd_pcm_plug_config_t snd_pcm_plug_config = {\n    .type = "plug",\n    .slave = {\n        .pcm = "PlaybackDmix",\n        .format = SND_PCM_FORMAT_S16_LE,\n        .channels = 1,\n        .rate = 48000,\n    },\n    .rate_converter = "speexrate",\n    .route_policy = "default",\n    .ttable = {\n        TTABLE_CONFIG_END\n    },\n};\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"type: \u63d2\u4ef6\u7c7b\u578bplug"}),"\n",(0,l.jsx)(e.li,{children:"slave: pcm\u4ece\u8bbe\u5907\u7684\u4fe1\u606f"}),"\n",(0,l.jsx)(e.li,{children:"pcm: pcm\u8bbe\u5907\u7684\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"format: \u91c7\u6837\u683c\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"rate: \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"rate_converter: \u6307\u5b9a\u4f7f\u7528\u7684\u91cd\u91c7\u6837\u7b97\u6cd5\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"route_policy: \u4f7f\u7528route\u63d2\u4ef6\u65f6\u7684\u7b56\u7565,\u53ef\u9009average,copy,duplicate,default\u5373\u4e3acopy"}),"\n",(0,l.jsx)(e.li,{children:"ttable: \u5404\u901a\u9053\u914d\u7f6e,\u4e0a\u9762\u7684\u914d\u7f6e\u8868\u793a\u5c06\u8f93\u5165\u7684\u4e24\u58f0\u9053\u6570\u636e\u5206\u522b\u4f5c0.5\u500d\u8870\u51cf\uff0c\u7136\u540e\u5408\u6210\u5355\u58f0\u9053\u6570\u636e"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e00\u4e2a\u503c\u8868\u793a\u8f93\u5165\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e8c\u4e2a\u503c\u8868\u793a\u8f93\u51fa\u7684\u901a\u9053\u5e8f\u53f7"}),"\n",(0,l.jsx)(e.li,{children:"\u7b2c\u4e09\u4e2a\u503c\u8868\u793a\u8870\u51cf\u503c"}),"\n",(0,l.jsx)(e.li,{children:"ttable\u914d\u7f6e\u6700\u540e\u8bf7\u52a1\u5fc5\u6dfb\u52a0TTABLE_CONFIG_END,\u8868\u793a\u914d\u7f6e\u7ed3\u675f"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"i2s-\u5916\u6302codec",children:"I2S \u5916\u6302CODEC"}),"\n",(0,l.jsx)(e.h4,{id:"\u786c\u4ef6\u8fde\u63a5",children:"\u786c\u4ef6\u8fde\u63a5"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u4fdd\u5916\u90e8CODEC \u82af\u7247\u4e0eSoC I2S \u63a5\u53e3\u6b63\u786e\u8fde\u63a5\uff0c\u5177\u4f53\u786e\u8ba4\u8fde\u63a5\u5982\u4e0b\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"LRCK, BCLK: \u786e\u8ba4\u8be5\u4e24\u7ebf\u662f\u5426\u8fde\u63a5\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"MCLK: \u786e\u8ba4\u5916\u90e8CODEC \u662f\u5426\u9700\u8981MCLK\uff0c\u82e5\u9700\u8981\uff0c\u5219\u786e\u8ba4MCLK \u4fe1\u53f7\u7ebf\u8fde\u63a5\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"DIN: \u786e\u8ba4\u5916\u90e8CODEC \u662f\u5426\u9700\u8981\u5f55\u97f3\u529f\u80fd\uff0c\u82e5\u9700\u8981\uff0c\u5219\u786e\u8ba4DIN \u4fe1\u53f7\u7ebf\u8fde\u63a5\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"DOUT: \u786e\u8ba4\u5916\u90e8 CODEC \u662f\u5426\u9700\u8981\u64ad\u653e\u529f\u80fd\uff0c\u82e5\u9700\u8981\uff0c\u5219\u786e\u8ba4 DOUT \u4fe1\u53f7\u7ebf\u8fde\u63a5\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u83b7\u53d6\u5916\u90e8-codec-i2s-\u534f\u8bae\u683c\u5f0f",children:"\u83b7\u53d6\u5916\u90e8 CODEC I2S \u534f\u8bae\u683c\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"\u786e\u8ba4\u5916\u90e8 CODEC I2S \u534f\u8bae\u683c\u5f0f\u5982\u4e0b\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u529f\u80fd\u9700\u6c42\uff1a\u53ea\u5f55\u97f3\u3001\u53ea\u64ad\u653e\u3001\u5f55\u97f3\u64ad\u653e\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u5f15\u811a\u786e\u8ba4\uff1aI2S \u5e8f\u53f7\u3001data \u5f15\u811a\u5e8f\u53f7\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u4e3b\u4ece\u6a21\u5f0f\uff1aSoC \u4f5c\u4e3b\uff08\u7531 SoC \u63d0\u4f9b BCLK,LRCK\uff09\u3001\u5916\u6302 CODEC \u4f5c\u4e3b\uff08\u7531\u5916\u6302 CODEC\u63d0\u4f9b BCLK,LRCK\uff09\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"I2S \u6a21\u5f0f\uff1a\u6807\u51c6 I2S\u3001I2S_L\u3001I2S_R\u3001DSP_A\u3001DSP_B\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"LRCK \u4fe1\u53f7\u662f\u5426\u7ffb\u8f6c\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"BCLK \u4fe1\u53f7\u662f\u5426\u7ffb\u8f6c\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"MCLK \u4fe1\u53f7\uff1aMCLK \u9891\u7387\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"slot \u4e2a\u6570\uff1a\u6700\u9ad8\u8981\u652f\u6301\u591a\u5c11 slot\uff08\u97f3\u9891\u901a\u9053\u6570\uff09\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"slot \u5bbd\u5ea6\uff1a\u6700\u9ad8\u8981\u652f\u6301\u591a\u5c11 slot \u5bbd\u5ea6\uff08\u97f3\u9891\u91c7\u6837\u4f4d\u6df1\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b \u201c\u6a21\u5757\u4ecb\u7ecd\u201d \u8bf4\u660e\u7684 \u201cAHUB\u201d \u6216 \u201cI2S/PCM\u201d -> \u201csys_conf \u914d\u7f6e\u201d \u4e2d\u7684\u914d\u7f6e\u9879\u8bf4\u660e\uff0c\u6839\u636e I2S \u534f\u8bae\u683c\u5f0f\u8fdb\u884c\u914d\u7f6e\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"audiosystem",children:"AudioSystem"}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e\u591a\u6838\u5f02\u6784\u82af\u7247\uff0c\u5305\u542b RV/M33/DSP \u4e09\u4e2a\u6838\uff0c\u5404\u81ea\u8fd0\u884c\u8fd9\u4e00\u4e2a RTOS\uff0c\u4ed6\u4eec\u65e0\u6cd5\u540c\u65f6\u8bbf\u95ee\u64cd\u4f5c\u540c\u4e00\u4e2a\u97f3\u9891\u786c\u4ef6\u63a5\u53e3\uff0c\u56e0\u6b64\u8f6f\u4ef6\u4e0a\u4f1a\u5b9e\u73b0\u8de8\u6838\u97f3\u9891\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5e76\u4e14\u4f1a\u5c4f\u853d\u5e95\u5c42\u5b9e\u73b0\u7ec6\u8282\uff0c\u8ba9\u5e94\u7528\u65e0\u611f\u77e5\uff0c\u8fd9\u5957\u8f6f\u4ef6\u6211\u4eec\u79f0\u4e4b\u4e3a AudioSystem\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"audiosystem-\u8f6f\u4ef6\u6846\u67b6",children:"AudioSystem \u8f6f\u4ef6\u6846\u67b6"}),"\n",(0,l.jsx)(e.p,{children:"\u4efb\u610f\u6838\u4e0a\u90fd\u80fd\u8fd0\u884c AudioSystem, \u56e0\u6b64\u53ef\u4ee5\u63d0\u4f9b\u7edf\u4e00\u7684\u97f3\u9891\u8f6f\u4ef6\u63a5\u53e3\uff0c\u800c AudioSystem \u91cc\u9762\u4f1a\u6839\u636e\u5b9e\u9645\u914d\u7f6e\u5bf9\u63a5\u5230\u5177\u4f53\u97f3\u9891\u786c\u4ef6\u63a5\u53e3\uff0c\u6216\u8005\u8de8\u6838\u97f3\u9891\u63a5\u53e3\u3002\u4e3b\u8981\u6846\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/developer-guide/part1/chapter3/image3.png",alt:""})}),"\n",(0,l.jsx)(e.p,{children:"AudioSystem \u53ef\u5b9e\u73b0\u7684\u529f\u80fd\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"AudioTrack\uff0c\u652f\u6301\u591a\u5b9e\u4f8b\u64ad\u653e"}),"\n",(0,l.jsx)(e.li,{children:"AudioRecord\uff0c\u652f\u6301\u591a\u5b9e\u4f8b\u5f55\u97f3"}),"\n",(0,l.jsx)(e.li,{children:"audio_plugin, \u652f\u6301\u8f6f\u4ef6\u97f3\u91cf\u3001\u91cd\u91c7\u6837\u3001\u7cbe\u5ea6\u8f6c\u6362\u3001\u901a\u9053\u6620\u5c04\u7b49\u529f\u80fd"}),"\n",(0,l.jsx)(e.li,{children:"audio_hw, \u5411\u4e0a\u7ed9 AudioTrack/AudioRecord \u63d0\u4f9b\u901a\u7528\u7684\u6570\u636e\u8bfb\u5199\u63a5\u53e3\uff0c\u5411\u4e0b\u53ef\u5bf9\u63a5\u672c\u5730\u58f0\u5361\u3001\u8de8\u6838\u97f3\u9891\u63a5\u53e3\uff0c\u751a\u81f3\u662f BT a2dp source \u7b49\u529f\u80fd\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/developer-guide/part1/chapter3/image4.png",alt:""})}),"\n",(0,l.jsx)(e.h3,{id:"\u8f6f\u4ef6\u914d\u7f6e",children:"\u8f6f\u4ef6\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"System components \u2011\u2011\u2011>\n    aw components \u2011\u2011\u2011>\n    AudioSystem Support \u2011\u2011\u2011>\n        [*] AW Audio System Support\n        [*] Audio HW Support\n        [*] Audio HW Support PCM\n        [ ] Audio HW Support Multi PCM\n        [ ] Audio HW Support AMP\n        [ ] Audio HW Support BT\n        [*] Audio HW Support EQ\n        [ ] Audio HW Support AW EQ\n        [*] Audio HW Support DRC\n        [*] Audio Track Support\n        [*] Audio Record Support\n        [*] Audio System Utils\n        [*] Audio Plugin Support\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u53c2\u6570\u914d\u7f6e",children:"\u53c2\u6570\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"AudioSystem \u9ed8\u8ba4\u4f7f\u80fd\u5f55\u97f3\u548c\u64ad\u653e\u7684\u53c2\u6570\u8bbe\u7f6e\uff0c\u6d89\u53ca\u5230\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"board/r128s2/pro/configs/sys_config.fex\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u677f\u5b50\u7684\u578b\u53f7\u6765\u9009\u62e9\u5bf9\u5e94\u7684\u76ee\u5f55\u3002\u8fd9\u91cc\u662fr128s2\u7684pro\u677f\u3002\u5f55\u97f3\u548c\u64ad\u653e\u76f8\u5173\u7684\u53c2\u6570\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'[audio_hw_rv] //RV\u6838\u53c2\u6570\u914d\u7f6e\npcm_pb_rate = 48000\npcm_pb_channels = 1\npcm_pb_bits = 16\npcm_pb_period_size = 960\npcm_pb_periods = 4\npcm_pb_card = "hw:audiocodecdac" //\u64ad\u653e\u58f0\u5361\u540d\u79f0\namp_cap_rate = 16000\namp_cap_channels = 3\namp_cap_bits = 16\namp_cap_period_size = 320\namp_cap_periods = 4\namp_cap_card = "capture" //\u8de8\u6838\u58f0\u5361\u7684\u540d\u79f0\n\n[audio_hw_dsp] //dsp\u6838\u53c2\u6570\u914d\u7f6e\npcm_cap_rate = 48000\npcm_cap_channels = 3\npcm_cap_bits = 16\npcm_cap_period_size = 320\npcm_cap_periods = 4\npcm_cap_card = "hw:audiocodecadc" //\u5f55\u97f3\u58f0\u5361\u540d\u79f0\n'})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bf7\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u9700\u6c42\u914d\u7f6e\u53c2\u6570\uff0c\u4e0d\u8981\u968f\u610f\u8bbe\u7f6e\u53c2\u6570\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u5f55\u97f3\u6216\u64ad\u653e\u5931\u8d25\uff0c\u56e0\u4e3a\u9a71\u52a8\u4f1a\u9650\u5236 periods\uff0cperiod_size \u8fd8\u6709buffer_bytes \u7684\u6700\u5c0f\u503c\u548c\u6700\u5927\u503c\u3002\u5982\u679c\u5f55\u97f3\u51fa\u73b0 overrun\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u589e\u5927 periods\uff0c\u4e0d\u8981\u968f\u610f\u4fee\u6539 period_size\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u9891\u63a5\u53e3",children:"\u97f3\u9891\u63a5\u53e3"}),"\n",(0,l.jsx)(e.p,{children:"\u5934\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"#include <AudioSystem.h>\n"})}),"\n",(0,l.jsx)(e.p,{children:"AudioSystem.h \u5305\u542b\u4e86 AudioTrack.h \u4ee5\u53ca AudioRecord.h\uff0c\u56e0\u6b64\u5e94\u7528\u4e0a\u53ef\u4ee5\u53ea\u5305\u542b AudioSystem.h \u5373\u53ef"}),"\n",(0,l.jsx)(e.h4,{id:"audiotrack-\u63a5\u53e3",children:"AudioTrack \u63a5\u53e3"}),"\n",(0,l.jsx)(e.p,{children:"\u5934\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"#include <AudioTrack.h>\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u521b\u5efa-audiotrack",children:"\u521b\u5efa AUDIOTRACK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"tAudioTrack *AudioTrackCreate(const char *name)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u6307\u5b9aaudio_hw\u540d\u79f0"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56deAudioTrack\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56deNULL\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"name \u53c2\u6570\u53ef\u652f\u6301\u7684\u503c\uff0c\u53ef\u4ee5\u901a\u8fc7 ahw_list \u547d\u4ee4\u67e5\u770b, \u4f8b\u5982 default,amp \u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u81ea\u5b9a\u4e49\u6dfb\u52a0\u9700\u8981\u7684\u540d\u79f0\uff0c\u8be6\u60c5\u53ef\u4ee5\u53c2\u8003 audio_hw/audio_hw.c \u4e2d\u7684 add_default_ahw \u51fd\u6570"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u521b\u5efa\u6307\u5b9a\u97f3\u9891\u6d41\u7c7b\u578b\u7684-audiotrack",children:"\u521b\u5efa\u6307\u5b9a\u97f3\u9891\u6d41\u7c7b\u578b\u7684 AUDIOTRACK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"tAudioTrack *AudioTrackCreateWithStream(const char *name, uint16_t type)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u6307\u5b9aaudio_hw\u540d\u79f0"}),"\n",(0,l.jsx)(e.li,{children:"type: \u97f3\u9891\u6d41\u7c7b\u578b\uff0c\u6bcf\u4e2a\u7c7b\u578b\u90fd\u6709\u72ec\u81ea\u7684\u97f3\u91cf\u8c03\u8282\u66f2\u7ebf"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56deAudioTrack\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56deNULL\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4f7f\u7528 AudioTrackCreate \u63a5\u53e3\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u97f3\u9891\u6d41\u7c7b\u578b\u662f AUDIO_STREAM_SYSTEM \u97f3\u9891\u6d41\u97f3\u91cf\u66f2\u7ebf\u5728 audio_plugin/softvolume.c \u91cc\u9762\u5b9a\u4e49, \u53ef\u4ee5\u53c2\u8003 softvol_stream_init \u51fd\u6570\u9ed8\u8ba4\u52a0\u8f7d\u4e86\u4e24\u79cd\u7c7b\u578b\u7684\u66f2\u7ebf\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e-audiotrack-\u76f8\u5173\u97f3\u9891\u53c2\u6570",children:"\u8bbe\u7f6e AUDIOTRACK \u76f8\u5173\u97f3\u9891\u53c2\u6570"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackSetup(tAudioTrack *at, uint32_t rate, uint8_t channels, uint8_t bits)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n",(0,l.jsx)(e.li,{children:"rate: \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"bits: \u91c7\u6837\u7cbe\u5ea6"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u5199\u5165-pcm-\u6570\u636e",children:"\u5199\u5165 PCM \u6570\u636e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackWrite(tAudioTrack *at, void *data, uint32_t size)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n",(0,l.jsx)(e.li,{children:"data: \u8981\u5199\u5165\u7684pcm\u6570\u636e"}),"\n",(0,l.jsx)(e.li,{children:"size: \u6570\u636e\u5927\u5c0f,bytes"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de\u5199\u5165\u7684\u5b57\u8282\u6570\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u5f00\u542f-audiotrack",children:"\u5f00\u542f AUDIOTRACK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackStart(tAudioTrack *at)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u653e\u97f3\u6d41\u7a0b\u4e2d\u4e0d\u4e00\u5b9a\u8981\u6267\u884c AudioTrackStart \u51fd\u6570\uff0c\u56e0\u4e3a\u5728\u8c03\u7528 AudioTrackWrite \u7684\u65f6\u5019\uff0c\u5185\u90e8\u4f1a\u6839\u636e\u72b6\u6001\u81ea\u52a8\u8c03\u7528 start \u7684\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u505c\u6b62-audiotrack",children:"\u505c\u6b62 AUDIOTRACK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackStop(tAudioTrack *at)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u83b7\u53d6\u5f53\u524d-audiotrack-\u4ecd\u6709\u591a\u5c11\u6570\u636e\u672a\u9001\u5165\u58f0\u5361",children:"\u83b7\u53d6\u5f53\u524d AUDIOTRACK \u4ecd\u6709\u591a\u5c11\u6570\u636e\u672a\u9001\u5165\u58f0\u5361"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackDelay(tAudioTrack *at)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u9500\u6bc1-audiotrack",children:"\u9500\u6bc1 AUDIOTRACK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioTrackDestroy(tAudioTrack *at)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"at: AudioTrack\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"audiorecord-\u63a5\u53e3",children:"AudioRecord \u63a5\u53e3"}),"\n",(0,l.jsx)(e.p,{children:"\u5934\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"#include <AudioRecord.h>\n"})}),"\n",(0,l.jsx)(e.h5,{id:"\u521b\u5efa-audiorecord",children:"\u521b\u5efa AUDIORECORD"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"tAudioRecord *AudioRecordCreate(const char *name)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u6307\u5b9aaudio_hw\u540d\u79f0"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56deAudioRecord\u53e5\u67c4\uff0c\u5931\u8d25\u8fd4\u56deNULL\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8bbe\u7f6e-audiorecord-\u76f8\u5173\u97f3\u9891\u53c2\u6570",children:"\u8bbe\u7f6e AUDIORECORD \u76f8\u5173\u97f3\u9891\u53c2\u6570"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioRecordSetup(tAudioRecord *ar, uint32_t rate, uint8_t channels, uint8_t bits)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ar: AudioRecord\u53e5\u67c4"}),"\n",(0,l.jsx)(e.li,{children:"rate: \u91c7\u6837\u7387"}),"\n",(0,l.jsx)(e.li,{children:"channels: \u901a\u9053\u6570"}),"\n",(0,l.jsx)(e.li,{children:"bits: \u91c7\u6837\u7cbe\u5ea6"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u83b7\u53d6-pcm-\u6570\u636e",children:"\u83b7\u53d6 PCM \u6570\u636e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioRecordRead(tAudioRecord *ar, void *data, uint32_t size)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ar: AudioRecord\u53e5\u67c4"}),"\n",(0,l.jsx)(e.li,{children:"data: \u8bfb\u53d6\u7684pcm\u6570\u636e\u5b58\u653e\u7684\u5730\u5740"}),"\n",(0,l.jsx)(e.li,{children:"size: \u6570\u636e\u5927\u5c0f,bytes"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de\u5199\u5165\u7684\u5b57\u8282\u6570,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u5f00\u542f-audiorecord",children:"\u5f00\u542f AUDIORECORD"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioRecordStart(tAudioRecord *ar)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ar: AudioRecord\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u653e\u97f3\u6d41\u7a0b\u4e2d\u4e0d\u4e00\u5b9a\u8981\u6267\u884c AudioRecordStart \u51fd\u6570\uff0c\u56e0\u4e3a\u5728\u8c03\u7528 AudioRecordRead \u7684\u65f6\u5019\uff0c\u5185\u90e8\u4f1a\u6839\u636e\u72b6\u6001\u81ea\u52a8\u8c03\u7528 start"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u505c\u6b62-audiorecord",children:"\u505c\u6b62 AUDIORECORD"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioRecordStop(tAudioRecord *ar)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ar: AudioRecord\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u9500\u6bc1-audiorecord",children:"\u9500\u6bc1 AUDIORECORD"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioRecordDestroy(tAudioRecord *ar)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ar: AudioRecord\u53e5\u67c4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"audiosystem-\u5176\u4ed6\u63a5\u53e3",children:"AudioSystem \u5176\u4ed6\u63a5\u53e3"}),"\n",(0,l.jsx)(e.p,{children:"\u5934\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"#include <AudioSystem.h>\n"})}),"\n",(0,l.jsx)(e.h5,{id:"audiosystem-\u521d\u59cb\u5316",children:"AUDIOSYSTEM \u521d\u59cb\u5316"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int AudioSystemInit(void)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"AudioSystemInit \u4e00\u822c\u5728 os \u7684\u521d\u59cb\u5316\u6d41\u7a0b\u4e2d\u8c03\u7528 (\u4f8b\u5982 main.c \u4e2d)"}),"\n"]}),"\n",(0,l.jsx)(e.h5,{id:"\u8f6f\u4ef6\u97f3\u91cf\u63a7\u5236\u63a5\u53e3",children:"\u8f6f\u4ef6\u97f3\u91cf\u63a7\u5236\u63a5\u53e3"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int softvol_control_with_streamtype(int stream_type, uint32_t *vol_index, int16_t mode)\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"stream_type: \u97f3\u9891\u6d41\u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"vol_index: \u636emode\u5f97\u5230\u7684\u97f3\u91cf\u6570\u503c"}),"\n",(0,l.jsx)(e.li,{children:"mode: \u64cd\u4f5c\u6a21\u5f0f\u30020:\u8bfb\u53d6\uff1b1\uff1a\u5199\u5165\uff1b2\uff1a\u8bfb\u53d6\u8303\u56f4"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6210\u529f\u5219\u8fd4\u56de0,\u5426\u5219\u8fd4\u56deerror code"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u5f53 mode \u4e3a 2 \u65f6\uff0cvol_index \u7684\u503c\u8868\u793a\u97f3\u91cf\u8303\u56f4\uff0c\u4f4e 16bit \u8868\u793a\u6700\u5c0f\u503c\uff0c\u9ad8 16bit \u8868\u793a\u6700\u5927\u503c\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"audiosystem-\u63a5\u53e3\u793a\u4f8b",children:"AudioSystem \u63a5\u53e3\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n#include <unistd.h>\n#include <string.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <math.h>\n\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n\n#include <console.h>\n\n#include <AudioSystem.h>\n\n#include "wav_parser.h"\n#include <hal_thread.h>\n\nstatic int g_loop_count = 0;\nstatic int8_t g_play_or_cap = 0;\nstatic int8_t g_record_then_play = 0;\nstatic int8_t g_bits = 0;\nstatic int g_run_time = 0;\nstatic int g_at_task_id = 0;\nstatic int g_ar_task_id = 0;\nstatic int g_rate = 0;\nstatic int g_channels = 0;\nstatic char g_wav_path[128] = "16K_16bit_1ch";\nstatic int g_tmp_arg = 0;\nstatic char g_at_name[12] = "default";\nstatic char g_ar_name[12] = "default";\nstatic int g_ar_forward_port = 0;\n\n#define LOCAL_PRIORITIES    \\\n    (configMAX_PRIORITIES > 20 ? configMAX_PRIORITIES - 8 : configMAX_PRIORITIES - 3)\n\nstruct as_test_data {\n    int loop_count;\n    int type;       /* 0:wav, 1:data */\n    uint32_t rate,channels;\n    void *ptr;\n    int data_bytes;\n    uint8_t bits;\n    int8_t sec;\n    int8_t record_then_play;\n};\n\n#define PI (3.1415926)\nstatic int sine_generate(void *buf, uint32_t len, uint32_t rate, uint32_t channels, uint8_t bits, float amp)\n{\n    int sine_hz = 1000;\n    int sine_point, sine_cycle, sine_point_bytes;\n    int i,j;\n    int accuracy = INT16_MAX;\n    int frame_bytes;\n\n    if (amp > 1.0)\n        amp = 1.0;\n    else if (amp < 0.01)\n        amp = 0.01;\n\n    frame_bytes = channels * bits / 8;\n    sine_point = rate / sine_hz;\n    sine_point_bytes = frame_bytes * sine_point;\n    sine_cycle = len / sine_point_bytes;\n    if (bits == 16) {\n        int16_t *data = buf;\n        accuracy = INT16_MAX;\n        for (j = 0; j < sine_point; j++) {\n            int16_t value = (int16_t)(amp * accuracy * sin(2 * (double)PI * j / sine_point));\n            if (channels == 1) {\n                data[j] = value;\n            } else if (channels == 2) {\n                data[2 * j] = value;\n                data[2 * j + 1] = value;\n            } else {\n                printf("unsupport channels:%d\\n", channels);\n                while(1);\n            }\n        }\n    } else if (bits == 32) {\n        int32_t *data = buf;\n        accuracy = INT32_MAX;\n        for (j = 0; j < sine_point; j++) {\n            int32_t value = (int32_t)(amp * accuracy * sin(2 * (double)PI * j / sine_point));\n            if (channels == 1) {\n                data[j] = value;\n            } else if (channels == 2) {\n                data[2 * j] = value;\n                data[2 * j + 1] = value;\n            } else {\n                printf("unsupport channels:%d\\n", channels);\n                while(1);\n            }\n        }\n    }\n\n    for (i = 1; i < sine_cycle; i++) {\n        memcpy(buf + i * sine_point_bytes, buf, sine_point_bytes);\n        /*printf("[%s] line:%d buf:%p, dest:%p, ofs:%u\\n", __func__, __LINE__,*/\n            /*buf, buf + i * sine_point_bytes, i * sine_point_bytes);   */\n    }\n\n    return sine_cycle * sine_point_bytes;\n}\n\nstatic void play_sine(tAudioTrack *at, uint32_t rate, uint8_t channels, uint8_t bits, int sec)\n{\n    int frame_loop = 480;\n    int count, frame_bytes;\n    void *buf;\n    int len, size = 0;\n\n    frame_bytes = frame_loop * channels * (bits == 16 ? 2 : 4);\n    count = rate * sec / frame_loop;\n\n    buf = malloc(frame_bytes);\n    /*printf("[%s] line:%d malloc %u bytes\\n", __func__, __LINE__, frame_bytes);*/\n    if (!buf)\n        return;\n\n    len = sine_generate(buf, frame_bytes, rate, channels, bits, 0.8);\n    while (count--) {\n        size = AudioTrackWrite(at, buf, len);\n        if (size != len) {\n            printf("at write return %d\\n", size);\n            break;\n        }\n    }\n    free(buf);\n}\n\nstatic void at_sine_task(void *arg)\n{\n    tAudioTrack *at;\n    int channels = g_channels;\n    int rate = g_rate;\n    int sec = g_run_time;\n    uint8_t bits = g_bits;\n\n#if 1\n    at = AudioTrackCreate(g_at_name);\n#else\n    at = AudioTrackCreateWithStream(g_at_name, AUDIO_STREAM_MUSIC);\n#endif\n    if (!at) {\n        printf("at create failed\\n");\n        goto err;\n    }\n\n    AudioTrackSetup(at, rate, channels, bits);\n    play_sine(at, rate, channels, bits, sec);\n\n    AudioTrackStop(at);\n\n    AudioTrackDestroy(at);\nerr:\n    vTaskDelete(NULL);\n}\n\nstatic void at_sine_task_create()\n{\n    hal_thread_t handle;\n    char buf[32];\n\n    snprintf(buf, sizeof(buf), "at_sine%d", g_at_task_id);\n    g_at_task_id++;\n    handle = hal_thread_create(at_sine_task, NULL, buf, 8192, HAL_THREAD_PRIORITY_APP);\n}\n\nstatic void at_task(void *arg)\n{\n    tAudioTrack *at;\n    struct as_test_data *data = arg;\n\n    at = AudioTrackCreate(g_at_name);\n    if (!at) {\n        printf("at create failed\\n");\n        goto err;\n    }\n\n    if (data->type == 0)  {\n        /* Pass */\n    } else if (data->type == 1 && data->ptr != NULL){\n        /* play pcm data */\n        int value = 0;\n        int count = data->loop_count;\n        AudioTrackSetup(at, data->rate, data->channels, data->bits);\n        while (count--) {\n            AudioTrackWrite(at, data->ptr, data->data_bytes);\n            value++;\n            printf("[%s] line:%d playback count=%d\\n", __func__, __LINE__, value);\n        }\n    }\n    AudioTrackStop(at);\n\n    AudioTrackDestroy(at);\nerr:\n    if (data->ptr)\n        free(data->ptr);\n    free(data);\n    vTaskDelete(NULL);\n}\n\nstatic void at_task_create(struct as_test_data *data)\n{\n    hal_thread_t handle;\n    char buf[32];\n    struct as_test_data *d;\n\n    d = malloc(sizeof(struct as_test_data));\n    if (!data) {\n        d->type = 0;\n        d->ptr = NULL;\n        d->loop_count = g_loop_count;\n    } else {\n        memcpy(d, data, sizeof(struct as_test_data));\n    }\n    snprintf(buf, sizeof(buf), "at_task%d", g_at_task_id);\n    g_at_task_id++;\n    handle = hal_thread_create(at_task, d, buf, 2048, HAL_THREAD_PRIORITY_APP);\n}\nextern int adb_forward_create_with_rawdata(int port);\nextern int adb_forward_send(int port, void *data, unsigned len);\nextern int adb_forward_end(int port);\nstatic void ar_task(void *arg)\n{\n    tAudioRecord *ar;\n    struct as_test_data *data = arg;\n    uint32_t rate = data->rate;\n    uint32_t channels = data->channels;\n    uint8_t bits = data->bits;\n    int total, read_size, size, read = 0;\n    int frame_bytes = bits / 8  * channels;\n    int frames_bytes_loop = frame_bytes * rate / 100; /* 10ms */\n    void *buf = NULL;\n\n    if (data->sec)\n        total = data->sec * rate * frame_bytes;\n    else\n        total = frames_bytes_loop; /* 10ms buffer */\n\n#ifdef CONFIG_COMPONENTS_USB_GADGET_ADB_FORWARD\n    int _port = g_ar_forward_port;\n    if (g_ar_forward_port > 0)\n        g_ar_forward_port = 0;\n    if (adb_forward_create_with_rawdata(_port) < 0)\n        _port = -1;\n#endif\n    ar = AudioRecordCreate(g_ar_name);\n    if (!ar) {\n        printf("ar create failed\\n");\n        goto err;\n    }\n\n    buf = malloc(total);\n    if (!buf) {\n        printf("no memory\\n");\n        goto err;\n    }\n\n    AudioRecordSetup(ar, rate, channels, bits);\n    AudioRecordStart(ar);\n\n    printf("[%s] line:%d buf:%p, %d\\n", __func__, __LINE__, buf, total);\n    while (data->loop_count--) {\n        if (data->sec)\n            total = data->sec * rate * frame_bytes;\n        else\n            total = frames_bytes_loop;\n        read = 0;\n        while (total > 0) {\n            if (total > frames_bytes_loop)\n                size = frames_bytes_loop;\n            else\n                size = total;\n            read_size = AudioRecordRead(ar, buf + read, size);\n            if (read_size != frames_bytes_loop) {\n                printf("read_size(%d) != frames_bytes_loop(%d)\\n", read_size, frames_bytes_loop);\n                break;\n            }\n#ifdef CONFIG_COMPONENTS_USB_GADGET_ADB_FORWARD\n            adb_forward_send(_port, buf + read, size);\n#endif\n            total -= read_size;\n            read += read_size;\n            /*printf("[%s] line:%d residue:%d read=%u\\n", __func__, __LINE__, total, read);*/\n        }\n        if (read_size < 0)\n            break;\n    }\n    AudioRecordStop(ar);\n    AudioRecordDestroy(ar);\n    ar = NULL;\n#ifdef CONFIG_COMPONENTS_USB_GADGET_ADB_FORWARD\n    adb_forward_end(_port);\n    /* don\'t destroy port for repeating record */\n    /*adb_forward_destroy(_port);*/\n#endif\n\n    vTaskDelay(pdMS_TO_TICKS(500));\n    if (data->record_then_play != 0) {\n        struct as_test_data d = {\n            .loop_count = 1,\n            .type = 1,\n            .rate = rate,\n            .channels = channels,\n            .ptr = buf,\n            .data_bytes = read,\n            .bits = bits,\n        };\n        at_task_create(&d);\n        buf = NULL;\n    }\n\nerr:\n    if (ar)\n        AudioRecordDestroy(ar);\n    free(data);\n    if (buf)\n        free(buf);\n    vTaskDelete(NULL);\n}\n\nstatic void ar_task_create(struct as_test_data *data)\n{\n    hal_thread_t handle;\n    char buf[32];\n    struct as_test_data *d;\n\n    d = malloc(sizeof(struct as_test_data));\n    if (!data) {\n        d->type = 0;\n        d->ptr = NULL;\n        d->rate = g_rate;\n        d->channels = g_channels;\n        d->bits = g_bits;\n        d->record_then_play = g_record_then_play;\n        d->loop_count = g_loop_count;\n        d->sec = g_run_time;\n    } else {\n        memcpy(d, data, sizeof(struct as_test_data));\n    }\n    snprintf(buf, sizeof(buf), "ar_task%d", g_ar_task_id);\n    g_ar_task_id++;\n    handle = hal_thread_create(ar_task, d, buf, 2048, HAL_THREAD_PRIORITY_APP);\n}\n\nstatic void as_test_usage()\n{\n    printf("Usgae: as_test [option]\\n");\n    printf("-h,          as_test help\\n");\n    printf("-s,          stream, 0-playback; 1-capture; 2-playback sine\\n");\n    printf("-d,          duration, sec\\n");\n    printf("-r,          rate\\n");\n    printf("-c,          channels\\n");\n    printf("-b,          bits\\n");\n    printf("-t,          capture and then playback\\n");\n    printf("-n,          AudioTrack name\\n");\n    printf("-m,          AudioRecord name\\n");\n    printf("-l,          loop count\\n");\n    printf("-f,          adb forward port\\n");\n    printf("\\n");\n    printf("play sine:\\n");\n    printf("as_test -s 2 -d 10 -r 48000\\n");\n    printf("capture:\\n");\n    printf("as_test -s 1 -d 0 -l 1000 -r 16000 -c 3\\n");\n    printf("capture and forward:\\n");\n    printf("as_test -s 1 -d 0 -l 1000 -r 16000 -c 3 -f 20227\\n");\n    printf("\\n");\n}\n\nint cmd_as_test(int argc, char *argv[])\n{\n    int c = 0;\n    g_play_or_cap = 0;\n    g_loop_count = 1;\n    g_run_time = 3;\n    g_rate = 16000;\n    g_channels = 2;\n    g_bits = 16;\n    g_record_then_play = 0;\n\n    optind = 0;\n    while ((c = getopt(argc, argv, "htl:s:ad:r:c:b:g:n:m:f:")) != -1) {\n        switch (c) {\n        case \'h\':\n            as_test_usage();\n            return 0;\n        case \'l\':\n            g_loop_count = atoi(optarg);\n            break;\n        case \'s\':\n            /*\n             * 0: playback\n             * 1: capture\n             * 2: playback sine\n             * */\n            g_play_or_cap = atoi(optarg);\n            break;\n        case \'d\':\n            g_run_time = atoi(optarg);\n            break;\n        case \'r\':\n            g_rate = atoi(optarg);\n            break;\n        case \'c\':\n            g_channels = atoi(optarg);\n            break;\n        case \'b\':\n            g_bits = atoi(optarg);\n            break;\n        case \'t\':\n            g_record_then_play = 1;\n            break;\n        case \'g\':\n            g_tmp_arg = atoi(optarg);\n            break;\n        case \'n\':\n            strncpy(g_at_name, optarg, sizeof(g_at_name));\n            break;\n        case \'m\':\n            strncpy(g_ar_name, optarg, sizeof(g_ar_name));\n            break;\n        case \'f\':\n            g_ar_forward_port = atoi(optarg);\n            break;\n        default:\n            return -1;\n        }\n    }\n\n    if (optind < argc) {\n        strncpy(g_wav_path, argv[optind], sizeof(g_wav_path) - 1);\n    } else {\n        strcpy(g_wav_path, "16K_16bit_1ch");\n    }\n\n    switch (g_play_or_cap) {\n    case 0:\n        at_task_create(NULL);\n        break;\n    case 1:\n        ar_task_create(NULL);\n        break;\n    case 2:\n        at_sine_task_create(NULL);\n        break;\n    default:\n        printf("unknown \'s\' command\\n");\n        break;\n    }\n    return  0;\n}\nFINSH_FUNCTION_EXPORT_CMD(cmd_as_test, as_test, audio system test);\n\n\nstatic void as_volume_usage(void)\n{\n    printf("Usgae: as_volume [option]\\n");\n    printf("-h,          as_volume help\\n");\n    printf("-t,          volume type\\n");\n    printf("             1:system\\n");\n    printf("             2:music\\n");\n    printf("-m,          option mode\\n");\n    printf("             0:get\\n");\n    printf("             1:set\\n");\n    printf("             2:get range\\n");\n    printf("\\n");\n}\n\nstatic int cmd_as_volume(int argc, char *argv[])\n{\n    int type = AUDIO_STREAM_SYSTEM;\n    int volume_mode = 0;\n    uint32_t volume_value = 0;\n    int c = 0, ret = 0;\n\n    optind = 0;\n    while ((c = getopt(argc, argv, "ht:m:")) != -1) {\n        switch (c) {\n        case \'t\':\n            type = atoi(optarg);\n            break;\n        case \'m\':\n            volume_mode = atoi(optarg);\n            break;\n        case \'h\':\n        default:\n            as_volume_usage();\n            return -1;\n        }\n    }\n\n    if (optind < argc) {\n        int value = atoi(argv[optind]);\n        volume_value = (uint32_t)(value | value << 16);\n    }\n\n    ret = softvol_control_with_streamtype(type, &volume_value, volume_mode);\n    if (ret != 0) {\n        printf("softvol(t:%d, m:%d), control failed:%d\\n", type, volume_mode, ret);\n        return -1;\n    }\n\n    switch (volume_mode) {\n    case 0: /* read */\n        printf("softvol(%d) read, value=%d,%d\\n", type,\n                (volume_value & 0xffff),\n                ((volume_value >> 16) & 0xffff));\n        break;\n    case 1: /* write */\n        printf("softvol(%d) write, value=%d,%d\\n", type,\n                (volume_value & 0xffff),\n                ((volume_value >> 16) & 0xffff));\n        break;\n    case 2: /* read range */\n        printf("softvol(%d) read, min=%u, max=%u\\n", type,\n                (volume_value & 0xffff),\n                ((volume_value >> 16) & 0xffff));\n        break;\n    }\n\n    return 0;\n}\nFINSH_FUNCTION_EXPORT_CMD(cmd_as_volume, as_volume, audio system volume control);\n'})}),"\n",(0,l.jsx)(e.h3,{id:"audiosystem-\u6d4b\u8bd5\u5de5\u5177",children:"AudioSystem \u6d4b\u8bd5\u5de5\u5177"}),"\n",(0,l.jsx)(e.h4,{id:"ahw_list-\u547d\u4ee4",children:"ahw_list \u547d\u4ee4"}),"\n",(0,l.jsx)(e.p,{children:"\u7528\u4e8e\u67e5\u770b\u5f53\u524d audio_hw \u4e2d\u652f\u6301\u4e86\u54ea\u4e9b audio_hw_elem"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"audio hw list:\ninstance |name |read |write\n0 |default |0x04064128|0x04063ff4\n2 |playback |0000000000|0x04063ff4\n\n\u7b2c\u4e00\u5217instance, \u6bcf\u4e2aelem\u90fd\u6709\u4e00\u4e2ainstasnce\u503c\uff0c\u51b3\u5b9a\u4ed6\u4eec\u662f\u54ea\u79cd\u7c7b\u578b\u7684HW_TYPE\n\u7b2c\u4e8c\u5217name, \u6bcf\u4e2aelem\u90fd\u6709\u552f\u4e00\u7684\u6807\u5fd7\u540d\u79f0\u3002\n\u7b2c\u4e09\u5217read\uff0c\u8868\u793a\u8bfb\u51fd\u6570\u6307\u9488\uff0c0\u8868\u793a\u4e0d\u652f\u6301\u8bfb\u3002\n\u7b2c\u56db\u5217write,\u8868\u793a\u5199\u51fd\u6570\u6307\u9488\uff0c0\u8868\u793a\u4e0d\u652f\u6301\u5199\u3002\n"})}),"\n",(0,l.jsx)(e.h4,{id:"as_test-\u547d\u4ee4",children:"as_test \u547d\u4ee4"}),"\n",(0,l.jsx)(e.p,{children:"as_test \u53ef\u7528\u4e8e\u6d4b\u8bd5\u64ad\u653e\u5f55\u97f3\u529f\u80fd\u3002"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u9009\u9879"}),(0,l.jsx)(e.th,{style:{textAlign:"left"},children:"\u529f\u80fd"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011s"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u54ea\u79cd\u6d4b\u8bd5\uff1b0: playback; 1: capture; 2: \u64ad\u653e sine"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011d"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u8fd0\u884c\u65f6\u95f4 (\u79d2); \u6ce8\u610f, \u5f55\u97f3\u4f1a\u6839\u636e\u8be5\u503c\u7533\u8bf7\u5bf9\u5e94\u5927\u5c0f\u7684\u5185\u5b58 buffer\uff0c\u4e0d\u80fd\u8bbe\u7f6e\u592a\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011l"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5faa\u73af\u6267\u884c\u6b21\u6570\uff1b\u53ef\u4ee5\u7ed3\u5408\u2011d \u53c2\u6570\u5b9e\u73b0\u8f83\u4f4e\u5185\u5b58\u957f\u65f6\u95f4\u7684\u6d4b\u8bd5"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011r"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u91c7\u6837\u7387"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011c"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u901a\u9053\u6570"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011b"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u91c7\u6837\u7cbe\u5ea6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011t"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u5f55\u97f3\u7136\u540e\u64ad\u653e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011n"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u6307\u5b9a\u521b\u5efa AudioTrack \u65f6\u7684 name \u53c2\u6570"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011m"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u6307\u5b9a\u521b\u5efa AudioRecord \u65f6\u7684 name \u53c2\u6570"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"\u2011f"}),(0,l.jsx)(e.td,{style:{textAlign:"left"},children:"adb forward \u7684\u7aef\u53e3\u53f7"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:"\u6d4b\u8bd5\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"\u64ad\u653e5s 48K,2ch\u7684\u6b63\u5f26\u6ce2\u6570\u636e:\nas_test \u2011s 2 \u2011d 5 \u2011r 48000 \u2011c 2\n\n\u64ad\u653e5s 48K,2ch,32bit\u7684\u6b63\u5f26\u6ce2\u6570\u636e:\nas_test \u2011s 2 \u2011d 5 \u2011r 48000 \u2011c 2 \u2011b 32\n\n\u64ad\u653e10s 16K 1ch\u7684\u6b63\u5f26\u6ce2\u6570\u636e\uff1a\nas_test \u2011s 2 \u2011d 10 \u2011r 16000 \u2011c 1\n\n\u64ad\u653eU\u76d8\u4e2d\u6307\u5b9a\u7684\u6587\u4ef6\uff1a\nas_test \u2011s 0 \u2011n playback /usb_msc/test.wav\n\n\u5f55\u97f31s\u949f\nas_test \u2011s 1 \u2011m amp \u2011d 1 \u2011c 3 \u2011f 20227\n\n3\u901a\u9053\u5f55\u97f3100s(\u2011d 0\u8868\u793a\u7531\u2011l\u51b3\u5b9a\u65f6\u95f4=10000*10ms=100s)\nas_test \u2011s 1 \u2011m amp \u2011d 0 \u2011l 10000 \u2011c 3 \u2011f 20227\n\n2\u901a\u9053\u5f55\u97f33s\u7136\u540e\u64ad\u653e\u51fa\u6765\nas_test \u2011s 1 \u2011d 3 \u2011c 2 \u2011m amp \u2011t\n\n\u5982\u679c\u662f\u5728dsp\u4f7f\u7528\u5f55\u97f3\u7684\u8bdd\uff0c\u2011m\u53c2\u6570\u8981\u4f7f\u7528default\u3002\n"})}),"\n",(0,l.jsx)(e.h4,{id:"as_volume-\u547d\u4ee4",children:"as_volume \u547d\u4ee4"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7 as_volume \u547d\u4ee4\u83b7\u53d6\u6216\u8005\u8bbe\u7f6e\u4e0d\u540c\u7c7b\u578b\u7684\u97f3\u91cf\u503c\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u6ce8\u610f\u9700\u8981\u9009\u4e2d COMPONENTS_AW_AUDIO_SYSTEM_PLUGIN \u4e4b\u540e\u624d\u6709\u8be5\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"\u83b7\u53d6SYSTEM\u7c7b\u578b\u7684\u5f53\u524d\u97f3\u91cf\u503c\n\u547d\u4ee4\uff1a\nas_volume \u2011t 1 \u2011m 0\n\u7ed3\u679c\uff1a\nsoftvol(1) read, value=5,5\n\n\u8bbe\u7f6eSYSTEM\u7c7b\u578b\u7684\u97f3\u91cf\u503c\n\u547d\u4ee4\uff1a\nas_volume \u2011t 1 \u2011m 1 8\n\u7ed3\u679c\uff1a\nsoftvol(1) read, value=8,8\n\n\u83b7\u53d6MUSIC\u7c7b\u578b\u7684\u97f3\u91cf\u8303\u56f4\n\u547d\u4ee4\uff1a\nas_volume \u2011t 2 \u2011m 2\n\u7ed3\u679c\uff1a\nsoftvol(2) read, min=0, max=10\n"})}),"\n",(0,l.jsx)(e.h4,{id:"as_debug-\u547d\u4ee4",children:"as_debug \u547d\u4ee4"}),"\n",(0,l.jsxs)(e.p,{children:["as_debug \u7528\u4e8e\u5f00\u542f\u3001\u5173\u95ed AudioSystem \u7684\u8c03\u8bd5\u6a21\u5f0f\u3002\u5f00\u542f\u540e\u4f1a\u6709\u66f4\u591a (\u5bf9\u5e94\u4ee3\u7801\u4e2d ",(0,l.jsx)(e.code,{children:"_debug"}),"\u6253\u5370) \u7684\u8c03\u8bd5\u4fe1\u606f\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u5f00\u542f\u65b9\u5f0f\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_debug 1\n"})}),"\n",(0,l.jsx)(e.h2,{id:"aw-\u97f3\u6548",children:"AW \u97f3\u6548"}),"\n",(0,l.jsx)(e.p,{children:"FreeRTOS \u4e2d\u4f7f\u7528 AudioSystem \u7684 audio hw \u5c42\u6765\u5b9e\u73b0 AW EQ \u529f\u80fd\u3002\u8be5\u529f\u80fd\u662f AW\uff08AllWinner\uff09\u63d0\u4f9b\u7684\u8f6f\u4ef6\u97f3\u6548 EQ \u97f3\u6548\uff0c\u9700\u8981\u9009\u62e9 EQ \u5e93\u624d\u80fd\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u7f16\u8bd1-audiosystem-\u7684-aw-eq",children:"\u7f16\u8bd1 AudioSystem \u7684 AW EQ"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u662f\u7f16\u8bd1\u7684\u914d\u7f6e\u3002\u8981\u5148\u9009\u62e9 EQ Module\uff0c\u624d\u4f1a\u51fa\u73b0 Audio HW Support AW EQ\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"System components \u2011\u2011\u2011>\n    aw components \u2011\u2011\u2011>\n        Algorithm Process Module \u2011\u2011\u2011>\n            [*] EQ Module\n        AudioSystem Support \u2011\u2011\u2011>\n            [*] AW Audio System Support\n            [*] Audio HW Support\n            [*] Audio HW Support PCM\n            [ ] Audio HW Support Multi PCM\n            \u2011*\u2011 Audio HW Support AMP\n            [ ] Audio HW Support BT\n            [ ] Audio HW Support EQ\n            [*] Audio HW Support AW EQ\n            [ ] Audio HW Support DRC\n            [*] Audio Track Support\n            [*] Audio Record Support\n            [*] Audio System Utils\n            [*] Audio Plugin Support\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u8f6f\u4ef6-aw-eq",children:"\u4f7f\u7528\u8f6f\u4ef6 AW EQ"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd data \u76ee\u5f55\u4e0b\u6709 EQ.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u7684\u662f\u8c03\u8bd5 EQ \u7684\u53c2\u6570\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"EQ.conf \u7684\u8def\u5f84\u5982\u4e0b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"board/\u82af\u7247/\u9879\u76ee/data/UDISK\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f8b\u5982 R128S2\u7684pro\u677f\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"board/r128s2/pro/data/UDISK\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5728\u5e94\u7528\u6838\uff08RV\uff09\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff0c\u5373\u53ef\u8c03\u7528\u8f6f\u4ef6 EQ \u8fdb\u884c\u64ad\u653e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_test \u2011s 0 \u2011n playbackEQ /usb_msc/test.wav\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u66f4\u65b0\u4e86 EQ \u53c2\u6570\uff0c\u9700\u8981\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 EQ.conf \u5230 data/UDISK \u76ee\u5f55\u4e0b\uff0c\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u5373\u53ef\u751f\u6548\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528-audiosystem-\u7684\u786c\u4ef6-hw-eq-\u529f\u80fd",children:"\u4f7f\u7528 AudioSystem \u7684\u786c\u4ef6 HW EQ \u529f\u80fd"}),"\n",(0,l.jsx)(e.p,{children:"R128 \u5e73\u53f0\u652f\u6301\u786c\u4ef6 DAC \u7684 20\u2011band main EQ \u548c 5\u2011band post EQ\uff0c\u6240\u4ee5\u8f6f\u4ef6 AW EQ \u9ed8\u8ba4\u4e0d\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(e.p,{children:"FreeRTOS \u4e2d\u4f7f\u7528 AudioSystem \u7684 audio hw \u5c42\u6765\u5b9e\u73b0 HW EQ \u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u7f16\u8bd1-audiosystem-\u7684-hw-eq",children:"\u7f16\u8bd1 AudioSystem \u7684 HW EQ"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"System components \u2011\u2011\u2011>\n    aw components \u2011\u2011\u2011>\n        AudioSystem Support \u2011\u2011\u2011>\n            [*] AW Audio System Support\n            [*] Audio HW Support\n            [*] Audio HW Support PCM\n            [ ] Audio HW Support Multi PCM\n            \u2011*\u2011 Audio HW Support AMP\n            [ ] Audio HW Support BT\n            [*] Audio HW Support EQ\n            [ ] Audio HW Support AW EQ\n            [ ] Audio HW Support DRC\n            [*] Audio Track Support\n            [*] Audio Record Support\n            [*] Audio System Utils\n            [*] Audio Plugin Support\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528\u79bb\u7ebf-hw-eq",children:"\u4f7f\u7528\u79bb\u7ebf HW EQ"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd data \u76ee\u5f55\u4e0b\u6709 R128EQ\u20115band.conf \u6216 R128EQ\u201120band.conf \u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u7684\u662f\u786c\u4ef6 EQ \u7684\u53c2\u6570\u3002\u5982\u679c\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u90fd\u6ca1\u6709\uff0cHW EQ \u5c31\u4e0d\u4f1a\u751f\u6548\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"R128EQ\u20115band.conf\u6216R128EQ\u201120band.conf\u7684\u8def\u5f84\u5982\u4e0b:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"board/r128s2/pro/data/UDISK\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u786c\u4ef6\u914d\u7f6e\u6765\u9009\u62e9\u8def\u5f84\u3002\u8fd9\u91cc\u5bf9\u5e94\u7684\u662fR128S2\u7684pro\u677f\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u4f1a\u6253\u5370"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"Parse from config file /data/R128EQ\u201120band.conf\nFailed to open /data/R128EQ\u20115band.conf (2)\n\n\u7b2c\u4e00\u884c\u6253\u5370\u8868\u793a\u5df2\u7ecf\u8bfb\u53d6\u4e8620band EQ\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u8bbe\u7f6e\u5230\u786c\u4ef6\u3002\n\u7b2c\u4e8c\u884c\u6253\u5370\u8868\u793a\u5bf9\u5e94\u8def\u5f84\u6ca1\u6709\u914d\u7f6e\u6587\u4ef6\uff0c\u8bfb\u53d6\u5931\u8d25\uff0c\u4e0d\u4f1a\u914d\u7f6e\u3002\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5728\u5e94\u7528\u6838\uff08RV\uff09\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff0c\u5373\u53ef\u8c03\u7528 HW EQ \u8fdb\u884c\u64ad\u653e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_test \u2011s 0 \u2011n playback /usb_msc/test.wav\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u66f4\u65b0\u4e86 HW EQ \u53c2\u6570\uff0c\u9700\u8981\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 R128EQ\u20115band.conf \u6216 R128EQ\u201120band.conf \u5230data/UDISK \u76ee\u5f55\u4e0b\u3002"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u56e0\u4e3a\u662f\u786c\u4ef6 EQ \u662f\u914d\u7f6e\u5bc4\u5b58\u5668\uff0c\u6240\u4ee5\u53ea\u6709\u5f00\u673a\u540e\u7b2c\u4e00\u6b21\u64ad\u653e\u97f3\u4e50\u4f1a\u751f\u6548\uff0c\u6ca1\u6709\u5fc5\u8981\u6bcf\u6b21\u64ad\u653e\u90fd\u66f4\u65b0\u786c\u4ef6\u5bc4\u5b58\u5668\u3002\u5982\u679c\u66f4\u65b0\u4e86 HW EQ \u53c2\u6570\uff0c\u5c31\u8981\u91cd\u542f\u540e\uff0c\u518d\u6b21\u64ad\u653e\u97f3\u4e50\u751f\u6548"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5e38\u7528\u8c03\u8bd5\u65b9\u6cd5",children:"\u5e38\u7528\u8c03\u8bd5\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h3,{id:"dump-\u5bc4\u5b58\u5668",children:"dump \u5bc4\u5b58\u5668"}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7 reg_read/reg_write \u547d\u4ee4\u53ef\u4ee5\u8bfb\u5199 SoC \u4e0a\u7684\u5bc4\u5b58\u5668\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b SoC \u7684 user manual, \u5f97\u5230\u5177\u4f53\u6a21\u5757\u7684\u5bc4\u5b58\u5668\u5730\u5740\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"audiocodec\u6a21\u5757\u5bc4\u5b58\u5668\u57fa\u5730\u5740\u4e3a0x5096000\n\n\u5c060x5096000\u5f00\u59cb\u540e\u97624\u4e2a\u5bc4\u5b58\u5668\u6253\u5370\u51fa\u6765:\nreg_read 0x5096000 0x10\n\n\u5c060x5096010\u7684\u503c\u8bbe\u7f6e\u4e3a0x60004000\nreg_write 0x5096010 0x80004000\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",children:"\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e"}),"\n",(0,l.jsx)(e.p,{children:"\u5f88\u591a\u65f6\u5019\u9700\u8981\u83b7\u53d6\u8bbe\u5907\u5b9e\u9645\u5f55\u97f3\u6570\u636e\uff0c\u7528\u4e8e\u786e\u8ba4\u6570\u636e\u7684\u51c6\u786e\u6027\u3001\u58f0\u5b66\u6027\u80fd\u7b49\uff0c\u800c\u5728 RTOS \u4e2d\u5b58\u50a8\u4ecb\u8d28\u6bd4\u8f83\u6709\u9650\uff0c\u5e76\u4e14\u5199\u5165\u901f\u5ea6\u6162\uff0c\u5e76\u4e0d\u80fd\u7528\u4e8e\u4fdd\u5b58\u5f55\u97f3\u6570\u636e\u3002\u8fd9\u91cc\u5229\u7528 adb forword \u529f\u80fd\uff0c\u914d\u5408 alsa file \u63d2\u4ef6\uff0c\u53ef\u4ee5\u5b9e\u73b0\u57fa\u4e8e USB \u4f20\u8f93\u7684 PC \u7aef\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e\u7684\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"pc-\u7aef\u901a\u8fc7\u811a\u672c\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e",children:"PC \u7aef\u901a\u8fc7\u811a\u672c\uff0c\u5b9e\u65f6\u83b7\u53d6\u5f55\u97f3\u6570\u636e"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"PC \u4e0a\u4f7f\u7528\u811a\u672c\u5f55\u97f3\uff0c\u9700\u8981\u5bf9\u5e94 python2.0 \u7684\u7248\u672c\u3002\u5982\u679c\u4f7f\u7528\u66f4\u9ad8\u7248\u672c\u7684 python\uff0c\u9700\u8981\u4fee\u6539\u4ee3\u7801\u3002\u6700\u7ec8\u4fdd\u5b58\u7684\u6587\u4ef6\u662f pcm \u6570\u636e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u51c6\u5907\u4e00\u4e2a adb_record.py \u5199\u5165\u4ee5\u4e0b\u811a\u672c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-py",children:"#!/usr/bin/python2\nimport sys\nimport socket\nimport time\nimport datetime\n\npc_port=11112\nupload_file=\"data.pcm\"\nupload_start=\"\u2011\u2011>AW_RTOS_SOCKET_UPLOAD_START\"\nupload_end=\"\u2011\u2011>AW_RTOS_SOCKET_UPLOAD_END\"\ndata_length=4096\n\ndef client_test(port):\n    s = socket.socket()\n    host = \"localhost\"\n    s.connect((host,port))\n    while True:\n        data = s.recv(data_length)\n        if upload_start in data:\n            print 'recv upload start flag...data_len=%d, flag_len=%d' % (len(data), len(upload_start))\n            now_time = datetime.datetime.now().strftime(\"%Y\u2011%m\u2011%d\u2011%H\u2011%M\u2011%S\")\n            upload_file=\"record\u2011\" + now_time + \".pcm\"\n            if (len(upload_start) != len(data)):\n                with open(upload_file.decode('utf\u20118'), 'ab+') as f:\n                    f.write(data[len(upload_start):])\n        elif upload_end in data:\n            index = data.find(upload_end)\n            print 'recv upload end flag...data_len=%d, str_index=%d' % (len(data), index)\n            if index > 0:\n                with open(upload_file.decode('utf\u20118'), 'ab+') as f:\n                f.write(data[:index])\n                break\n            else:\n                if (len(data) == 0):\n                    print 'data is 0'\n                    break;\n                # print 'recv data, len is ', len(data)\n                with open(upload_file.decode('utf\u20118'), 'ab+') as f:\n                    f.write(data)\n                    print 'finish...'\n                    s.close()\n\ndef main():\n    if (len(sys.argv) == 2):\n        port = int(sys.argv[1])\n    else:\n        port = pc_port\n        client_test(port)\n\nif __name__=='__main__':\n    main()\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u501f\u7528adb\u5de5\u5177\u914d\u7f6e\u597dforward\u76f8\u5173\u529f\u80fd\uff0c\u5e76\u6267\u884cpython\u811a\u672cadb_record.py\u5f00\u59cb\u90fd\u7b49\u5f85\u83b7\u53d6\u5f55\u97f3\u6570\u636e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"adb shell af \u2011p 20191 \u2011r\nadb forward tcp:11112 tcp:20191\n./adb_record.py &\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u5c0f\u673a\u7aef\u4f7f\u7528\u65b9\u6cd5",children:"\u5c0f\u673a\u7aef\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h5,{id:"\u4f7f\u7528-alsa-\u63d2\u4ef6\u5f55\u97f3",children:"\u4f7f\u7528 ALSA \u63d2\u4ef6\u5f55\u97f3"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u4e32\u53e3\uff0c\u6216\u8005adb\u8ba9\u8bbe\u5907\u8fdb\u884c\u5f55\u97f3\uff0c\u4e0b\u9762\u4ee5adb\u65b9\u5f0f\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u5f55\u97f360s:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"adb shell arecord \u2011DCaptureFile \u2011d 60\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e00\u76f4\u5f55\u97f3\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"adb shell arecord \u2011DCaptureFile \u2011l\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u60f3\u7ec8\u6b62\u5f55\u97f3\uff0c\u53ef\u4ee5\u518d\u8d77\u4e00\u4e2a\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"adb shell arecord \u2011k\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u91ccarecord\u547d\u4ee4\u6307\u5b9a\u7684pcm\u8bbe\u5907\u662fCaptureFile, \u901a\u8fc7alsa_config.c\u914d\u7f6e\u6587\u4ef6\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2afile\u63d2\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f55\u97f3\u6570\u636e\u4f1a\u7ecf\u8fc7file\u63d2\u4ef6\u5904\u7406(\u901a\u8fc7adb\u53d1\u9001\u6570\u636e\u5230PC\u7aef)"}),"\n",(0,l.jsx)(e.h2,{id:"\u76f8\u5173\u64cd\u4f5c",children:"\u76f8\u5173\u64cd\u4f5c"}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u9a71\u52a8\u7684\u52a0\u8f7d",children:"\u58f0\u5361\u9a71\u52a8\u7684\u52a0\u8f7d"}),"\n",(0,l.jsx)(e.p,{children:"\u58f0\u5361\u914d\u7f6e\u4f4d\u4e8e\u4ee3\u7801\u4e2d, \u8def\u5f84\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u6bcf\u4e2a\u65b9\u6848\u76ee\u5f55\u4e0b\u9762\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"projects/\u65b9\u6848/src/card_default.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u662fdsp\u65b9\u6848\uff0c\u8be5\u6587\u4ef6\u4f1a\u5728rtos\u2011hal\u4ed3\u5e93\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"rtos\u2011hal/hal/source/sound/card_default.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528snd_card_register\u51fd\u6570\u8fdb\u884c\u58f0\u5361\u7684\u6ce8\u518c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"int snd_card_register(const char *name, struct snd_codec *codec, int platform_type)\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"name: \u8868\u793a\u58f0\u5361\u7684\u540d\u5b57\uff0caw\u2011alsa\u2011lib\u4e2d\u90fd\u9700\u8981\u901a\u8fc7\u8be5\u540d\u5b57\u627e\u5230\u5bf9\u5e94\u7684\u58f0\u5361"}),"\n",(0,l.jsx)(e.li,{children:"codec: codec\u7ed3\u6784\u4f53\uff0c\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u7684codec\u8fdb\u884c\u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"platform_type: \u4e0elinux\u4e2dASOC\u6846\u67b6\u7c7b\u4f3c\uff0c\u4e5f\u9700\u8981\u6307\u5b9a\u4f7f\u7528\u54ea\u79cd\u7c7b\u578b\u7684platform,\u5982CPUDAI, DAUDIO\u7b49"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u6ce8\u518cR128 audiocodecdac\u58f0\u5361"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'card_name = "audiocodecdac";\nsnd_card_register(card_name, audio_codec, SND_PLATFORM_TYPE_CPUDAI_DAC);\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e-1",children:"\u58f0\u5361\u52a0\u8f7d\u914d\u7f6e"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"snd_pcm_open"})," \u6253\u5f00\u7684\u58f0\u5361\u540d\u5b57\u90fd\u662f\u7531 ",(0,l.jsx)(e.code,{children:"alsa_config.c"})," \u4e2d\u914d\u7f6e\u7684\uff0c\u8be5\u6587\u4ef6\u4e00\u822c\u5728\uff1a"]}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u6bcf\u4e2a\u65b9\u6848\u76ee\u5f55\u4e0b\u9762\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"projects/\u65b9\u6848/src/alsa_config.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u662fdsp\u65b9\u6848\uff0c\u8be5\u6587\u4ef6\u4f1a\u5728rtos\u2011hal\u4ed3\u5e93\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"rtos\u2011hal/hal/source/sound/component/aw\u2011tiny\u2011alsa\u2011lib/alsa_config.c\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u4e3e\u4f8b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'static DEFINE_SND_PCM_HW_CONFIG(audiocodec, 0);\nconst snd_pcm_config_t snd_pcm_global_configs[] = {\n    SND_PCM_CONFIG("hw:audiocodec", "hw", &snd_audiocodec_hw_config),\n};\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u8868\u793a",(0,l.jsx)(e.code,{children:"snd_pcm_open"}),'\u53ef\u7528"hw',":audiocodec",'"\u540d\u5b57\u6253\u5f00\u58f0\u5361\uff0c\u800c\u5e95\u5c42\u58f0\u5361\u540d\u5b57\u662faudiocodec\u3002']}),"\n",(0,l.jsx)(e.h3,{id:"\u97f3\u91cf\u8bbe\u7f6e",children:"\u97f3\u91cf\u8bbe\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u5f55\u97f3\u6216\u8005\u64ad\u653e\uff0c\u4f1a\u51fa\u73b0\u58f0\u97f3\u8fc7\u5c0f\u6216\u8005\u8fc7\u5927\u7684\u95ee\u9898\u3002\u76ee\u524d\u53ef\u4ee5\u8c03\u6574\u97f3\u91cf\u7684\u6709\u4e24\u5904\uff1a"}),"\n",(0,l.jsx)(e.h4,{id:"\u786c\u4ef6\u97f3\u91cf\u8c03\u6574",children:"\u786c\u4ef6\u97f3\u91cf\u8c03\u6574"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7 amixer \u53bb\u8c03\u6574\u63a7\u4ef6\u3002 \u5bf9\u4e8e dac \u6765\u8bf4\uff0c\u786c\u4ef6\u97f3\u91cf\u5206\u4e3a DAC Digtal volume \u548c LINEOUT volume"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"amixer \u2011c audiocodecdac\nnumid=0, name='DACL dig volume'\nvalue=129, min=0, max=255\nnumid=1, name='DACR dig volume'\nvalue=129, min=0, max=255\nnumid=2, name='LINEOUT volume'\nvalue=5, min=0, max=7\n\namixer \u2011c audiocodecdac set 0 150\namixer \u2011c audiocodecdac set 1 150\n\ndig volume\u662f\u786c\u4ef6\u7684\u6570\u5b57\u97f3\u91cf\u8c03\u8282\u3002\namixer \u2011c audiocodecdac set 2 5\n\u8fd9\u4e2a\u662f\u8f93\u51fa\u7684\u589e\u76ca\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u8ff0\u4e24\u7ec4\u786c\u4ef6\u97f3\u91cf\uff0c\u9700\u8981\u6839\u636e\u786c\u4ef6\u6765\u8bbe\u7f6e\uff0c\u8fc7\u5927\u4f1a\u5bfc\u81f4\u58f0\u97f3\u51fa\u73b0\u5931\u771f\u3002\n\u5bf9\u4e8e adc \u6765\u8bf4\uff0c\u786c\u4ef6\u97f3\u91cf\u6709 ADC Digtal volume \u548c adc pga gain"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"amixer \u2011c audiocodecadc\nnumid=0, name='ADC1 volume'\nvalue=129, min=0, max=255\nnumid=1, name='ADC2 volume'\nvalue=129, min=0, max=255\nnumid=2, name='ADC3 volume'\nvalue=129, min=0, max=255\nnumid=3, name='MIC1 volume'\nvalue=31, min=0, max=31\nnumid=4, name='MIC2 volume'\nvalue=31, min=0, max=31\nnumid=5, name='MIC3 volume'\nvalue=31, min=0, max=31\n\namixer \u2011c audiocodecadc set 0 150\nADC1 volume\u6307\u7684\u662fADC Digtal volume\n\namixer \u2011c audiocodecadc set 3 19\nMIC1 volume\u6307\u7684\u662f\u786c\u4ef6pga gain\u3002\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u8ff0\u786c\u4ef6\u97f3\u91cf\uff0c\u9700\u8981\u6839\u636e\u786c\u4ef6\u6765\u8bbe\u7f6e\uff0c\u8fc7\u5927\u4f1a\u5bfc\u81f4\u58f0\u97f3\u51fa\u73b0\u5931\u771f\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"\u8f6f\u4ef6\u97f3\u91cf\u8c03\u6574",children:"\u8f6f\u4ef6\u97f3\u91cf\u8c03\u6574"}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e\u4f7f\u7528 aw\u2011alsa\u2011lib \u7684\u7cfb\u7edf\uff0c\u53ef\u4ee5\u4f7f\u7528 softvol \u63d2\u4ef6\u3002 \u8be5\u63d2\u4ef6\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u7528\u4e8e\u8c03\u6574\u97f3\u91cf\u7684\u63a7\u4ef6 \u201cSoft Volume Master\u201d\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"amixer \u2011c audiocodec\nnumid=5, name='Soft Volume Master'\nvalue=255, min=0, max=255\n\namixer \u2011c audiocodec set 5 200\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u4e8e\u4f7f\u7528 aw\u2011tiny\u2011alsa\u2011lib \u7684\u7cfb\u7edf\uff0c\u914d\u7f6e AudioSystem \u540e\uff0c\u624d\u80fd\u53ef\u4ee5\u4f7f\u7528 softvol plugin\uff0c\u9ed8\u8ba4\u4f1a \u914d\u7f6e\u8f6f\u4ef6\u97f3\u91cf\u8c03\u8282\u7684\u529f\u80fd\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_volume \u2011h\nUsgae: as_volume [option]\n    \u2011h, as_volume help\n    \u2011t, volume type\n        1:system\n        2:music\n    \u2011m, option mode\n        0:get\n        1:set\n        2:get range\n\nas_volume \u2011t 1 \u2011m 2\nsoftvol(1) read, min=0, max=10\n\nas_volume \u2011t 2 \u2011m 2\nsoftvol(2) read, min=0, max=10\n\n\u8bbe\u7f6esystem\u7c7b\u578b\u7684\u97f3\u9891\u66f2\u7ebf\nas_volume \u2011t 1 \u2011m 1 8\nsoftvol(1) write, value=8,8\n\n\u8bfb\u53d6system\u7c7b\u578b\u7684\u97f3\u9891\u66f2\u7ebf\nas_volume \u2011t 1 \u2011m 0\nsoftvol(1) read, value=8,8\n\n\u8bbe\u7f6emusic\u7c7b\u578b\u7684\u97f3\u9891\u66f2\u7ebf\nas_volume \u2011t 2 \u2011m 1 8\nsoftvol(2) write, value=8,8\n\n\u8bfb\u53d6music\u7c7b\u578b\u7684\u97f3\u9891\u66f2\u7ebf\nas_volume \u2011t 2 \u2011m 0\nsoftvol(2) read, value=8,8\n"})}),"\n",(0,l.jsx)(e.h2,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(e.h3,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,l.jsxs)(e.p,{children:["\u82e5\u4e0b\u5217\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u60a8\u6240\u9047\u5230\u7684\u95ee\u9898\uff0c\u8bf7\u5230 ",(0,l.jsx)(e.a,{href:"https://bbs.aw-ol.com/",children:"\u5168\u5fd7\u5728\u7ebf\u5f00\u53d1\u8005\u8bba\u575b"})," \u53d1\u5e16\u8be2\u95ee"]}),"\n",(0,l.jsx)(e.h4,{id:"\u5f55\u97f3\u6216\u64ad\u653e\u53d8\u901f",children:"\u5f55\u97f3\u6216\u64ad\u653e\u53d8\u901f"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u8ba4\u5f55\u97f3\u548c\u64ad\u653e\u91c7\u6837\u7387\u548c\u7236\u65f6\u949f PLL_AUDIO \u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u9891\u6bb5\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"audiocodec-\u8f93\u5165\u8f93\u51fa\u65e0\u58f0\u97f3",children:"AudioCodec \u8f93\u5165\u8f93\u51fa\u65e0\u58f0\u97f3"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u8ba4\u901a\u8def\u8bbe\u7f6e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7 amixer \u67e5\u770b route \u72b6\u6001\uff0c\u786e\u8ba4\u662f\u5426\u8bbe\u7f6e\u4e86\u9700\u8981\u7684\u4e0a\u4e0b\u7535\u901a\u8def\u3002"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5bf9\u4e8e\u5587\u53ed\uff0c\u786e\u8ba4\u529f\u653e\u82af\u7247\u4f7f\u80fd\u8bbe\u7f6e\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u9a71\u52a8\u6e90\u7801\u4e2d gpio_spk \u7684 GPIO \u914d\u7f6e\u5e76\u548c\u786c\u4ef6\u539f\u7406\u56fe\u6bd4\u5bf9\uff0c\u786e\u8ba4\u662f\u5426\u9002\u914d\u4e86\u5bf9\u5e94\u7684 GPIO\u3002"}),"\n",(0,l.jsx)(e.h4,{id:"dmic-\u5f55\u97f3\u5f02\u5e38\u9759\u97f3\u901a\u9053\u79fb\u4f4d",children:"DMIC \u5f55\u97f3\u5f02\u5e38\uff08\u9759\u97f3/\u901a\u9053\u79fb\u4f4d\uff09"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u8ba4GPIO \u662f\u5426\u6b63\u5e38\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u901a\u8fc7DataSheet \u6838\u5bf9sys_config.fex \u90e8\u5206\u7684DMIC Pin \u8bbe\u7f6e\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5sys_config.fex \u4e0d\u652f\u6301\u5f15\u811a\u8bbe\u7f6e\uff0c\u5219\u5230dmic-sun20iw2.h \u76f4\u63a5\u67e5\u770bg_dmic_gpio \u7ed3\u6784 \u4f53\u7684\u8bbe\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"\u786e\u8ba4CLK \u7684\u9891\u7387\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u4ee5\u4e0a\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u793a\u6ce2\u5668\u67e5\u770bDMIC CLK \u7684\u9891\u7387\u662f\u5426\u6ee1\u8db3",(0,l.jsx)(e.code,{children:"clk_rate = sample * over_sample_rate"}),"\u5173\u7cfb\u3002"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u6392\u67e5\u786c\u4ef6\u8fde\u63a5\u548cDMIC \u7269\u6599\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u5916\u653e\u65e0\u58f0",children:"\u5916\u653e\u65e0\u58f0"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528 aplay \u8fdb\u884c\u64ad\u653e\uff0c\u53d1\u73b0\u5916\u653e\u65e0\u58f0\u3002\u901a\u5e38\u9700\u8981\u6392\u67e5\u4e09\u4e2a\u65b9\u9762\u3002 1. \u901a\u8def\u662f\u5426\u6b63\u786e\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"amixer \u2011c audiocodecdac\nnumid=3, name='LINEOUTL switch'\nvalue=on, enum=off on\n\n\u8bbe\u7f6elineout\u901a\u8def\namixer \u2011c audiocodecdac set 3 1\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u67e5\u770b gpio \u662f\u5426\u6b63\u786e\u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"board/r128s2/pro/configs/sys_config.fex\n[audiocodec]\ndacl_vol = 129\ndacr_vol = 129\nlineout_vol = 5\nlineoutl_en = 1\nlineoutr_en = 0\nmic1_gain = 19\nmic2_gain = 19\nmic3_gain = 0\nmic1_en = 1\nmic2_en = 1\nmic3_en = 1\nmad_bind_en = 0\npa_pin_msleep = 10\npa_pin = port:PB3<1><default><1><1>\ncapture_cma = 30720\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u67e5\u770b\u97f3\u91cf\u662f\u5426\u8bbe\u7f6e\u4e3a 0"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"audiosystem-\u63a5\u53e3\u521b\u5efa\u5b9e\u4f8b\u5931\u8d25",children:"AudioSystem \u63a5\u53e3\u521b\u5efa\u5b9e\u4f8b\u5931\u8d25"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_test \u2011s 2 \u2011d 5 \u2011n playback \u2011r 48000 \u2011c 2\n\n[RV\u2011AudioTrack\u2011ERR][AudioTrackCreateWithStream](562) mt add at failed\nat create failed\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6253\u5f00 as_debug"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_debug 1\nset audio system debug:1\n[RV\u2011AudioSystem\u2011INF][print_test](47) Audio System test\n[RV\u2011AudioSystem\u2011DBG][print_test](48) Audio System test\n[RV\u2011AudioSystem\u2011ERR][print_test](49) Audio System test\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u518d\u6b21\u64ad\u653e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_test \u2011s 2 \u2011d 5 \u2011n playback \u2011r 48000 \u2011c 2\n[RV\u2011AudioTrack\u2011DBG][AudioTrackCreateWithStream](540)\n[RV\u2011MixerThread\u2011DBG][MixerThreadAddAT](445)\n[RV\u2011AudioHW\u2011DBG][find_alias_name](146) ahw alias name:playback vs playback stream:0\n[RV\u2011AudioHW\u2011DBG][find_alias_name](146) ahw alias name:amp\u2011cap vs playback stream:0\n[RV\u2011AudioTrack\u2011ERR][AudioTrackCreateWithStream](562) mt add at failed\nat create failed\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u58f0\u5361\u9a71\u52a8\u5728 RV \u6838\uff0c\u4e0d\u53ef\u80fd\u4f1a\u4f7f\u7528\u8de8\u6838\u63a5\u53e3 \u201camp\u2011cap\u201d\u3002\u4f7f\u7528 ahw_list \u67e5\u770b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"c906> ahw_list\n\naudio hw list:\ninstance |name |read |write\n\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\u2011\naudio hw alias:\np: default \u2011\u2011> playback\nc: default \u2011\u2011> amp\u2011cap\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8bf4\u660e audio_hw \u4e2d\u6ca1\u6709\u672c\u5730\u7684 audio_hw_elem\u3002\u5728\u5f00\u673a\u7684\u65f6\u5019\uff0c\u5e76\u6ca1\u6709\u521d\u59cb\u5316 AudioSystem \u5bfc\u81f4\u7f3a\u5c11\u672c\u5730 audio_hw_elem\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728\u542f\u52a8\u4e2d\u52a0\u4e0a\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u6700\u597d\u662f\u52a0\u5728\u58f0\u5361\u6ce8\u518c\u540e\u3002 ",(0,l.jsx)(e.code,{children:"lichee/rtos/projects/r128s2/pro_c906/src/main.c"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"#ifdef CONFIG_COMPONENTS_AW_AUDIO_SYSTEM\nAudioSystemInit();\n#endif\n"})}),"\n",(0,l.jsx)(e.h4,{id:"audiosystem-\u63a5\u53e3\u64ad\u653e\u5931\u8d25",children:"AudioSystem \u63a5\u53e3\u64ad\u653e\u5931\u8d25"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:'c906> as_test \u2011s 2 \u2011d 5 \u2011n playback \u2011r 48000 \u2011c 2\n\n[RV\u2011AP\u2011chmap\u2011INF][chmap_ap_update_mode](151) ALL \u2011> ch0(average)\n[AWALSA_ERR][_snd_pcm_hw_open:452]no such card:audiocodec\n[AWALSA_ERR][snd_pcm_open:258]pcm "hw:audiocodec": snd_pcm_open_config failed (return: \u201119)\n[RV\u2011AudioHWPCM\u2011ERR][pcm_ahw_open](221) pcm open failed:\u201119\n[RV\u2011AudioTrack\u2011ERR][__AudioTrackWrite](397) writw error(MT transfer data error?)\n[RV\u2011AudioTrack\u2011ERR][_AudioTrackWrite](505) write_size=480, in_size=480, written=\u20111\nat write return \u20111\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u8ff0 log \u53ef\u4ee5\u5f88\u660e\u663e\u7684\u770b\u5230\uff0c\u58f0\u5361\u7684\u540d\u5b57\u4e0d\u5339\u914d\uff0c\u5bfc\u81f4\u6253\u5f00\u58f0\u5361\u5931\u8d25\u3002\u67e5\u770b\u58f0\u5361\u7684\u540d\u5b57\uff0c\u4ee5 R128 \u4e3a\u4f8b\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"c906>soundcard \u2011l\nSound Card list:\ncard_num card_name\n    0 audiocodecdac\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6539\u4e3a0 \u58f0\u5361\uff0c\u6b63\u5e38\u64ad\u653e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"c906> as_test \u2011s 0 \u2011d 5 \u2011n playback \u2011r 48000 \u2011c 2\n"})}),"\n",(0,l.jsx)(e.h4,{id:"audiosystem-\u63a5\u53e3\u5f55\u97f3\u5931\u8d25",children:"AudioSystem \u63a5\u53e3\u5f55\u97f3\u5931\u8d25"}),"\n",(0,l.jsx)(e.p,{children:"\u8f93\u5165\u7684\u6307\u4ee4\u662f\u6b63\u786e\u7684\uff0c\u4f46\u662f\u8bbe\u7f6e\u53c2\u6570\u5374\u5931\u8d25\u3002log\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"as_test \u2011s 1 \u2011d 3 \u2011c 2 \u2011m amp \u2011t\n\n[RV\u2011AudioRecord\u2011INF][AudioRecordParamSetup](153) create tbuf:0000000008313AA0, 1920\n[RV\u2011AP\u2011chmap\u2011INF][chmap_ap_update_mode](153) ch0 \u2011> ch0\n[SND_ERR][sunxi_codec_hw_params:1036]capture only support 1~3 channel\n[RV\u2011AP\u2011chmap\u2011INF][chmap_ap_update_mode](153) ch1 \u2011> ch1\n[SND_ERR][soc_pcm_hw_params:434]codec_dai set hw params failed\n[ar_task] line:549 buf:00000000083EE960, 192000\nUnable to install hw prams!\nc906>[DSP\u2011AudioRecord\u2011ERR][__AudioRecordRead](228) read error(ST transfer data error?)\nAudioRecordReadRM failed!!, return \u20111\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8fd9\u4e2a\u95ee\u9898\u4e5f\u6bd4\u8f83\u5e38\u89c1\uff0c\u56e0\u4e3a\u9a71\u52a8\u589e\u52a0\u4e86\u68c0\u67e5\uff0c\u6ca1\u6709\u8bbe\u7f6e\u901a\u8def\uff0c\u76f4\u63a5\u5f55\u97f3\u5c31\u4f1a\u5bfc\u81f4\u8fd9\u4e2a\u9519\u8bef\u3002\u8ddf\u5916\u653e\u65e0\u58f0\u7c7b\u4f3c\uff0c\u51fa\u73b0\u5f55\u97f3\u5931\u8d25\u6216\u65e0\u58f0\u7684\u95ee\u9898\uff0c\u4e5f\u662f\u6309\u7167\u4e0b\u9762\u7684\u987a\u5e8f\u6392\u67e5\u3002 1. \u5f55\u97f3\u901a\u8def\u662f\u5426\u6b63\u786e\u914d\u7f6e\u3002 2. \u5f55\u97f3\u97f3\u91cf\u662f\u5426\u8bbe\u7f6e\u4e3a 0\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u5176\u4ed6",children:"\u5176\u4ed6"}),"\n",(0,l.jsx)(e.h3,{id:"gpio-\u529f\u80fd\u590d\u7528\u914d\u7f6e",children:"GPIO \u529f\u80fd\u590d\u7528\u914d\u7f6e"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"AudioCodec \u6a21\u5757\uff1a"}),"\n",(0,l.jsx)(e.li,{children:"\u6240\u7528\u5f15\u811a\u529f\u80fd\u5747\u56fa\u5316\uff0c\u65e0\u9700\u8fdb\u884c pin \u529f\u80fd\u590d\u7528\u914d\u7f6e\u3002"}),"\n",(0,l.jsx)(e.li,{children:"I2S/PCM\uff0cSPDIF\uff0cDMIC \u6a21\u5757\uff1a"}),"\n",(0,l.jsx)(e.li,{children:"\u53ef\u9009\u62e9\u4e0d\u8fdb\u884c pin \u529f\u80fd\u590d\u7528\u914d\u7f6e\uff0c\u8be5\u60c5\u51b5\u4ecd\u53ef\u751f\u6210\u58f0\u5361\uff0c\u4f46\u5f15\u811a\u65e0\u5b9e\u9645\u8f93\u5165\u8f93\u51fa\u529f\u80fd\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u9a71\u52a8\u4f1a\u76f4\u63a5\u4ece\u914d\u7f6e\u6587\u4ef6\u83b7\u53d6\u8282\u70b9\u7684\u6240\u6709\u5f15\u811a\uff0c\u4e0e\u5f15\u811a\u7684\u540d\u79f0\u65e0\u5173"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"# port:\u7aef\u53e3+\u7ec4\u5185\u5e8f\u53f7<\u529f\u80fd\u5206\u914d><\u5185\u90e8\u7535\u963b\u72b6\u6001><\u9a71\u52a8\u80fd\u529b><\u8f93\u51fa\u7535\u5e73\u72b6\u6001> \n# <> \u5185\u4e3a\u9ed8\u8ba4\u503c\u5219\u53d6 default\n\npin_xxx = port:PA23<2><0><1><default>\n"})})]})}function o(n={}){const{wrapper:e}={...(0,d.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>r,a:()=>c});var l=i(7294);const d={},s=l.createContext(d);function c(n){const e=l.useContext(s);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:c(n.components),l.createElement(s.Provider,{value:e},n.children)}}}]);