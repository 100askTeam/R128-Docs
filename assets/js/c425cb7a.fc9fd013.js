"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5006],{3916:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>a,frontMatter:()=>c,metadata:()=>r,toc:()=>_});var d=s(5893),l=s(1151);const c={},i="DBI\u9a71\u52a8ST7789V1.3\u5bf8LCD",r={id:"demo/part1/chapter18",title:"DBI\u9a71\u52a8ST7789V1.3\u5bf8LCD",description:"\u4e4b\u524d\u4ecb\u7ecd\u4e86 R128 \u5e73\u53f0\u4f7f\u7528 SPI \u9a71\u52a8\u663e\u793a\u5c4f ST7789V1.3\u5bf8 LCD\uff0c\u63a5\u4e0b\u6765\u4ecb\u7ecd\u7684\u662f\u4f7f\u7528 DBI \u63a5\u53e3\u9a71\u52a8\u3002",source:"@site/docs/demo/part1/chapter18.md",sourceDirName:"demo/part1",slug:"/demo/part1/chapter18",permalink:"/demo/part1/chapter18",draft:!1,unlisted:!1,editUrl:"https://github.com/100askTeam/R128-Docs/tree/main/docs/demo/part1/chapter18.md",tags:[],version:"current",frontMatter:{},sidebar:"classparttwoSidebar",previous:{title:"DBI \u9a71\u52a8 TFT LCD \u5c4f",permalink:"/demo/part1/chapter17"},next:{title:"\u6309\u952e\u8f93\u5165",permalink:"/demo/part1/chapter2"}},t={},_=[{value:"\u8f7d\u5165\u65b9\u6848",id:"\u8f7d\u5165\u65b9\u6848",level:2},{value:"\u8bbe\u7f6e DBI \u9a71\u52a8",id:"\u8bbe\u7f6e-dbi-\u9a71\u52a8",level:2},{value:"\u914d\u7f6e SPI \u5f15\u811a",id:"\u914d\u7f6e-spi-\u5f15\u811a",level:3},{value:"\u8bbe\u7f6e PWM \u9a71\u52a8",id:"\u8bbe\u7f6e-pwm-\u9a71\u52a8",level:2},{value:"\u914d\u7f6e PWM \u5f15\u811a",id:"\u914d\u7f6e-pwm-\u5f15\u811a",level:3},{value:"\u8bbe\u7f6e SPI LCD \u9a71\u52a8",id:"\u8bbe\u7f6e-spi-lcd-\u9a71\u52a8",level:2},{value:"\u7f16\u5199 SPI LCD \u663e\u793a\u5c4f\u9a71\u52a8",id:"\u7f16\u5199-spi-lcd-\u663e\u793a\u5c4f\u9a71\u52a8",level:2},{value:"\u83b7\u53d6\u5c4f\u5e55\u521d\u59cb\u5316\u5e8f\u5217",id:"\u83b7\u53d6\u5c4f\u5e55\u521d\u59cb\u5316\u5e8f\u5217",level:3},{value:"\u7528\u73b0\u6210\u9a71\u52a8\u6539\u5199 SPI LCD \u9a71\u52a8",id:"\u7528\u73b0\u6210\u9a71\u52a8\u6539\u5199-spi-lcd-\u9a71\u52a8",level:3},{value:"\u7f16\u5199\u521d\u59cb\u5316\u5e8f\u5217",id:"\u7f16\u5199\u521d\u59cb\u5316\u5e8f\u5217",level:3},{value:"\u5bf9\u63a5\u9a71\u52a8\u6846\u67b6",id:"\u5bf9\u63a5\u9a71\u52a8\u6846\u67b6",level:3},{value:"\u9009\u62e9 ST7789V \u9a71\u52a8",id:"\u9009\u62e9-st7789v-\u9a71\u52a8",level:3},{value:"\u914d\u7f6e SPI LCD \u5f15\u811a",id:"\u914d\u7f6e-spi-lcd-\u5f15\u811a",level:3},{value:"\u7f16\u8bd1\u6253\u5305",id:"\u7f16\u8bd1\u6253\u5305",level:2},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"LVGL \u989c\u8272\u5f02\u5e38",id:"lvgl-\u989c\u8272\u5f02\u5e38",level:3},{value:"\u51fa\u73b0\u90e8\u5206\u82b1\u5c4f",id:"\u51fa\u73b0\u90e8\u5206\u82b1\u5c4f",level:3},{value:"SPI LCD \u989c\u8272\u76f8\u5173\u95ee\u9898",id:"spi-lcd-\u989c\u8272\u76f8\u5173\u95ee\u9898",level:3},{value:"RGB565\u548cRGB666",id:"rgb565\u548crgb666",level:4},{value:"SPI \u63a5\u53e3",id:"spi-\u63a5\u53e3",level:4}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"dbi\u9a71\u52a8st7789v13\u5bf8lcd",children:"DBI\u9a71\u52a8ST7789V1.3\u5bf8LCD"}),"\n",(0,d.jsx)(n.p,{children:"\u4e4b\u524d\u4ecb\u7ecd\u4e86 R128 \u5e73\u53f0\u4f7f\u7528 SPI \u9a71\u52a8\u663e\u793a\u5c4f ST7789V1.3\u5bf8 LCD\uff0c\u63a5\u4e0b\u6765\u4ecb\u7ecd\u7684\u662f\u4f7f\u7528 DBI \u63a5\u53e3\u9a71\u52a8\u3002"}),"\n",(0,d.jsx)(n.p,{children:"R128 \u5e73\u53f0\u63d0\u4f9b\u4e86 SPI DBI \u7684 SPI TFT \u63a5\u53e3\uff0c\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Supports DBI Type C 3 Line/4 Line Interface Mode"}),"\n",(0,d.jsx)(n.li,{children:"Supports 2 Data Lane Interface Mode"}),"\n",(0,d.jsx)(n.li,{children:"Supports data source from CPU or DMA"}),"\n",(0,d.jsx)(n.li,{children:"Supports RGB111/444/565/666/888 video format"}),"\n",(0,d.jsx)(n.li,{children:"Maximum resolution of RGB666 240 x 320@30Hz with single data lane"}),"\n",(0,d.jsx)(n.li,{children:"Maximum resolution of RGB888 240 x 320@60Hz or 320 x 480@30Hz with dual data lane"}),"\n",(0,d.jsx)(n.li,{children:"Supports tearing effect"}),"\n",(0,d.jsx)(n.li,{children:"Supports software flexible control video frame rate"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u540c\u65f6\uff0c\u63d0\u4f9b\u4e86 SPILCD \u9a71\u52a8\u6846\u67b6\u4ee5\u4f9b SPI \u5c4f\u5e55\u4f7f\u7528\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u6b64\u6b21\u9002\u914d\u7684SPI\u5c4f\u4e3a ",(0,d.jsx)(n.code,{children:"ZJY130S0800TG01"}),"\uff0c\u4f7f\u7528\u7684\u662f DBI \u8fdb\u884c\u9a71\u52a8\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["DBI\u63a5\u53e3\u7684\u5168\u79f0\u662f ",(0,d.jsx)(n.code,{children:"Display Bus Serial Interface"})," \uff0c\u5728\u663e\u793a\u5c4f\u6570\u636e\u624b\u518c\u4e2d\uff0c\u4e00\u822c\u4f1a\u8bf4\u8fd9\u662fSPI\u63a5\u53e3\uff0c\u6240\u4ee5\u6709\u4eba\u4f1a\u8bef\u8ba4\u4e3aSPI\u5c4f\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"normal spi"})," \u53bb\u76f4\u63a5\u9a71\u52a8\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["SPI \u63a5\u53e3\u5c31\u662f\u4fd7\u79f0\u76844\u7ebf\u6a21\u5f0f\uff0c\u8fd9\u662f\u56e0\u4e3a\u53d1\u9001\u6570\u636e\u65f6\u9700\u8981\u989d\u5916\u501f\u52a9",(0,d.jsx)(n.code,{children:"DC"}),"\u7ebf\u6765\u533a\u5206\u547d\u4ee4\u548c\u6570\u636e\uff0c\u4e0e",(0,d.jsx)(n.code,{children:"sclk"}),"\uff0c",(0,d.jsx)(n.code,{children:"cs"}),"\u548c",(0,d.jsx)(n.code,{children:"sda"}),"\u5171\u56db\u7ebf\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image1.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"DBI \u5206\u4e3a\u591a\u79cd\u63a5\u53e3\uff0c\u5305\u62ec"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"0\uff1aL3I1\n1\uff1aL3I2\n2\uff1aL4I1\n3\uff1aL4I2\n4\uff1aD2LI\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"L3I1"}),"\u548c",(0,d.jsx)(n.code,{children:"L3I2"}),"\u662f\u4e09\u7ebf\u6a21\u5f0f\uff08\u4e0d\u9700\u8981",(0,d.jsx)(n.code,{children:"DC"}),"\u811a\uff09\uff0c\u533a\u522b\u662f\u8bfb\u65f6\u5e8f\uff0c\u4e5f\u5c31\u662f\u662f\u5426\u9700\u8981\u989d\u5916\u811a\u6765\u8bfb\u5bc4\u5b58\u5668\u3002\u8bfb\u5199\u65f6\u5e8f\u56fe\u5982\u4e0b\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"L3I1\u5199\u65f6\u5e8f"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image2.png",alt:""})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"L3I1\u8bfb\u65f6\u5e8f"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image3.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"L4I1"}),"\u548c",(0,d.jsx)(n.code,{children:"L4I2"}),"\u662f\u56db\u7ebf\u6a21\u5f0f\uff0c\u4e0espi\u63a5\u53e3\u534f\u8bae\u4e00\u6837\uff0c\u533a\u522b\u662fDC\u811a\u7684\u63a7\u5236\u662f\u5426\u81ea\u52a8\u5316\u63a7\u5236\uff0c\u53e6\u5916I2\u548cI1\u7684\u533a\u522b\u662f\u8bfb\u65f6\u5e8f\uff0c\u4e5f\u5c31\u662f\u5426\u9700\u8981\u989d\u5916\u811a\u6765\u8bfb\u53d6\u5bc4\u5b58\u5668\u3002 - L4I\u5199\u65f6\u5e8f"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image4.png",alt:""})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"L4I\u8bfb\u65f6\u5e8f"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image5.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"D2LI"}),"\u662f\u4e24data lane\u6a21\u5f0f\u3002\u53d1\u9001\u547d\u4ee4\u90e8\u5206\u65f6\u5e8f\u4e0e\u8bfb\u65f6\u5e8f\u4e0e",(0,d.jsx)(n.code,{children:"L3I1"}),"\u4e00\u81f4\uff0c\u4e0b\u56fe\u662f\u53d1\u9001\u6570\u636e\u65f6\u7684\u65f6\u5e8f\uff0c\u4e0d\u540c\u50cf\u7d20\u683c\u5f0f\u65f6\u949f\u5468\u671f\u6570\u91cf\u4e0d\u4e00\u6837\u3002 - D2LI\u5199\u65f6\u5e8f",(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image6.png",alt:""})]}),"\n",(0,d.jsxs)(n.p,{children:["\u53ef\u4ee5\u77e5\u9053\uff0c\u57283\u7ebf\u6a21\u5f0f\u65f6\uff0c\u53d1\u9001\u547d\u4ee4\u524d\u67091\u4f4dA0\u7528\u4e8e\u6307\u793a\u5f53\u524d\u53d1\u9001\u7684\u662f\u6570\u636e\uff0c\u8fd8\u662f\u547d\u4ee4\u3002\u800c\u547d\u4ee4\u540e\u9762\u63a5\u7740\u7684\u6570\u636e\u5c31\u6ca1\u6709\u8fd9\u4e2aA0\u4f4d\u4e86\uff0c\u4ee3\u8868 SPI \u9700\u8981\u5728 9 \u4f4d\u548c 8 \u4f4d\u4e4b\u95f4\u6765\u56de\u5207\u6362\uff0c\u800c\u5728\u8bfb\u6570\u636e\u65f6\uff0c\u66f4\u662f\u9700\u8981\u5ef6\u65f6 ",(0,d.jsx)(n.code,{children:"dummy clock"})," \u624d\u80fd\u8bfb\u6570\u636e\uff0c",(0,d.jsx)(n.code,{children:"normal spi"})," \u90fd\u5f88\u96be\uff0c\u751a\u81f3\u65e0\u6cd5\u5b9e\u73b0\u3002\u6240\u4ee5 ",(0,d.jsx)(n.code,{children:"normal spi"})," \u53ea\u80fd\u6a21\u62df 4 \u7ebf\u7684 DBI \u7684\u5199\u64cd\u4f5c\u3002\u8bfb\u64cd\u4f5c\u53ea\u80fd\u901a\u8fc7\u6a21\u62dfIO\u6765\u5b9e\u73b0\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5bf9\u4e8eR128\u8fd9\u7c7b\u652f\u6301 DBI \u63a5\u53e3\u7684CPU\uff0c\u53ef\u4ee5\u9009\u62e9\u4e0d\u53bb\u4e86\u89e3 SPI\u3002\u76f4\u63a5\u9009\u7528 DBI \u6765\u9a71\u52a8\u5c4f\u5e55\u3002\u7531\u4e8e\u4e0d\u9700\u8981\u6a21\u62df\u5ef6\u65f6\u548c\u5207\u6362\u6570\u636e\uff0c\u5c4f\u5e55\u9a71\u52a8\u6548\u7387\u5c06\u6709\u660e\u663e\u63d0\u5347\u3002"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image7.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u5f15\u811a\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"R128 Devkit"}),(0,d.jsx)(n.th,{children:"TFT \u6a21\u5757"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA12"}),(0,d.jsx)(n.td,{children:"CS"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA13"}),(0,d.jsx)(n.td,{children:"SCL"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA18"}),(0,d.jsx)(n.td,{children:"SDA"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA9"}),(0,d.jsx)(n.td,{children:"BLK"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA20"}),(0,d.jsx)(n.td,{children:"RES"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PA19"}),(0,d.jsx)(n.td,{children:"DC"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3V3"}),(0,d.jsx)(n.td,{children:"VCC"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GND"}),(0,d.jsx)(n.td,{children:"GND"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\u8f7d\u5165\u65b9\u6848",children:"\u8f7d\u5165\u65b9\u6848"}),"\n",(0,d.jsxs)(n.p,{children:["\u6211\u4eec\u4f7f\u7528\u7684\u5f00\u53d1\u677f\u662f R128-Devkit\uff0c\u9700\u8981\u5f00\u53d1 C906 \u6838\u5fc3\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u6240\u4ee5\u8f7d\u5165\u65b9\u6848\u9009\u62e9 ",(0,d.jsx)(n.code,{children:"r128s2_module_c906"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"$ source envsetup.sh \n$ lunch_rtos 1\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image8.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u8bbe\u7f6e-dbi-\u9a71\u52a8",children:"\u8bbe\u7f6e DBI \u9a71\u52a8"}),"\n",(0,d.jsxs)(n.p,{children:["\u5c4f\u5e55\u4f7f\u7528\u7684\u662fSPI\u9a71\u52a8\uff0c\u6240\u4ee5\u9700\u8981\u52fe\u9009SPI\u9a71\u52a8\uff0c\u8fd0\u884c ",(0,d.jsx)(n.code,{children:"mrtos_menuconfig"})," \u8fdb\u5165\u914d\u7f6e\u9875\u9762\u3002\u524d\u5f80\u4e0b\u5217\u5730\u5740\u627e\u5230 ",(0,d.jsx)(n.code,{children:"SPI Devices"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"Drivers Options  ---\x3e\n    soc related device drivers  ---\x3e\n        DBI Devices ---\x3e\n        -*- enable dbi driver\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image9.png",alt:""})}),"\n",(0,d.jsx)(n.h3,{id:"\u914d\u7f6e-spi-\u5f15\u811a",children:"\u914d\u7f6e SPI \u5f15\u811a"}),"\n",(0,d.jsxs)(n.p,{children:["DBI\u540c\u6837\u4f7f\u7528 SPI \u63a7\u5236\u5668\uff0c\u6240\u4ee5\u9700\u8981\u914d\u7f6eSPI\u7684\u76f8\u5173\u914d\u7f6e\u3002\u6253\u5f00\u4f60\u559c\u6b22\u7684\u7f16\u8f91\u5668\uff0c\u4fee\u6539\u6587\u4ef6\uff1a",(0,d.jsx)(n.code,{children:"board/r128s2/module/configs/sys_config.fex"}),"\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u4e0d\u9700\u8981\u7528\u5230SPI WP\u5f15\u811a\uff0c\u6ce8\u91ca\u6389\u5373\u53ef\u3002SPI HOLD \u9700\u8981\u4f5c\u4e3a DC \u811a\u63a5\u5165LCD\u6a21\u5757\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:";----------------------------------------------------------------------------------\n;SPI controller configuration\n;----------------------------------------------------------------------------------\n;Please config spi in dts\n[spi1]\nspi1_used       = 1\nspi1_cs_number  = 1\nspi1_cs_bitmap  = 1\nspi1_cs0        = port:PA12<6><0><3><default>\nspi1_sclk       = port:PA13<6><0><3><default>\nspi1_mosi       = port:PA18<6><0><3><default>\nspi1_miso       = port:PA21<6><0><3><default>\nspi1_hold       = port:PA19<6><0><2><default>\n;spi1_wp         = port:PA20<6><0><2><default>\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image10.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u8bbe\u7f6e-pwm-\u9a71\u52a8",children:"\u8bbe\u7f6e PWM \u9a71\u52a8"}),"\n",(0,d.jsxs)(n.p,{children:["\u5c4f\u5e55\u80cc\u5149\u4f7f\u7528\u7684\u662fPWM\u9a71\u52a8\uff0c\u6240\u4ee5\u9700\u8981\u52fe\u9009PWM\u9a71\u52a8\uff0c\u8fd0\u884c ",(0,d.jsx)(n.code,{children:"mrtos_menuconfig"})," \u8fdb\u5165\u914d\u7f6e\u9875\u9762\u3002\u524d\u5f80\u4e0b\u5217\u5730\u5740\u627e\u5230 ",(0,d.jsx)(n.code,{children:"PWM Devices"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Drivers Options  ---\x3e\n    soc related device drivers  ---\x3e\n        PWM Devices ---\x3e\n        -*- enable pwm driver\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image11.png",alt:""})}),"\n",(0,d.jsx)(n.h3,{id:"\u914d\u7f6e-pwm-\u5f15\u811a",children:"\u914d\u7f6e PWM \u5f15\u811a"}),"\n",(0,d.jsxs)(n.p,{children:["\u6253\u5f00\u4f60\u559c\u6b22\u7684\u7f16\u8f91\u5668\uff0c\u4fee\u6539\u6587\u4ef6\uff1a",(0,d.jsx)(n.code,{children:"board/r128s2/module/configs/sys_config.fex"}),"\uff0c\u589e\u52a0 PWM1 \u8282\u70b9"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"[pwm1]\npwm_used        = 1\npwm_positive    = port:PA9<4><0><3><default>\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image12.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u8bbe\u7f6e-spi-lcd-\u9a71\u52a8",children:"\u8bbe\u7f6e SPI LCD \u9a71\u52a8"}),"\n",(0,d.jsxs)(n.p,{children:["SPI LCD \u7531\u4e13\u95e8\u7684\u9a71\u52a8\u7ba1\u7406\u3002\u8fd0\u884c ",(0,d.jsx)(n.code,{children:"mrtos_menuconfig"})," \u8fdb\u5165\u914d\u7f6e\u9875\u9762\u3002\u524d\u5f80\u4e0b\u5217\u5730\u5740\u627e\u5230 ",(0,d.jsx)(n.code,{children:"SPILCD Devices"})," \uff0c\u6ce8\u610f\u540c\u65f6\u52fe\u9009 ",(0,d.jsx)(n.code,{children:"spilcd hal APIs test"})," \u65b9\u4fbf\u6d4b\u8bd5\u4f7f\u7528\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Drivers Options  ---\x3e\n    soc related device drivers  ---\x3e\n        [*] DISP Driver Support(spi_lcd)\n        [*]   spilcd hal APIs test\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image13.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u7f16\u5199-spi-lcd-\u663e\u793a\u5c4f\u9a71\u52a8",children:"\u7f16\u5199 SPI LCD \u663e\u793a\u5c4f\u9a71\u52a8"}),"\n",(0,d.jsx)(n.h3,{id:"\u83b7\u53d6\u5c4f\u5e55\u521d\u59cb\u5316\u5e8f\u5217",children:"\u83b7\u53d6\u5c4f\u5e55\u521d\u59cb\u5316\u5e8f\u5217"}),"\n",(0,d.jsx)(n.p,{children:"\u9996\u5148\u8be2\u95ee\u5c4f\u5382\u63d0\u4f9b\u9a71\u52a8\u6e90\u7801"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image14.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u627e\u5230 LCD \u7684\u521d\u59cb\u5316\u5e8f\u5217\u4ee3\u7801"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image15.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u627e\u5230\u5c4f\u5e55\u521d\u59cb\u5316\u7684\u6e90\u7801"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image16.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u6574\u7406\u540e\u7684\u521d\u59cb\u5316\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"LCD_WR_REG(0x11); // Sleep out \ndelay_ms(120);    // Delay 120ms \n//************* Start Initial Sequence **********// \nLCD_WR_REG(0x36);\nLCD_WR_DATA8(0x00);\n\nLCD_WR_REG(0x3A);     \nLCD_WR_DATA8(0x05);   \n\nLCD_WR_REG(0xB2);     \nLCD_WR_DATA8(0x1F);   \nLCD_WR_DATA8(0x1F);   \nLCD_WR_DATA8(0x00);   \nLCD_WR_DATA8(0x33);   \nLCD_WR_DATA8(0x33);   \n\nLCD_WR_REG(0xB7);     \nLCD_WR_DATA8(0x35);   \n\nLCD_WR_REG(0xBB);     \nLCD_WR_DATA8(0x20);   // 2b\n\nLCD_WR_REG(0xC0);     \nLCD_WR_DATA8(0x2C);   \n\nLCD_WR_REG(0xC2);     \nLCD_WR_DATA8(0x01);   \n\nLCD_WR_REG(0xC3);     \nLCD_WR_DATA8(0x01);   \n\nLCD_WR_REG(0xC4);     \nLCD_WR_DATA8(0x18);   // VDV, 0x20:0v\n\nLCD_WR_REG(0xC6);     \nLCD_WR_DATA8(0x13);   // 0x13:60Hz   \n\nLCD_WR_REG(0xD0);     \nLCD_WR_DATA8(0xA4);   \nLCD_WR_DATA8(0xA1);   \n\nLCD_WR_REG(0xD6);     \nLCD_WR_DATA8(0xA1);   // sleep in\u540e\uff0cgate\u8f93\u51fa\u4e3aGND\n\nLCD_WR_REG(0xE0);     \nLCD_WR_DATA8(0xF0);   \nLCD_WR_DATA8(0x04);   \nLCD_WR_DATA8(0x07);   \nLCD_WR_DATA8(0x04);   \nLCD_WR_DATA8(0x04);   \nLCD_WR_DATA8(0x04);   \nLCD_WR_DATA8(0x25);   \nLCD_WR_DATA8(0x33);   \nLCD_WR_DATA8(0x3C);   \nLCD_WR_DATA8(0x36);   \nLCD_WR_DATA8(0x14);   \nLCD_WR_DATA8(0x12);   \nLCD_WR_DATA8(0x29);   \nLCD_WR_DATA8(0x30);   \n\nLCD_WR_REG(0xE1);     \nLCD_WR_DATA8(0xF0);   \nLCD_WR_DATA8(0x02);   \nLCD_WR_DATA8(0x04);   \nLCD_WR_DATA8(0x05);   \nLCD_WR_DATA8(0x05);   \nLCD_WR_DATA8(0x21);   \nLCD_WR_DATA8(0x25);   \nLCD_WR_DATA8(0x32);   \nLCD_WR_DATA8(0x3B);   \nLCD_WR_DATA8(0x38);   \nLCD_WR_DATA8(0x12);   \nLCD_WR_DATA8(0x14);   \nLCD_WR_DATA8(0x27);   \nLCD_WR_DATA8(0x31);   \n\nLCD_WR_REG(0xE4);     \nLCD_WR_DATA8(0x1D);   // \u4f7f\u7528240\u6839gate  (N+1)*8\nLCD_WR_DATA8(0x00);   // \u8bbe\u5b9agate\u8d77\u70b9\u4f4d\u7f6e\nLCD_WR_DATA8(0x00);   // \u5f53gate\u6ca1\u6709\u7528\u5b8c\u65f6\uff0cbit4(TMG)\u8bbe\u4e3a0\n\nLCD_WR_REG(0x21);     \n\nLCD_WR_REG(0x29);     \n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u73b0\u6210\u9a71\u52a8\u6539\u5199-spi-lcd-\u9a71\u52a8",children:"\u7528\u73b0\u6210\u9a71\u52a8\u6539\u5199 SPI LCD \u9a71\u52a8"}),"\n",(0,d.jsxs)(n.p,{children:["\u9009\u62e9\u4e00\u4e2a\u73b0\u6210\u7684 SPI LCD \u6539\u5199\u5373\u53ef\uff0c\u8fd9\u91cc\u9009\u62e9 ",(0,d.jsx)(n.code,{children:"nv3029s.c"})," \u9a71\u52a8\u6765\u4fee\u6539"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image17.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u590d\u5236\u8fd9\u4e24\u4e2a\u9a71\u52a8\uff0c\u91cd\u547d\u540d\u4e3a ",(0,d.jsx)(n.code,{children:"st7789v.c"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image18.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u5148\u7f16\u8f91 ",(0,d.jsx)(n.code,{children:"st7789v.h"})," \u5c06 ",(0,d.jsx)(n.code,{children:"nv3029s"})," \u6539\u6210 ",(0,d.jsx)(n.code,{children:"st7789v"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image19.png",alt:""})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:'#ifndef _ST7789V_H\n#define _ST7789V_H\n\n#include "panels.h"\n\nstruct __lcd_panel st7789v_panel;\n\n#endif /*End of file*/\n'})}),"\n",(0,d.jsxs)(n.p,{children:["\u7f16\u8f91 ",(0,d.jsx)(n.code,{children:"st7789v.c"})," \u5c06 ",(0,d.jsx)(n.code,{children:"nv3029s"})," \u6539\u6210 ",(0,d.jsx)(n.code,{children:"st7789v"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image20.png",alt:""})}),"\n",(0,d.jsx)(n.h3,{id:"\u7f16\u5199\u521d\u59cb\u5316\u5e8f\u5217",children:"\u7f16\u5199\u521d\u59cb\u5316\u5e8f\u5217"}),"\n",(0,d.jsxs)(n.p,{children:["\u5148\u5220\u9664 ",(0,d.jsx)(n.code,{children:"static void LCD_panel_init(unsigned int sel)"})," \u4e2d\u7684\u521d\u59cb\u5316\u51fd\u6570\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image21.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u540e\u5c06\u5c4f\u5382\u63d0\u4f9b\u7684\u521d\u59cb\u5316\u5e8f\u5217\u590d\u5236\u8fdb\u6765"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image22.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u6309\u7167 ",(0,d.jsx)(n.code,{children:"spi_lcd"})," \u6846\u67b6\u7684\u63a5\u53e3\u6539\u5199\u9a71\u52a8\u63a5\u53e3\uff0c\u5177\u4f53\u63a5\u53e3\u5982\u4e0b"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u5c4f\u5382\u51fd\u6570"}),(0,d.jsx)(n.th,{children:"SPILCD\u6846\u67b6\u63a5\u53e3"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LCD_WR_REG"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sunxi_lcd_cmd_write"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LCD_WR_DATA8"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sunxi_lcd_para_write"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"delay_ms"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sunxi_lcd_delay_ms"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u66ff\u6362"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image23.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u5b8c\u6210\u540e\u5982\u4e0b"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image24.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u5bf9\u7167\u5c4f\u5382\u63d0\u4f9b\u7684\u9a71\u52a8\u4fee\u6539 ",(0,d.jsx)(n.code,{children:"address"})," \u51fd\u6570"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image25.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u505a\u5982\u4e0b\u4fee\u6539"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"static void address(unsigned int sel, int x, int y, int width, int height)\n{\n    sunxi_lcd_cmd_write(sel, 0x2B); /* Set row address */\n    sunxi_lcd_para_write(sel, (y >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, y & 0xff);\n    sunxi_lcd_para_write(sel, (height >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, height & 0xff);\n    sunxi_lcd_cmd_write(sel, 0x2A); /* Set coloum address */\n    sunxi_lcd_para_write(sel, (x >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, x & 0xff);\n    sunxi_lcd_para_write(sel, (width >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, width & 0xff);\n    sunxi_lcd_cmd_write(sel, 0x2c);\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5b8c\u6210\u9a71\u52a8\u5982\u4e0b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:'#include "st7789v.h"\n\nstatic void LCD_power_on(u32 sel);\nstatic void LCD_power_off(u32 sel);\nstatic void LCD_bl_open(u32 sel);\nstatic void LCD_bl_close(u32 sel);\nstatic void LCD_panel_init(u32 sel);\nstatic void LCD_panel_exit(u32 sel);\n#define RESET(s, v) sunxi_lcd_gpio_set_value(s, 0, v)\n#define power_en(sel, val) sunxi_lcd_gpio_set_value(sel, 0, val)\n\nstatic struct disp_panel_para info[LCD_FB_MAX];\n\nstatic void address(unsigned int sel, int x, int y, int width, int height)\n{\n    sunxi_lcd_cmd_write(sel, 0x2B); /* Set row address */\n    sunxi_lcd_para_write(sel, (y >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, y & 0xff);\n    sunxi_lcd_para_write(sel, (height >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, height & 0xff);\n    sunxi_lcd_cmd_write(sel, 0x2A); /* Set coloum address */\n    sunxi_lcd_para_write(sel, (x >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, x & 0xff);\n    sunxi_lcd_para_write(sel, (width >> 8) & 0xff);\n    sunxi_lcd_para_write(sel, width & 0xff);\n    sunxi_lcd_cmd_write(sel, 0x2c);\n}\n\nstatic void LCD_panel_init(unsigned int sel)\n{\n    if (bsp_disp_get_panel_info(sel, &info[sel])) {\n        lcd_fb_wrn("get panel info fail!\\n");\n        return;\n    }\n\n    sunxi_lcd_cmd_write(sel, 0x11); // Sleep out \n    sunxi_lcd_delay_ms(120);    // Delay 120ms \n    //************* Start Initial Sequence **********// \n    sunxi_lcd_cmd_write(sel, 0x36);\n    sunxi_lcd_para_write(sel, 0x00);\n\n    sunxi_lcd_cmd_write(sel, 0x3A);     \n    sunxi_lcd_para_write(sel, 0x05);   \n\n    sunxi_lcd_cmd_write(sel, 0xB2);     \n    sunxi_lcd_para_write(sel, 0x1F);   \n    sunxi_lcd_para_write(sel, 0x1F);   \n    sunxi_lcd_para_write(sel, 0x00);   \n    sunxi_lcd_para_write(sel, 0x33);   \n    sunxi_lcd_para_write(sel, 0x33);   \n\n    sunxi_lcd_cmd_write(sel, 0xB7);     \n    sunxi_lcd_para_write(sel, 0x35);   \n\n    sunxi_lcd_cmd_write(sel, 0xBB);     \n    sunxi_lcd_para_write(sel, 0x20);   // 2b\n\n    sunxi_lcd_cmd_write(sel, 0xC0);     \n    sunxi_lcd_para_write(sel, 0x2C);   \n\n    sunxi_lcd_cmd_write(sel, 0xC2);     \n    sunxi_lcd_para_write(sel, 0x01);   \n\n    sunxi_lcd_cmd_write(sel, 0xC3);     \n    sunxi_lcd_para_write(sel, 0x01);   \n\n    sunxi_lcd_cmd_write(sel, 0xC4);     \n    sunxi_lcd_para_write(sel, 0x18);   // VDV, 0x20:0v\n\n    sunxi_lcd_cmd_write(sel, 0xC6);     \n    sunxi_lcd_para_write(sel, 0x13);   // 0x13:60Hz   \n\n    sunxi_lcd_cmd_write(sel, 0xD0);     \n    sunxi_lcd_para_write(sel, 0xA4);   \n    sunxi_lcd_para_write(sel, 0xA1);   \n\n    sunxi_lcd_cmd_write(sel, 0xD6);     \n    sunxi_lcd_para_write(sel, 0xA1);   // sleep in\u540e\uff0cgate\u8f93\u51fa\u4e3aGND\n\n    sunxi_lcd_cmd_write(sel, 0xE0);     \n    sunxi_lcd_para_write(sel, 0xF0);   \n    sunxi_lcd_para_write(sel, 0x04);   \n    sunxi_lcd_para_write(sel, 0x07);   \n    sunxi_lcd_para_write(sel, 0x04);   \n    sunxi_lcd_para_write(sel, 0x04);   \n    sunxi_lcd_para_write(sel, 0x04);   \n    sunxi_lcd_para_write(sel, 0x25);   \n    sunxi_lcd_para_write(sel, 0x33);   \n    sunxi_lcd_para_write(sel, 0x3C);   \n    sunxi_lcd_para_write(sel, 0x36);   \n    sunxi_lcd_para_write(sel, 0x14);   \n    sunxi_lcd_para_write(sel, 0x12);   \n    sunxi_lcd_para_write(sel, 0x29);   \n    sunxi_lcd_para_write(sel, 0x30);   \n\n    sunxi_lcd_cmd_write(sel, 0xE1);     \n    sunxi_lcd_para_write(sel, 0xF0);   \n    sunxi_lcd_para_write(sel, 0x02);   \n    sunxi_lcd_para_write(sel, 0x04);   \n    sunxi_lcd_para_write(sel, 0x05);   \n    sunxi_lcd_para_write(sel, 0x05);   \n    sunxi_lcd_para_write(sel, 0x21);   \n    sunxi_lcd_para_write(sel, 0x25);   \n    sunxi_lcd_para_write(sel, 0x32);   \n    sunxi_lcd_para_write(sel, 0x3B);   \n    sunxi_lcd_para_write(sel, 0x38);   \n    sunxi_lcd_para_write(sel, 0x12);   \n    sunxi_lcd_para_write(sel, 0x14);   \n    sunxi_lcd_para_write(sel, 0x27);   \n    sunxi_lcd_para_write(sel, 0x31);   \n\n    sunxi_lcd_cmd_write(sel, 0xE4);     \n    sunxi_lcd_para_write(sel, 0x1D);   // \u4f7f\u7528240\u6839gate  (N+1)*8\n    sunxi_lcd_para_write(sel, 0x00);   // \u8bbe\u5b9agate\u8d77\u70b9\u4f4d\u7f6e\n    sunxi_lcd_para_write(sel, 0x00);   // \u5f53gate\u6ca1\u6709\u7528\u5b8c\u65f6\uff0cbit4(TMG)\u8bbe\u4e3a0\n\n    sunxi_lcd_cmd_write(sel, 0x21);     \n\n    sunxi_lcd_cmd_write(sel, 0x29);   \n\n    if (info[sel].lcd_x < info[sel].lcd_y)\n        address(sel, 0, 0, info[sel].lcd_x - 1, info[sel].lcd_y - 1);\n    else\n        address(sel, 0, 0, info[sel].lcd_y - 1, info[sel].lcd_x - 1);\n}\n\nstatic void LCD_panel_exit(unsigned int sel)\n{\n    sunxi_lcd_cmd_write(sel, 0x28);\n    sunxi_lcd_delay_ms(20);\n    sunxi_lcd_cmd_write(sel, 0x10);\n    sunxi_lcd_delay_ms(20);\n    sunxi_lcd_pin_cfg(sel, 0);\n}\n\nstatic s32 LCD_open_flow(u32 sel)\n{\n    lcd_fb_here;\n    /* open lcd power, and delay 50ms */\n    LCD_OPEN_FUNC(sel, LCD_power_on, 50);\n    /* open lcd power, than delay 200ms */\n    LCD_OPEN_FUNC(sel, LCD_panel_init, 200);\n\n    LCD_OPEN_FUNC(sel, lcd_fb_black_screen, 50);\n    /* open lcd backlight, and delay 0ms */\n    LCD_OPEN_FUNC(sel, LCD_bl_open, 0);\n\n    return 0;\n}\n\nstatic s32 LCD_close_flow(u32 sel)\n{\n    lcd_fb_here;\n    /* close lcd backlight, and delay 0ms */\n    LCD_CLOSE_FUNC(sel, LCD_bl_close, 50);\n    /* open lcd power, than delay 200ms */\n    LCD_CLOSE_FUNC(sel, LCD_panel_exit, 10);\n    /* close lcd power, and delay 500ms */\n    LCD_CLOSE_FUNC(sel, LCD_power_off, 10);\n\n    return 0;\n}\n\nstatic void LCD_power_on(u32 sel)\n{\n    /* config lcd_power pin to open lcd power0 */\n    lcd_fb_here;\n    power_en(sel, 1);\n\n    sunxi_lcd_power_enable(sel, 0);\n\n    sunxi_lcd_pin_cfg(sel, 1);\n    RESET(sel, 1);\n    sunxi_lcd_delay_ms(100);\n    RESET(sel, 0);\n    sunxi_lcd_delay_ms(100);\n    RESET(sel, 1);\n}\n\nstatic void LCD_power_off(u32 sel)\n{\n    lcd_fb_here;\n    /* config lcd_power pin to close lcd power0 */\n    sunxi_lcd_power_disable(sel, 0);\n    power_en(sel, 0);\n}\n\nstatic void LCD_bl_open(u32 sel)\n{\n    sunxi_lcd_pwm_enable(sel);\n    /* config lcd_bl_en pin to open lcd backlight */\n    sunxi_lcd_backlight_enable(sel);\n    lcd_fb_here;\n}\n\nstatic void LCD_bl_close(u32 sel)\n{\n    /* config lcd_bl_en pin to close lcd backlight */\n    sunxi_lcd_backlight_disable(sel);\n    sunxi_lcd_pwm_disable(sel);\n    lcd_fb_here;\n}\n\n\n/* sel: 0:lcd0; 1:lcd1 */\nstatic s32 LCD_user_defined_func(u32 sel, u32 para1, u32 para2, u32 para3)\n{\n    lcd_fb_here;\n    return 0;\n}\n\nstatic int lcd_set_var(unsigned int sel, struct fb_info *p_info)\n{\n    return 0;\n}\n\nstatic int lcd_set_addr_win(unsigned int sel, int x, int y, int width, int height)\n{\n    address(sel, x, y, width, height);\n    return 0;\n}\n\nstatic int lcd_blank(unsigned int sel, unsigned int en)\n{\n    return 0;\n}\n\nstruct __lcd_panel st7789v_panel = {\n    /* panel driver name, must mach the name of lcd_drv_name in sys_config.fex\n       */\n    .name = "st7789v",\n    .func = {\n        .cfg_open_flow = LCD_open_flow,\n        .cfg_close_flow = LCD_close_flow,\n        .lcd_user_defined_func = LCD_user_defined_func,\n        .blank = lcd_blank,\n        .set_var = lcd_set_var,\n        .set_addr_win = lcd_set_addr_win,\n    },\n};\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u5bf9\u63a5\u9a71\u52a8\u6846\u67b6",children:"\u5bf9\u63a5\u9a71\u52a8\u6846\u67b6"}),"\n",(0,d.jsxs)(n.p,{children:["\u5b8c\u6210\u4e86\u5c4f\u5e55\u9a71\u52a8\u7684\u7f16\u5199\uff0c\u63a5\u4e0b\u6765\u9700\u8981\u5bf9\u63a5\u5230 SPILCD \u9a71\u52a8\u6846\u67b6\u3002\u9996\u5148\u7f16\u8f91 ",(0,d.jsx)(n.code,{children:"Kconfig"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image26.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u589e\u52a0 ",(0,d.jsx)(n.code,{children:"st7789v"})," \u7684\u914d\u7f6e"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image27.png",alt:""})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'config LCD_SUPPORT_ST7789V\n    bool "LCD support st7789v panel"\n    default n\n    ---help---\n        If you want to support st7789v panel for display driver, select it.\n'})}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u7f16\u8f91 ",(0,d.jsx)(n.code,{children:"panels.c"})," \u5728 ",(0,d.jsx)(n.code,{children:"panel_array"})," \u91cc\u589e\u52a0 ",(0,d.jsx)(n.code,{children:"st7789"})," \u9a71\u52a8\u7684\u5f15\u7528"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image28.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u4e0b\u56fe"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image29.png",alt:""})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"#ifdef CONFIG_LCD_SUPPORT_ST7789V\n    &st7789v_panel,\n#endif\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u4e4b\u540e\u7f16\u8f91 ",(0,d.jsx)(n.code,{children:"panels.h"})," \u540c\u6837\u589e\u52a0\u5f15\u7528"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image30.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u4e0b\u56fe"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image31.png",alt:""})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"#ifdef CONFIG_LCD_SUPPORT_ST7789V\nextern struct __lcd_panel st7789v_panel;\n#endif\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u6700\u540e\u7f16\u8f91\u5916\u5c42\u7684 ",(0,d.jsx)(n.code,{children:"Makefile"})," \u589e\u52a0\u7f16\u8bd1\u9009\u9879"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image32.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u4e0b\u6240\u793a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image33.png",alt:""})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"obj-${CONFIG_LCD_SUPPORT_ST7789V} += panels/st7789v.o\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u9009\u62e9-st7789v-\u9a71\u52a8",children:"\u9009\u62e9 ST7789V \u9a71\u52a8"}),"\n",(0,d.jsxs)(n.p,{children:["\u5728 SPILCD \u9a71\u52a8\u9009\u62e9\u754c\u9762\u53ef\u4ee5\u770b\u5230 ",(0,d.jsx)(n.code,{children:"LCD_FB panels select"})," \u9009\u62e9 SPI \u5c4f\u5e55\u7684\u9a71\u52a8"]}),"\n",(0,d.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,d.jsx)(n.code,{children:"LCD_FB panels select"})," \u9009\u9879"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image34.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u9009\u62e9\u5e76\u52fe\u9009 ",(0,d.jsx)(n.code,{children:"[*] LCD support st7789v panel"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image35.png",alt:""})}),"\n",(0,d.jsx)(n.h3,{id:"\u914d\u7f6e-spi-lcd-\u5f15\u811a",children:"\u914d\u7f6e SPI LCD \u5f15\u811a"}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd9\u91cc\u662f\u91cd\u70b9\u90e8\u5206\uff1a\u6253\u5f00\u4f60\u559c\u6b22\u7684\u7f16\u8f91\u5668\uff0c\u4fee\u6539\u6587\u4ef6\uff1a",(0,d.jsx)(n.code,{children:"board/r128s2/module/configs/sys_config.fex"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'[lcd_fb0]\nlcd_used            = 1   \nlcd_model_name      = "spilcd"   \nlcd_driver_name     = "st7789v" \n; \u5c4f\u5e55\u89c4\u683c\u914d\u7f6e\nlcd_x               = 240\nlcd_y               = 240  \nlcd_width           = 48\nlcd_height          = 48\n; SPI \u901f\u7387\nlcd_data_speed      = 50\n; PWM \u80cc\u5149\u914d\u7f6e\u9879\nlcd_pwm_used        = 1\nlcd_pwm_ch          = 1\nlcd_pwm_freq        = 5000 \nlcd_pwm_pol         = 0 \nlcd_backlight       = 100\n; \u914d\u7f6e lcd_if = 1 \u4e3a DBI \u6a21\u5f0f\uff0c\u53cc\u7f13\u51b2\nlcd_if              = 1\nfb_buffer_num       = 2\n; \u914d\u7f6e\u5c4f\u5e55\u4f20\u8f93\u6570\u636e\u7684\u50cf\u7d20\u683c\u5f0f\uff0c\u8fd9\u91cc\u662f LCDFB_FORMAT_RGB_565\nlcd_pixel_fmt       = 10\n; \u914d\u7f6e DBI \u63a5\u53e3\u50cf\u7d20\u683c\u5f0f\uff0c\u8fd9\u91cc\u662f RGB565\nlcd_dbi_fmt         = 2\n; \u914d\u7f6e DBI \u65f6\u949f\u7684\u884c\u4e3a\u6a21\u5f0f\uff0c\u8fd9\u91cc\u662f\u81ea\u52a8\u505c\u6b62\u6a21\u5f0f\u3002\u6709\u6570\u636e\u5c31\u6709\u65f6\u949f\uff0c\u6ca1\u53d1\u6570\u636e\u5c31\u6ca1\u6709\u65f6\u949f\nlcd_dbi_clk_mode    = 0\n; \u5c4f\u5e55\u6ca1\u6709 TE \u811a\uff0c\u914d\u7f6e TE \u4e3a 0\nlcd_dbi_te          = 0\n; \u914d\u7f6e\u5c4f\u5e55 DBI \u683c\u5f0f L4I1\nlcd_dbi_if          = 2\n; \u8f93\u5165\u56fe\u50cf\u6570\u636e RGB \u987a\u5e8f\u8bc6\u522b\u8bbe\u7f6e\uff0c\u8fd9\u91cc\u914d\u7f6e\u662f RGB \u683c\u5f0f\nlcd_rgb_order       = 0\n; \u8bbe\u7f6e\u5c4f\u7684\u5237\u65b0\u7387\uff0c\u5355\u4f4dHz\u3002\u5f53lcd_dbi_te\u4f7f\u80fd\u65f6\uff0c\u8fd9\u4e2a\u503c\u8bbe\u7f6e\u65e0\u6548\u3002\nlcd_fps             = 60\n; \u4f7f\u7528 SPI1 \u4f5c\u4e3a\u901a\u8baf\u63a5\u53e3\nlcd_spi_bus_num     = 1\nlcd_frm             = 2\nlcd_gamma_en        = 1\n\nlcd_power_num       = 0\nlcd_gpio_regu_num   = 0\nlcd_bl_percent_num  = 0\n\n;RESET Pin\nlcd_gpio_0          = port:PA20<1><0><2><0>\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u7f16\u8bd1\u6253\u5305",children:"\u7f16\u8bd1\u6253\u5305"}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd0\u884c\u547d\u4ee4 ",(0,d.jsx)(n.code,{children:"mp"})," \u7f16\u8bd1\u6253\u5305\uff0c\u53ef\u4ee5\u770b\u5230\u7f16\u8bd1\u4e86 ",(0,d.jsx)(n.code,{children:"st7789v.o"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image36.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u6d4b\u8bd5",children:"\u6d4b\u8bd5"}),"\n",(0,d.jsx)(n.p,{children:"\u70e7\u5f55\u542f\u52a8\u4e4b\u540e\uff0c\u5c4f\u5e55\u80cc\u5149\u542f\u52a8\uff0c\u4f46\u662f\u5c4f\u5e55\u5168\u9ed1\u3002"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image37.png",alt:""}),"\u8f93\u5165",(0,d.jsx)(n.code,{children:"test_spilcd"}),",\u5c4f\u5e55\u663e\u793a\u84dd\u8272\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image38.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image39.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u8f93\u5165 ",(0,d.jsx)(n.code,{children:"lv_examples 1"})," \u53ef\u4ee5\u663e\u793a ",(0,d.jsx)(n.code,{children:"lvgl"})," \u754c\u9762"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image40.png",alt:""})}),"\n",(0,d.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,d.jsx)(n.h3,{id:"lvgl-\u989c\u8272\u5f02\u5e38",children:"LVGL \u989c\u8272\u5f02\u5e38"}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd9\u662f\u7531\u4e8e LVGL \u914d\u7f6e\u7684 ",(0,d.jsx)(n.code,{children:"LV_COLOR_DEPTH"})," \u4e3a 32\uff0c\u4f46\u662f SPI \u5c4f\u914d\u7f6e\u4e3a16\u4f4d\u3002\u8bf7\u4fee\u6539 ",(0,d.jsx)(n.code,{children:"lv_conf.h"}),"\uff0c\u4e5f\u8bf7\u6ce8\u610f ",(0,d.jsx)(n.code,{children:"LV_COLOR_16_SWAP"})," \u4ec5\u6709 SPI \u9700\u8981\u8bbe\u7f6e\u4e3a 1\uff0c\u5728\u4f7f\u7528 DBI \u9a71\u52a8\u7684\u65f6\u5019\u4e0d\u9700\u8981\u914d\u7f6e\u4e3a 1\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image41.png",alt:""})}),"\n",(0,d.jsx)(n.h3,{id:"\u51fa\u73b0\u90e8\u5206\u82b1\u5c4f",children:"\u51fa\u73b0\u90e8\u5206\u82b1\u5c4f"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image42.png",alt:""})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u68c0\u67e5 ",(0,d.jsx)(n.code,{children:"address"})," \u51fd\u6570\u662f\u5426\u6b63\u786e"]}),"\n",(0,d.jsxs)(n.li,{children:["\u68c0\u67e5 ",(0,d.jsx)(n.code,{children:"sys_config.fex"})," \u5c4f\u5e55\u914d\u7f6e\u5206\u8fa8\u7387\u662f\u5426\u6b63\u786e"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"spi-lcd-\u989c\u8272\u76f8\u5173\u95ee\u9898",children:"SPI LCD \u989c\u8272\u76f8\u5173\u95ee\u9898"}),"\n",(0,d.jsx)(n.p,{children:"\u9996\u5148\uff0c\u5f97\u5148\u786e\u5b9a\u663e\u793a\u5c4f\u4f7f\u7528\u7684\u662fSPI\u63a5\u53e3\uff0c\u8fd8\u662fDBI\u63a5\u53e3\uff0c\u4e0d\u540c\u7684\u63a5\u53e3\uff0c\u8f93\u5165\u6570\u636e\u7684\u89e3\u6790\u65b9\u5f0f\u662f\u4e0d\u4e00\u6837\u7684\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["DBI\u63a5\u53e3\u7684\u5168\u79f0\u662f ",(0,d.jsx)(n.code,{children:"Display Bus Serial Interface"})," \uff0c\u5728\u663e\u793a\u5c4f\u6570\u636e\u624b\u518c\u4e2d\uff0c\u4e00\u822c\u4f1a\u8bf4\u8fd9\u662fSPI\u63a5\u53e3\uff0c\u6240\u4ee5\u6709\u4eba\u4f1a\u8bef\u8ba4\u4e3aSPI\u5c4f\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"normal spi"})," \u53bb\u76f4\u63a5\u9a71\u52a8\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u9605\u8bfb",(0,d.jsx)(n.code,{children:"lcd_dbi_if"}),"\u90e8\u5206\u7684\u4ecb\u7ecd\u53ef\u4ee5\u77e5\u9053\uff0c\u57283\u7ebf\u6a21\u5f0f\u65f6\uff0c\u53d1\u9001\u547d\u4ee4\u524d\u67091\u4f4dA0\u7528\u4e8e\u6307\u793a\u5f53\u524d\u53d1\u9001\u7684\u662f\u6570\u636e\uff0c\u8fd8\u662f\u547d\u4ee4\u3002\u800c\u547d\u4ee4\u540e\u9762\u63a5\u7740\u7684\u6570\u636e\u5c31\u6ca1\u6709\u8fd9\u4e2aA0\u4f4d\u4e86\uff0c\u4ee3\u8868SPI\u9700\u8981\u57289\u4f4d\u548c8\u4f4d\u4e4b\u95f4\u6765\u56de\u5207\u6362\uff0c\u800c\u5728\u8bfb\u6570\u636e\u65f6\uff0c\u66f4\u662f\u9700\u8981\u5ef6\u65f6 ",(0,d.jsx)(n.code,{children:"dummy clock"})," \u624d\u80fd\u8bfb\u6570\u636e\uff0c",(0,d.jsx)(n.code,{children:"normal spi"})," \u90fd\u5f88\u96be\uff0c\u751a\u81f3\u65e0\u6cd5\u5b9e\u73b0\u3002\u6240\u4ee5 ",(0,d.jsx)(n.code,{children:"normal spi"})," \u53ea\u80fd\u6a21\u62df4 \u7ebf\u7684DBI\u7684\u5199\u64cd\u4f5c\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5bf9\u4e8eR128\u8fd9\u7c7b\u652f\u6301DBI\u63a5\u53e3\u7684CPU\uff0c\u53ef\u4ee5\u9009\u62e9\u4e0d\u53bb\u4e86\u89e3SPI\u3002\u5982\u679c\u9700\u8981\u7528\u5230SPI\u53bb\u9a71\u52a8\u663e\u793a\u5c4f\uff0c\u5fc5\u987b\u628a\u663e\u793a\u5c4f\u8bbe\u7f6e\u6210\u5c0f\u7aef\u3002"}),"\n",(0,d.jsx)(n.h4,{id:"rgb565\u548crgb666",children:"RGB565\u548cRGB666"}),"\n",(0,d.jsx)(n.p,{children:"SPI\u663e\u793a\u5c4f\u4e00\u822c\u652f\u6301RGB444,RGB565\u548cRGB666\uff0cRGB444\u4f7f\u7528\u7684\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u53ea\u8ba8\u8bbaRGB565\u548cRGB666."}),"\n",(0,d.jsx)(n.p,{children:"RGB565\u4ee3\u8868\u4e00\u4e2a\u70b9\u7684\u989c\u8272\u75312\u5b57\u8282\u7ec4\u6210\uff0c\u4e5f\u5c31\u662fR\uff08\u7ea2\u8272\uff09\u75285\u4f4d\u8868\u793a\uff0cG\uff08\u7eff\u8272\uff09\u75286\u4f4d\u8868\u793a\uff0cB\uff08\u84dd\u8272\uff09\u75285\u4f4d\u8868\u793a\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image43.png",alt:""})}),"\n",(0,d.jsx)(n.p,{children:"RGB666\u4e00\u4e2a\u70b9\u7684\u989c\u8272\u75313\u5b57\u8282\u7ec4\u6210\uff0c\u6bcf\u4e2a\u5b57\u8282\u4ee3\u8868\u4e00\u4e2a\u989c\u8272\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5b57\u8282\u7684\u4f4e2\u4f4d\u4f1a\u65e0\u89c6\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image44.png",alt:""})}),"\n",(0,d.jsx)(n.h4,{id:"spi-\u63a5\u53e3",children:"SPI \u63a5\u53e3"}),"\n",(0,d.jsxs)(n.p,{children:["\u56e0\u4e3aSPI\u63a5\u53e3\u7684\u901a\u8baf\u6548\u7387\u4e0d\u9ad8\uff0c\u6240\u4ee5\u5efa\u8bae\u4f7f\u7528RGB565\u7684\u663e\u793a\uff0c\u4ee5 ",(0,d.jsx)(n.code,{children:"jlt35031c"})," \u663e\u793a\u5c4f\u4e3a\u4f8b\uff0c\u4ed6\u7684\u663e\u793a\u9a71\u52a8\u82af\u7247\u662f ",(0,d.jsx)(n.code,{children:"ST7789v"}),"\uff0c\u8bbe\u7f6e\u663e\u793a\u683c\u5f0f\u7684\u65b9\u5f0f\u662f\u5f80 ",(0,d.jsx)(n.code,{children:"3a"})," \u5bc4\u5b58\u5668\u5199\u5165",(0,d.jsx)(n.code,{children:"0x55\uff08RGB565"}),"\uff09\u6216\u8005 ",(0,d.jsx)(n.code,{children:"0x66\uff08RGB666\uff09"}),"\uff0c\u5728 ",(0,d.jsx)(n.code,{children:"R128SDK"})," \u4e2d\uff0c\u5df2\u7ecf\u628a ",(0,d.jsx)(n.code,{children:"jlt35031c"})," \u7684\u901a\u8baf\u683c\u5f0f\u5199\u6b7b\u4e3a ",(0,d.jsx)(n.code,{children:"0x55"}),"\uff0c",(0,d.jsx)(n.code,{children:"lcd_pixel_fmt"}),"\u914d\u7f6e\u9009\u9879\u65e0\u6548\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"sunxi_lcd_cmd_write(sel, 0x3a);\nsunxi_lcd_para_write(sel, 0x55);\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5728\u4f8b\u7a0b\u4e2d\uff0c\u8f93\u5165\u7684\u6570\u636e\u662f ",(0,d.jsx)(n.code,{children:"0xff\uff0c0x00\uff0c0xff\uff0c0x00"}),"\uff0c\u5bf9\u4e8eSPI\u63a5\u53e3\uff0c\u662f\u6309\u5b57\u8282\u53d1\u9001\u3002\u5b9e\u9645\u4e0a\uff0c\u4f8b\u7a0b\u53ea\u9700\u8981\u6bcf\u6b21\u53d1\u90012\u5b57\u8282\u5373\u53ef\uff0c\u56e0\u4e3a\u524d\u540e\u53d1\u9001\u7684\u90fd\u662f\u76f8\u540c\u7684ff 00\uff0c\u6240\u4ee5\u6ca1\u6709\u770b\u51fa\u95ee\u9898\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u6839\u636e\u5bf9 ",(0,d.jsx)(n.code,{children:"565"})," \u7684\u6570\u636e\u89e3\u6790\uff0c\u6211\u4eec\u62c6\u5206 ",(0,d.jsx)(n.code,{children:"ff 00"})," \u5c31\u53ef\u4ee5\u5f97\u5230\u7ea2\u8272\u5206\u91cf\u662f ",(0,d.jsx)(n.code,{children:"0b11111"}),"\uff0c\u4e5f\u5c31\u662f ",(0,d.jsx)(n.code,{children:"31"}),"\uff0c\u7eff\u8272\u662f",(0,d.jsx)(n.code,{children:"0b111000"}),"\uff0c\u4e5f\u5c31\u662f ",(0,d.jsx)(n.code,{children:"56"}),"\uff0c\uff0c\u84dd\u8272\u662f ",(0,d.jsx)(n.code,{children:"0"}),".\u6211\u4eec\u7b49\u6548\u8f6c\u6362\u6210 ",(0,d.jsx)(n.code,{children:"RGB888"}),"\uff0c\u6709\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"R = 31/31*255 = 255\nG = 56/63*255 = 226\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u8c03\u8272\u677f\u8f93\u5165\u5bf9\u5e94\u989c\u8272\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u9ec4\u8272"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image45.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u56e0\u4e3a ",(0,d.jsx)(n.code,{children:"DBI"})," \u901a\u8baf\u6548\u7387\u8f83\u9ad8\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"RGB565"})," \u6216\u8005 ",(0,d.jsx)(n.code,{children:"RGB666"}),"\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"DBI"})," \u63a5\u53e3\uff0c\u4e5f\u5c31\u662f ",(0,d.jsx)(n.code,{children:"lcd_if"})," \u8bbe\u7f6e\u4e3a",(0,d.jsx)(n.code,{children:"1"}),"\u65f6\uff0c\u9a71\u52a8\u4f1a\u6839\u636e ",(0,d.jsx)(n.code,{children:"lcd_pixel_fmt"})," \u914d\u7f6e\u5bc4\u5b58\u5668\uff0c\u4ee5 ",(0,d.jsx)(n.code,{children:"SDK"})," \u4e2d\u7684 ",(0,d.jsx)(n.code,{children:"kld2844b.c"})," \u4e3a\u4f8b\uff0c\u8fd9\u663e\u793a\u5c4f\u7684\u663e\u793a\u9a71\u52a8\u4e5f\u662f ",(0,d.jsx)(n.code,{children:"ST7789"}),"\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u5c4f\u5e55\uff0c\u5382\u5bb6\u5c01\u88c5\u65f6\u5df2\u7ecf\u9650\u5236\u4e86\u901a\u8baf\u65b9\u5f0f\uff0c\u6240\u4ee5\u5373\u4f7f\u662f\u80fd\u4f7f\u7528 DBI \u63a5\u53e3\u7684\u9a71\u52a8\u82af\u7247\u7684\u5c4f\u5e55\uff0c\u6216\u8bb8\u4e5f\u7528\u4e0d\u4e86DBI\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-c",children:"sunxi_lcd_cmd_write(sel, 0x3A); /* Interface Pixel Format */\n/* 55----RGB565;66---RGB666 */\nif (info[sel].lcd_pixel_fmt == LCDFB_FORMAT_RGB_565 ||\n    info[sel].lcd_pixel_fmt == LCDFB_FORMAT_BGR_565) {\n    sunxi_lcd_para_write(sel, 0x55);\n    if (info[sel].lcd_pixel_fmt == LCDFB_FORMAT_RGB_565)\n        rotate &= 0xf7;\n    else\n        rotate |= 0x08;\n} else if (info[sel].lcd_pixel_fmt < LCDFB_FORMAT_RGB_888) {\n    sunxi_lcd_para_write(sel, 0x66);\n    if (info[sel].lcd_pixel_fmt == LCDFB_FORMAT_BGRA_8888 ||\n        info[sel].lcd_pixel_fmt == LCDFB_FORMAT_BGRX_8888 ||\n        info[sel].lcd_pixel_fmt == LCDFB_FORMAT_ABGR_8888 ||\n        info[sel].lcd_pixel_fmt == LCDFB_FORMAT_XBGR_8888) {\n        rotate |= 0x08;\n    }\n} else {\n    sunxi_lcd_para_write(sel, 0x66);\n}\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5bf9\u4e8e DBI \u683c\u5f0f\uff0c\u4e0d\u518d\u662f\u4ee5\u5b57\u8282\u7684\u5f62\u5f0f\u53bb\u89e3\u6790\uff0c\u800c\u662f\u4ee5\u5b57\u7684\u65b9\u5f0f\u53bb\u89e3\u6790\uff0c\u4e3a\u4e86\u7edf\u4e00\uff0c\u8f6f\u4ef6\u5df2\u7ecf\u89c4\u5b9a\u4e86\uff0c",(0,d.jsx)(n.code,{children:"RGB565"})," \u683c\u5f0f\u65f6\uff0c\u5b57\u5927\u5c0f\u662f2\u5b57\u8282\uff0c\u4e5f\u5c31\u662f16\u4f4d\uff0c\u800c ",(0,d.jsx)(n.code,{children:"RGB666"})," \u683c\u5f0f\u65f6\uff0c\u5b57\u5927\u5c0f\u662f4\u5b57\u8282\uff0c\u4e5f\u5c31\u662f32\u4f4d\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5bf9\u4e8e ",(0,d.jsx)(n.code,{children:"RGB565"})," \u683c\u5f0f\uff0c\u540c\u6837\u662f\u8bbe\u7f6e\u4e3a ",(0,d.jsx)(n.code,{children:"0xff,0x00"}),"\u3002\u56e0\u4e3a\u5c4f\u5e55\u662f\u5927\u7aef\uff0c\u800c\u82af\u7247\u5b58\u50a8\u65b9\u5f0f\u662f\u5c0f\u7aef\uff0c\u6240\u4ee5\u82af\u7247\u7684 DBI \u6a21\u5757\uff0c\u4f1a\u81ea\u52a8\u628a\u6570\u636e\u4ece\u65b0\u6392\u5217\uff0c\u4e5f\u5c31\u662f\u5b9e\u9645\u4e0a DBI \u53d1\u9001\u6570\u636e\u65f6\uff0c\u4f1a\u5148\u53d1\u9001",(0,d.jsx)(n.code,{children:"0x00"}),"\uff0c\u518d\u53d1\u9001",(0,d.jsx)(n.code,{children:"0xff"}),"\uff0c\u4e5f\u5c31\u662f\u7ea2\u8272\u5206\u91cf\u4e3a0\uff0c\u7eff\u8272\u5206\u91cf\u4e3a ",(0,d.jsx)(n.code,{children:"0b000111"}),"\uff0c\u4e5f\u5c31\u662f7\uff0c\u84dd\u8272\u5206\u91cf\u662f ",(0,d.jsx)(n.code,{children:"0x11111"}),"\uff0c\u4e5f\u5c31\u662f31\uff0c\u6211\u4eec\u540c\u6837\u8f6c\u6362\u6210RGB888"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"G = 7/63*255 = 28\nB= 31/31*255 = 255\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u8c03\u8272\u677f\u4e0a\u8f93\u5165\uff0c\u53ef\u4ee5\u5f97\u5230\u84dd\u8272\u3002"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image46.png",alt:""})}),"\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u662f ",(0,d.jsx)(n.code,{children:"RGB666"}),"\uff0c\u867d\u7136\u5360\u7528\u7684\u662f3\u4e2a\u5b57\u8282\uff0c\u4f46\u662f\u6ca1\u6709CPU\u662f3\u5b57\u8282\u5bf9\u9f50\u7684\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u6b21\u6027\u8f93\u51654\u5b57\u8282\uff0c\u7136\u540e DBI \u786c\u4ef6\u6a21\u5757\uff0c\u4f1a\u81ea\u52a8\u820d\u5f031\u4e2a\u5b57\u8282\uff0c\u8f6f\u4ef6\u540c\u610f\u820d\u5f03\u4e86\u6700\u540e\u4e00\u4e2a\u5b57\u8282\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u4f9d\u65e7\u4ee5\u4f8b\u7a0b\u4e3a\u4f8b\uff0c\u4f8b\u7a0b\u8f93\u5165\u4e86 ",(0,d.jsx)(n.code,{children:"0xff\uff0c0x00\uff0c0xff\uff0c0x00"}),"\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8bf4\u660e\uff0c\u6807\u51c6\u4e3a ",(0,d.jsx)(n.code,{children:"0xff(1)\uff0c0x00(1)\uff0c0xff(2)\uff0c0x00(2)"}),"\uff0c\u5176\u4e2d ",(0,d.jsx)(n.code,{children:"0x00(2)"}),"\u4f1a\u88ab\u820d\u5f03\u6389\uff0c\u7136\u540e\u53d1\u9001\u987a\u5e8f\u662f",(0,d.jsx)(n.code,{children:"0xff(2)\uff0c0x00(1)\uff0c0xff(1)"}),"\uff0c\u4e5f\u5c31\u662f ",(0,d.jsx)(n.code,{children:"0xff(2)"})," \u662f\u7ea2\u8272\u5206\u91cf\uff0c",(0,d.jsx)(n.code,{children:"0xff(1)"})," \u662f\u84dd\u8272\u5206\u91cf\uff0c\u6df7\u5408\u53ef\u4ee5\u5f97\u5230\u7d2b\u8272\u3002"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"http://photos.100ask.net/aw-r128-docs/rtos/demo/part1/chapter18/image47.png",alt:""})})]})}function a(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(x,{...e})}):x(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>i});var d=s(7294);const l={},c=d.createContext(l);function i(e){const n=d.useContext(c);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),d.createElement(c.Provider,{value:n},e.children)}}}]);